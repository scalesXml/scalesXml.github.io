<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\xpath\XPathTypes.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml.xpath

<span class="keyword">import</span> scales.utils._
<span class="keyword">import</span> scala.collection.generic.CanBuildFrom
<span class="keyword">import</span> scales.utils.one

<span class="keyword">import</span> scales.xml.<span class="delimiter">{</span>Elem, Attributes, Attribute, XCC, XmlItem, XmlPath, AttributeQName, ScalesXml, text, UnprefixedQName<span class="delimiter">}</span>

<span class="keyword">import</span> scales.xml.impl.EqualsHelpers

<span class="comment">/** Simple container for keeping relationship between the parent and attribute */</span>
case <span class="keyword">class</span> <a title="class AttributePath extends java.lang.Object with ScalaObject with Product with Serializable" id="124755">AttributePath</a><a href="#124755" title="ScalaObject" class="delimiter">(</a><a title="scales.xml.Attribute" id="120160">attribute</a>: <a href="../XmlTypes.scala.html#9450" title="scales.xml.Attribute">Attribute</a>, <a title="scales.xml.package.XmlPath" id="120161">parent</a>: <a href="../../utils/collection/path/Paths.scala.html#13360" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span>

case <span class="keyword">class</span> <a title="class XmlPathComparisoms extends java.lang.Object with ScalaObject with Product with Serializable" id="124740">XmlPathComparisoms</a><a href="#124740" title="ScalaObject" class="delimiter">(</a><a title="scales.xml.package.XmlPath" id="47313">path</a>: <a href="../../utils/collection/path/Paths.scala.html#13360" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../ScalesXml.scala.html#9664" title="object scales.xml.ScalesXml">ScalesXml</a>.xmlpathText
  <span class="keyword">def</span> <a title="(other: String)Boolean" id="47310">===</a><span class="delimiter">(</span><a title="String" id="122556">other</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="Functions.scala.html#15828" title="(t: scales.xml.package.XmlPath)(implicit value: scales.xml.xpath.TextValue[scales.xml.package.XmlPath])String">text</a><a href="Functions.scala.html#42961" title="=&gt; scales.xml.xpath.XmlPathText.type" class="delimiter">(</a><a href="#47313" title="=&gt; scales.xml.package.XmlPath">path</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#122556" title="String">other</a>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class AttributePathComparisoms extends java.lang.Object with ScalaObject with Product with Serializable" id="124751">AttributePathComparisoms</a><a href="#124751" title="ScalaObject" class="delimiter">(</a><a title="scales.xml.xpath.AttributePath" id="47287">path</a>: <a href="#124755" title="scales.xml.xpath.AttributePath">AttributePath</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../ScalesXml.scala.html#9664" title="object scales.xml.ScalesXml">ScalesXml</a>.attribPathText
  <span class="keyword">def</span> <a title="(other: String)Boolean" id="47284">===</a><span class="delimiter">(</span><a title="String" id="122627">other</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="Functions.scala.html#15828" title="(t: scales.xml.xpath.AttributePath)(implicit value: scales.xml.xpath.TextValue[scales.xml.xpath.AttributePath])String">text</a><a href="Functions.scala.html#42959" title="=&gt; scales.xml.xpath.AttributePathText.type" class="delimiter">(</a><a href="#47287" title="=&gt; scales.xml.xpath.AttributePath">path</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#122627" title="String">other</a>
<span class="delimiter">}</span>

<span class="comment">/** Attributes that have been selected */</span>
case <span class="keyword">class</span> <a title="class AttributePaths[PT &lt;: Iterable[scales.xml.package.XmlPath]] extends java.lang.Object with ScalaObject with Product with Serializable" id="124747">AttributePaths</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="120234">PT</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span><a href="#124747" title="ScalaObject" class="delimiter">(</a><a title="Iterable[scales.xml.xpath.AttributePath]" id="120238">attributes</a>: <span title="Iterable[scales.xml.xpath.AttributePath]">Iterable</span><span class="delimiter">[</span>AttributePath<span class="delimiter">]</span>, <a title="scales.xml.xpath.XPathInfo" id="120239">path</a>: <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a>, <a title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]" id="120240">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">CanBuildFrom</span><span class="delimiter">[</span>PT, XmlPath, PT<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> scales.xml.impl.<a href="../impl/EqualsHelpers.scala.html#9978" title="object scales.xml.impl.EqualsHelpers">EqualsHelpers</a>.toQName
  <span class="comment">/** Parents of the attributepaths */</span>
  <span class="keyword">def</span> <a title="()scales.xml.xpath.XPath[PT]" id="47136">\^</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[PT]">XPath</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> = <span title="scales.xml.xpath.XPath[PT]" class="keyword">new</span> <a href="#11888" title="scales.xml.xpath.XPath[PT]">XPath</a><span class="delimiter">[</span>PT<span class="delimiter">]</span><span class="delimiter">(</span><a href="#120239" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#124736" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.xpath.XPathInfo">copy</a><span class="delimiter">(</span>nodes = <span title="(xs: Iterable[scales.xml.package.XmlPath]*)List[Iterable[scales.xml.package.XmlPath]]">List</span><span class="delimiter">(</span><a href="#120238" title="=&gt; Iterable[scales.xml.xpath.AttributePath]">attributes</a>.<span title="(f: scales.xml.xpath.AttributePath =&gt; scales.xml.package.XmlPath)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.xpath.AttributePath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">(</span><a href="#122729" title="scales.xml.xpath.AttributePath">_</a>.<a href="#120161" title="=&gt; scales.xml.package.XmlPath">parent</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#120240" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>

  <span class="comment">// the following are to provide similar chained predicates as expected by me and the spec</span>

  <span class="keyword">def</span> <a title="(pred: scales.xml.xpath.AttributePath =&gt; Boolean)scales.xml.xpath.AttributePaths[PT]" id="47137">*@</a><span class="delimiter">(</span><a title="scales.xml.xpath.AttributePath =&gt; Boolean" id="122755">pred</a> : AttributePath =&gt; Boolean<span class="delimiter">)</span> : <a href="#124747" title="scales.xml.xpath.AttributePaths[PT]">AttributePaths</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> =
    <a href="#124747" title="(attributes: Iterable[scales.xml.xpath.AttributePath], path: scales.xml.xpath.XPathInfo, cbf: scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT])scales.xml.xpath.AttributePaths[PT]">AttributePaths</a><span class="delimiter">(</span><a href="#120238" title="=&gt; Iterable[scales.xml.xpath.AttributePath]">attributes</a>.<span title="(p: scales.xml.xpath.AttributePath =&gt; Boolean)Iterable[scales.xml.xpath.AttributePath]">filter</span> <span class="delimiter">{</span> <a href="#122755" title="(v1: scales.xml.xpath.AttributePath)Boolean">pred</a><span class="delimiter">(</span><a href="#122764" title="scales.xml.xpath.AttributePath">_</a><span class="delimiter">)</span> <span class="delimiter">}</span>, <a href="#120239" title="=&gt; scales.xml.xpath.XPathInfo">path</a>, <a href="#120240" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>

  <span class="comment">/** Special case for AttributeQNames, only local and namespace match */</span>
  <span class="keyword">def</span> <a title="(attrQName: scales.xml.package.AttributeQName)scales.xml.xpath.AttributePaths[PT]" id="47138">*@</a><span class="delimiter">(</span><a title="scales.xml.package.AttributeQName" id="122769">attrQName</a> : <a href="../../utils/EitherLike.scala.html#12558" title="scales.xml.package.AttributeQName">AttributeQName</a><span class="delimiter">)</span> : <a href="#124747" title="scales.xml.xpath.AttributePaths[PT]">AttributePaths</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> =
    <a href="#47137" title="(pred: scales.xml.xpath.AttributePath =&gt; Boolean)scales.xml.xpath.AttributePaths[PT]">*@</a><span class="delimiter">(</span><span class="delimiter">{</span> attributePath : <a href="#124755" title="scales.xml.xpath.AttributePath">AttributePath</a> =&gt; <a href="../impl/EqualsHelpers.scala.html#42867" title="implicit scales.xml.impl.EqualsHelpers.toQName : (attribQName: scales.xml.package.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#122778" title="scales.xml.xpath.AttributePath">attributePath</a>.<a href="#120160" title="=&gt; scales.xml.Attribute">attribute</a>.<a href="../XmlTypes.scala.html#47990" title="=&gt; scales.xml.package.AttributeQName">name</a><span class="delimiter">)</span> <a href="../QName.scala.html#42837" title="(other: scales.xml.QName)Boolean">=:=</a> <a href="../impl/EqualsHelpers.scala.html#42867" title="implicit scales.xml.impl.EqualsHelpers.toQName : (attribQName: scales.xml.package.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#122769" title="scales.xml.package.AttributeQName">attrQName</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="comment">/** Loose match for UnprefixedQNames only, only matches local and namespace */</span>
  <span class="keyword">def</span> <a title="(qname: scales.xml.UnprefixedQName)scales.xml.xpath.AttributePaths[PT]" id="47139">*@</a><span class="delimiter">(</span><a title="scales.xml.UnprefixedQName" id="122775">qname</a> : <a href="../QName.scala.html#9681" title="scales.xml.UnprefixedQName">UnprefixedQName</a><span class="delimiter">)</span> : <a href="#124747" title="scales.xml.xpath.AttributePaths[PT]">AttributePaths</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> =
    <a href="#47137" title="(pred: scales.xml.xpath.AttributePath =&gt; Boolean)scales.xml.xpath.AttributePaths[PT]">*@</a><span class="delimiter">(</span><span class="delimiter">{</span> attributePath : <a href="#124755" title="scales.xml.xpath.AttributePath">AttributePath</a> =&gt; <a href="../impl/EqualsHelpers.scala.html#42867" title="implicit scales.xml.impl.EqualsHelpers.toQName : (attribQName: scales.xml.package.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#122784" title="scales.xml.xpath.AttributePath">attributePath</a>.<a href="#120160" title="=&gt; scales.xml.Attribute">attribute</a>.<a href="../XmlTypes.scala.html#47990" title="=&gt; scales.xml.package.AttributeQName">name</a><span class="delimiter">)</span> <a href="../QName.scala.html#42837" title="(other: scales.xml.QName)Boolean">=:=</a> <a href="#122775" title="scales.xml.UnprefixedQName">qname</a> <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Some if there is one, else none
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.xpath.AttributePath]" id="47140">one</a>: <span title="Iterable[scales.xml.xpath.AttributePath]">Iterable</span><span class="delimiter">[</span>AttributePath<span class="delimiter">]</span> = <span title="Iterable[scales.xml.xpath.AttributePath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#120238" title="=&gt; Iterable[scales.xml.xpath.AttributePath]">attributes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="object Nil">Nil</span> <span class="keyword">else</span> <a href="../../utils/package.scala.html#12574" title="object scales.utils.package">scales</a>.utils.<a href="../../utils/package.scala.html#15182" title="(i: scales.xml.xpath.AttributePath)List[scales.xml.xpath.AttributePath]">one</a><span class="delimiter">(</span><a href="#120238" title="=&gt; Iterable[scales.xml.xpath.AttributePath]">attributes</a>.<span title="=&gt; scales.xml.xpath.AttributePath">head</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Some if there is one, else calls handler (allows decisions based on more than one etc.
   */</span>
  <span class="keyword">def</span> <a title="(handler: Iterable[scales.xml.xpath.AttributePath] =&gt; Iterable[scales.xml.xpath.AttributePath])Iterable[scales.xml.xpath.AttributePath]" id="47141">oneOr</a><span class="delimiter">(</span><a title="Iterable[scales.xml.xpath.AttributePath] =&gt; Iterable[scales.xml.xpath.AttributePath]" id="122795">handler</a>: Iterable<span class="delimiter">[</span>AttributePath<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>AttributePath<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="Iterable[scales.xml.xpath.AttributePath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#120238" title="=&gt; Iterable[scales.xml.xpath.AttributePath]">attributes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../utils/package.scala.html#12574" title="object scales.utils.package">scales</a>.utils.<a href="../../utils/package.scala.html#15182" title="(i: scales.xml.xpath.AttributePath)List[scales.xml.xpath.AttributePath]">one</a><span class="delimiter">(</span><a href="#120238" title="=&gt; Iterable[scales.xml.xpath.AttributePath]">attributes</a>.<span title="=&gt; scales.xml.xpath.AttributePath">head</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#122795" title="(v1: Iterable[scales.xml.xpath.AttributePath])Iterable[scales.xml.xpath.AttributePath]">handler</a><span class="delimiter">(</span><a href="#120238" title="=&gt; Iterable[scales.xml.xpath.AttributePath]">attributes</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(textValue: =&gt; String)scales.xml.xpath.AttributePaths[PT]" id="47142">===</a><span class="delimiter">(</span> <a title="=&gt; String" id="122816">textValue</a> : =&gt; String <span class="delimiter">)</span> = 
    <a href="#47137" title="(pred: scales.xml.xpath.AttributePath =&gt; Boolean)scales.xml.xpath.AttributePaths[PT]">*@</a><span class="delimiter">(</span> <a title="scales.xml.xpath.AttributePath" id="122824">a</a> =&gt; <a href="#122824" title="scales.xml.xpath.AttributePath">a</a>.<a href="#120160" title="=&gt; scales.xml.Attribute">attribute</a>.<a href="../XmlTypes.scala.html#47992" title="=&gt; String">value</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#122816" title="=&gt; String">textValue</a> <span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * XPaths need sorting upon unions etc, and duplicate filtering on \^ parents
 */</span>
case <span class="keyword">class</span> <a title="class XPathInfo extends java.lang.Object with ScalaObject with Product with Serializable" id="124736">XPathInfo</a><a href="#124736" title="ScalaObject" class="delimiter">(</a><a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="123233">nodes</a>: <span title="Iterable[Iterable[scales.xml.package.XmlPath]]">Iterable</span><span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Boolean" id="123234">mustBeSorted</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="123235">filterDuplicates</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="123236">initialNode</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="123237">eager</a> : <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="123238">direct</a> : <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

<span class="comment">/**
 * In contrast to the specs reverse axis are not supported.  This puts
 * an extra effort on the user for translating, but I don't agree with
 * the design anyway.  It adds both ambiguity for an embedded dsl:
 *
 * //a:ShouldRedeclare/../text()[5]/preceding-sibling::text()[1]
 *
 * is in reverse order (above is previousSibling in Path), whereas
 *
 * (//a:ShouldRedeclare/../text()[5]/preceding-sibling::text())[1]
 *
 * is in doc order (the first text child of the parent).  Such an arbritary decision does nothing but irritate.  A simpler design as found in this implementation is that the user can simply use full scala data functions to reverse as needed.
 *
 * (Temptation is to provide the base type as SeqLike instead of Iterable as it should be in a sequence with a defined order, also then providing .reverse and friends)
 */</span>
<span class="keyword">class</span> <a title="class XPath[PT &lt;: Iterable[scales.xml.package.XmlPath]] extends java.lang.Object with scales.xml.xpath.ElementStep with scales.xml.xpath.OtherNodeTypes with scales.xml.xpath.AttributeAxis with scales.xml.xpath.SiblingsAxis with scales.xml.xpath.DocumentSplitters with ScalaObject" id="11888">XPath</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="14964">PT</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span><a href="#11888" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="scales.xml.xpath.XPathInfo" id="122703">path</a>: <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a>, <span class="keyword">val</span> <a title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]" id="122704">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">CanBuildFrom</span><span class="delimiter">[</span>PT, XmlPath, PT<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Axe.scala.html#11654" title="scales.xml.xpath.ElementStep">ElementStep</a> <span class="keyword">with</span> <a href="Axe.scala.html#11741" title="scales.xml.xpath.OtherNodeTypes">OtherNodeTypes</a> <span class="keyword">with</span> <a href="Axe.scala.html#11438" title="scales.xml.xpath.AttributeAxis">AttributeAxis</a> <span class="keyword">with</span> <a href="Axe.scala.html#11789" title="scales.xml.xpath.SiblingsAxis">SiblingsAxis</a> <span class="keyword">with</span> <a href="Axe.scala.html#11621" title="scales.xml.xpath.DocumentSplitters">DocumentSplitters</a> <span class="delimiter">{</span>

  <span class="keyword">type</span> <a title="PT" id="47203">T</a> = <a href="#14964" title="PT">PT</a>

  <span class="keyword">def</span> <a title="(xpathInfo: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[XPath.this.T]" id="47204">newThis</a><span class="delimiter">(</span><a title="scales.xml.xpath.XPathInfo" id="123001">xpathInfo</a>: <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a><span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <span title="scales.xml.xpath.XPath[XPath.this.T]" class="keyword">new</span> <a href="#11888" title="scales.xml.xpath.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#123001" title="scales.xml.xpath.XPathInfo">xpathInfo</a>, <a href="#122704" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.package.XmlPath]" id="47205">empty</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <a href="#122704" title="()scala.collection.mutable.Builder[scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()PT">result</span>
  <span class="keyword">def</span> <a title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]" id="47206">just</a><span class="delimiter">(</span><a title="scales.xml.package.XmlPath" id="123090">only</a>: <a href="../../utils/collection/path/Paths.scala.html#13360" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#122704" title="()scala.collection.mutable.Builder[scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(elem: scales.utils.collection.path.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.collection.ImmutableArrayProxy[T]])scala.collection.mutable.Builder[scales.xml.package.XmlPath,PT]">+=</span> <a href="#123090" title="scales.xml.package.XmlPath">only</a><span class="delimiter">)</span>.<span title="()PT">result</span>

  <span class="comment">/**
   * Allow working within the XPath, easily extend and test
   */</span>
  <span class="keyword">def</span> <a title="(f: scales.xml.xpath.XPath[XPath.this.T] =&gt; scales.xml.xpath.XPath[XPath.this.T])scales.xml.xpath.XPath[XPath.this.T]" id="47207">in</a><span class="delimiter">(</span><a title="scales.xml.xpath.XPath[XPath.this.T] =&gt; scales.xml.xpath.XPath[XPath.this.T]" id="123196">f</a>: <span class="delimiter">(</span>XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#123196" title="(v1: scales.xml.xpath.XPath[XPath.this.T])scales.xml.xpath.XPath[XPath.this.T]">f</a><span class="delimiter">(</span><a href="#11888" title="scales.xml.xpath.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Allow working within the XPath, easily extend and test
   */</span>
  <span class="keyword">def</span> <a title="(f: scales.xml.xpath.XPath[XPath.this.T] =&gt; scales.xml.xpath.XPath[XPath.this.T])scales.xml.xpath.XPath[XPath.this.T]" id="47208">|&gt;</a><span class="delimiter">(</span><a title="scales.xml.xpath.XPath[XPath.this.T] =&gt; scales.xml.xpath.XPath[XPath.this.T]" id="123199">f</a>: <span class="delimiter">(</span>XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#47207" title="(f: scales.xml.xpath.XPath[XPath.this.T] =&gt; scales.xml.xpath.XPath[XPath.this.T])scales.xml.xpath.XPath[XPath.this.T]">in</a><span class="delimiter">(</span><a href="#123199" title="scales.xml.xpath.XPath[XPath.this.T] =&gt; scales.xml.xpath.XPath[XPath.this.T]">f</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Some when its only one in the result set
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.package.XmlPath]" id="47209">one</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123204">nodes</a> = <a href="../ScalesXml.scala.html#9664" title="object scales.xml.ScalesXml">ScalesXml</a>.<a href="XmlPaths.scala.html#43005" title="implicit scales.xml.xpath.XmlPathImplicits.fromXPathToIterable : (xpath: scales.xml.xpath.XPath[_])Iterable[scales.xml.package.XmlPath]">fromXPathToIterable</a><span class="delimiter">(</span><a href="#11888" title="scales.xml.xpath.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#123204" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="object Nil">Nil</span>
    <span class="keyword">else</span> <a href="../../utils/package.scala.html#12574" title="object scales.utils.package">scales</a>.utils.<a href="../../utils/package.scala.html#15182" title="(i: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">one</a><span class="delimiter">(</span><a href="#123204" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; scales.xml.package.XmlPath">head</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(handler: scales.xml.xpath.XPath[XPath.this.T] =&gt; Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]" id="47210">oneOr</a><span class="delimiter">(</span><a title="scales.xml.xpath.XPath[XPath.this.T] =&gt; Iterable[scales.xml.package.XmlPath]" id="123214">handler</a>: XPath<span class="delimiter">[</span>T<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123217">nodes</a> = <a href="../ScalesXml.scala.html#9664" title="object scales.xml.ScalesXml">ScalesXml</a>.<a href="XmlPaths.scala.html#43005" title="implicit scales.xml.xpath.XmlPathImplicits.fromXPathToIterable : (xpath: scales.xml.xpath.XPath[_])Iterable[scales.xml.package.XmlPath]">fromXPathToIterable</a><span class="delimiter">(</span><a href="#11888" title="scales.xml.xpath.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#123217" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../utils/package.scala.html#12574" title="object scales.utils.package">scales</a>.utils.<a href="../../utils/package.scala.html#15182" title="(i: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">one</a><span class="delimiter">(</span><a href="#123217" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; scales.xml.package.XmlPath">head</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#123214" title="(v1: scales.xml.xpath.XPath[XPath.this.T])Iterable[scales.xml.package.XmlPath]">handler</a><span class="delimiter">(</span><a href="#11888" title="scales.xml.xpath.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Union of the two paths, they must use the same type however
   *
   * x | x === x but only when apply fromXPathToIterable (default behaviour anyway)
   *
   * For attribute paths only ++ on an iterable is supported.
   */</span>
  <span class="keyword">def</span> <a title="(other: scales.xml.xpath.XPath[XPath.this.T])scales.xml.xpath.XPath[XPath.this.T]" id="47211">|</a><span class="delimiter">(</span> <a title="scales.xml.xpath.XPath[XPath.this.T]" id="123228">other</a> : <a href="#11888" title="scales.xml.xpath.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">)</span> : <a href="#11888" title="scales.xml.xpath.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = 
    <span title="scales.xml.xpath.XPath[PT]" class="keyword">new</span> <a href="#11888" title="scales.xml.xpath.XPath[PT]">XPath</a><span class="delimiter">(</span><a href="#124736" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.xpath.XPathInfo">XPathInfo</a><span class="delimiter">(</span> 
      nodes = <a href="#122703" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a> <span title="(that: scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">++</span> <a href="#123228" title="scales.xml.xpath.XPath[XPath.this.T]">other</a>.<a href="#122703" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>, 
      mustBeSorted = <span title="Boolean(true)" class="keyword">true</span>, filterDuplicates = <span title="Boolean(true)" class="keyword">true</span>, initialNode = <span title="Boolean(false)" class="keyword">false</span>, eager = <a href="#122703" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123237" title="=&gt; Boolean">eager</a> <span title="(x: Boolean)Boolean">|</span> <a href="#123228" title="scales.xml.xpath.XPath[XPath.this.T]">other</a>.<a href="#122703" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123237" title="=&gt; Boolean">eager</a><span class="delimiter">)</span>, <a href="#122704" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>
  
  <span class="comment">// TODO figure out unions of other paths (namespaces / attributes)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Pos and filter for a direct access does not flatmap.  The next / breaks the chain
 */</span>
<span class="keyword">class</span> <a title="class DirectXPath[PT &lt;: Iterable[scales.xml.package.XmlPath]] extends scales.xml.xpath.XPath[PT] with ScalaObject" id="11585">DirectXPath</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="14965">PT</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span><a href="#11585" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scales.xml.xpath.XPathInfo" id="123311">path</a>: <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a>, <span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]" id="123312">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">CanBuildFrom</span><span class="delimiter">[</span>PT, XmlPath, PT<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#11888" title="scales.xml.xpath.XPath[PT]">XPath</a><span class="delimiter">[</span>PT<span class="delimiter">]</span><span class="delimiter">(</span><a href="#123311" title="scales.xml.xpath.XPathInfo">path</a>, <a href="#123312" title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[DirectXPath.this.T]" id="123307">process</a><span class="delimiter">(</span><a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="123315">newNodes</a>: <span title="Iterable[Iterable[scales.xml.package.XmlPath]]">Iterable</span><span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span>,  <a title="scales.xml.xpath.XPathInfo" id="123319">info</a> : <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a> = <a href="#123311" title="=&gt; scales.xml.xpath.XPathInfo">path</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#47204" title="(xpathInfo: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[DirectXPath.this.T]">newThis</a><span class="delimiter">(</span><a href="#123319" title="scales.xml.xpath.XPathInfo">info</a>.<a href="#124736" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.xpath.XPathInfo">copy</a><span class="delimiter">(</span> nodes = <a href="#123315" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a> <span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scales.xml.xpath.Axis" id="11577">Axis</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/**
   * eager recursive unpack, better performance when its eager
   */</span> 
  <span class="keyword">def</span> <a title="(xmlPath: Iterable[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]" id="47248">eager_recUnpack</a><span class="delimiter">(</span><a title="Iterable[scales.xml.package.XmlPath]" id="123323">xmlPath</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[scales.xml.package.XmlPath]">List</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="List[scales.xml.package.XmlPath]" id="123325">res</a> : <span title="List[scales.xml.package.XmlPath]">List</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

    <span class="keyword">val</span> <a title="Iterator[scales.xml.package.XmlPath]" id="123326">i</a> = <a href="#123323" title="Iterable[scales.xml.package.XmlPath]">xmlPath</a>.<span title="=&gt; Iterator[scales.xml.package.XmlPath]">iterator</span>
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#123326" title="Iterator[scales.xml.package.XmlPath]">i</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scales.xml.package.XmlPath" id="123328">child</a> = <a href="#123326" title="Iterator[scales.xml.package.XmlPath]">i</a>.<span title="()scales.xml.package.XmlPath">next</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#123328" title="scales.xml.package.XmlPath">child</a>.<a href="../../utils/collection/path/Paths.scala.html#46950" title="=&gt; Boolean">isItem</a><span class="delimiter">)</span> 
	<a href="#123325" title="List[scales.xml.package.XmlPath]">res</a> = <a href="#123328" title="scales.xml.package.XmlPath">child</a> <a href="#123329" title="(x: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">::</a> <a href="#123325" title="List[scales.xml.package.XmlPath]">res</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
	<span class="comment">// child first then its kids</span>
	<a href="#123325" title="List[scales.xml.package.XmlPath]">res</a> = <span class="delimiter">(</span><a href="#123328" title="scales.xml.package.XmlPath">child</a> <a href="#123335" title="(x: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">::</a> <a href="#123325" title="List[scales.xml.package.XmlPath]">res</a> <span class="delimiter">)</span>.<span title="(prefix: List[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]">reverse_:::</span> <span class="delimiter">(</span>
	  <a href="#47248" title="(xmlPath: Iterable[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]">eager_recUnpack</a><span class="delimiter">(</span><a href="#123328" title="scales.xml.package.XmlPath">child</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#123325" title="List[scales.xml.package.XmlPath]">res</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Possibly lazy recursive unpack, used by l_\\ and descendant
   */</span> 
  <span class="keyword">def</span> <a title="(axis: scales.xml.xpath.Axis)(xmlPath: Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]" id="47249">lazy_recUnpack</a><span class="delimiter">(</span><a title="scales.xml.xpath.Axis" id="120611">axis</a> : <a href="#11576" title="scales.xml.xpath.Axis">Axis</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterable[scales.xml.package.XmlPath]" id="120612">xmlPath</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =
    <a href="#120612" title="Iterable[scales.xml.package.XmlPath]">xmlPath</a>.<span title="(f: scales.xml.package.XmlPath =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span> <a title="scales.xml.package.XmlPath" id="123363">child</a> =&gt;
      <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#123363" title="scales.xml.package.XmlPath">child</a>.<a href="../../utils/collection/path/Paths.scala.html#46950" title="=&gt; Boolean">isItem</a><span class="delimiter">)</span> <a href="#120611" title="scales.xml.xpath.Axis">axis</a>.<a href="#47160" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#123363" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span> 
      <span class="keyword">else</span> <span class="delimiter">{</span>
	<span class="comment">// child first then its kids</span>
	<a href="#120611" title="scales.xml.xpath.Axis">axis</a>.<a href="#47160" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#123363" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">++</span>
	<a href="#47249" title="(axis: scales.xml.xpath.Axis)(xmlPath: Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]">lazy_recUnpack</a><span class="delimiter">(</span><a href="#120611" title="scales.xml.xpath.Axis">axis</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#123363" title="scales.xml.package.XmlPath">child</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>		       
    <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Base trait for XPath Axis, also provides common functionality
 */</span> 
  <span class="keyword">trait</span> <a title="trait Axis extends java.lang.Object with ScalaObject" id="11576">Axis</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#11577" title="object scales.xml.xpath.Axis">Axis</a>._

    <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="47154">T</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="=&gt; scala.collection.generic.CanBuildFrom[Axis.this.T,scales.xml.package.XmlPath,Axis.this.T]" id="47155">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[Axis.this.T,scales.xml.package.XmlPath,Axis.this.T]">CanBuildFrom</span><span class="delimiter">[</span>T, XmlPath, T<span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="=&gt; scales.xml.xpath.XPathInfo" id="47156">path</a>: <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a>

    <span class="keyword">def</span> <a title="(xpathInfo: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]" id="47157">newThis</a><span class="delimiter">(</span><a title="scales.xml.xpath.XPathInfo" id="119862">xpathInfo</a>: <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a><span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span>

    <span class="keyword">def</span> <a title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]" id="47158">process</a><span class="delimiter">(</span><a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="119837">newNodes</a>: <span title="Iterable[Iterable[scales.xml.package.XmlPath]]">Iterable</span><span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="scales.xml.xpath.XPathInfo" id="119841">info</a> : <a href="#124736" title="scales.xml.xpath.XPathInfo">XPathInfo</a> = <a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="119842">nn</a> =
	<span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123237" title="=&gt; Boolean">eager</a><span class="delimiter">)</span> <span class="delimiter">{</span>
	  <span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#119837" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#119848" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// look first</span>
	    <a href="#119837" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Iterable[Iterable[scales.xml.package.XmlPath]]">filter</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#119852" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> 
	  <span class="keyword">else</span>
	    <a href="#119837" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>
	<span class="delimiter">}</span> <span class="keyword">else</span> <a href="#119837" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Iterable[Iterable[scales.xml.package.XmlPath]]">filter</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#119861" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="comment">// do it anyway</span>

      <a href="#47157" title="(xpathInfo: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">newThis</a><span class="delimiter">(</span><a href="#119841" title="scales.xml.xpath.XPathInfo">info</a>.<a href="#124736" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.xpath.XPathInfo">copy</a><span class="delimiter">(</span> nodes = <a href="#119842" title="Iterable[Iterable[scales.xml.package.XmlPath]]">nn</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.package.XmlPath]" id="47159">empty</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span>
    <span class="keyword">def</span> <a title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]" id="47160">just</a><span class="delimiter">(</span><a title="scales.xml.package.XmlPath" id="120514">only</a>: <a href="../../utils/collection/path/Paths.scala.html#13360" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span>

    <span class="comment">/**
     * x prefixed to avoid disturbing the use of an xpath as an iterable
     */</span> 
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.xpath.XPath[Axis.this.T]" id="47161">xflatMap</a><span class="delimiter">(</span><a title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]]" id="119834">f</a> : Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">)</span> =
      <a href="#47158" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">process</a><span class="delimiter">(</span> <a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">(</span> <a href="#119834" title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">f</a> <span class="delimiter">)</span> <span class="delimiter">)</span>

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]" id="47162">xfilter</a><span class="delimiter">(</span> <a title="Iterable[scales.xml.package.XmlPath] =&gt; Boolean" id="123432">f</a> : Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =&gt; Boolean <span class="delimiter">)</span> = 
      <a href="#47158" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Iterable[Iterable[scales.xml.package.XmlPath]]">filter</span><span class="delimiter">(</span> <a href="#123432" title="Iterable[scales.xml.package.XmlPath] =&gt; Boolean">f</a> <span class="delimiter">)</span> <span class="delimiter">)</span>

    <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(onN: Int =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]" id="47163">xlast</a><span class="delimiter">(</span> <a title="Int =&gt; Boolean" id="123437">onN</a> : Int =&gt; Boolean <span class="delimiter">)</span> : <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47162" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]">xfilter</a><span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123440">x</a> =&gt; <a href="#123437" title="(v1: Int)Boolean">onN</a><span class="delimiter">(</span> <a href="#123440" title="Iterable[scales.xml.package.XmlPath]">x</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> <span class="delimiter">}</span>

    <span class="comment">/**
     * Equivalent to [last() &gt; n]
     */</span> 
    <span class="keyword">def</span> <a title="(n: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]" id="47164">last_&gt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="123442">n</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47163" title="(onN: Int =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]">xlast</a><span class="delimiter">(</span> <a href="#123445" title="Int">_</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#123442" title="=&gt; Int">n</a> <span class="delimiter">)</span>

    <span class="comment">/**
     * Equivalent to [last() &lt; n]
     */</span> 
    <span class="keyword">def</span> <a title="(n: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]" id="47165">last_&lt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="123450">n</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47163" title="(onN: Int =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]">xlast</a><span class="delimiter">(</span> <a href="#123453" title="Int">_</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#123450" title="=&gt; Int">n</a> <span class="delimiter">)</span>

    <span class="comment">/**
     * Equivalent to [last() = n]
     */</span> 
    <span class="keyword">def</span> <a title="(n: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]" id="47166">last_==</a><span class="delimiter">(</span><a title="=&gt; Int" id="123458">n</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47163" title="(onN: Int =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]">xlast</a><span class="delimiter">(</span> <a href="#123461" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <a href="#123458" title="=&gt; Int">n</a> <span class="delimiter">)</span>

    <span class="comment">/**
     * Equivalent to position() = last()
     */</span> 
    <span class="keyword">def</span> <a title="=&gt; scales.xml.xpath.XPath[Axis.this.T]" id="47167">pos_eq_last</a> : <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47176" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])scales.xml.xpath.XPath[Axis.this.T]">xmap</a> <span class="delimiter">{</span> <a href="#123509" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="(xo: Option[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]">lastOption</span> <span class="delimiter">}</span>

    <span class="comment">/**
     * Equivalent to [position() &gt; pos]
     */</span> 
    <span class="keyword">def</span> <a title="(pos: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]" id="47168">pos_&gt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="123515">pos</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47161" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.xpath.XPath[Axis.this.T]">xflatMap</a> <span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123518">path</a> =&gt;
	<span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123519">n</a> = <a href="#123518" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(n: Int)Iterable[scales.xml.package.XmlPath]">drop</span><span class="delimiter">(</span><a href="#123515" title="=&gt; Int">pos</a><span class="delimiter">)</span>
	<span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#123519" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
	  <a href="#47159" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
	<span class="keyword">else</span>
	  <a href="../../utils/package.scala.html#15182" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#123519" title="Iterable[scales.xml.package.XmlPath]">n</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/**
     * Equivalent to [position() &lt; pos]
     */</span> 
    <span class="keyword">def</span> <a title="(pos: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]" id="47169">pos_&lt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="123523">pos</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47161" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.xpath.XPath[Axis.this.T]">xflatMap</a> <span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123526">path</a> =&gt;
	<span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123527">n</a> = <a href="#123526" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(n: Int)Iterable[scales.xml.package.XmlPath]">take</span><span class="delimiter">(</span><a href="#123523" title="=&gt; Int">pos</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#123527" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
	  <a href="#47159" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
	<span class="keyword">else</span>
	  <a href="../../utils/package.scala.html#15182" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#123527" title="Iterable[scales.xml.package.XmlPath]">n</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(p: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]" id="47170">pos_==</a><span class="delimiter">(</span><a title="=&gt; Int" id="123535">p</a>: =&gt; Int<span class="delimiter">)</span> = <a href="#47171" title="(pos: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]">pos</a><span class="delimiter">(</span><a href="#123535" title="=&gt; Int">p</a><span class="delimiter">)</span>

    <span class="comment">/**
     * 1 index based, per spec, but unsure if it should be
     */</span>
    <span class="keyword">def</span> <a title="(pos: =&gt; Int)scales.xml.xpath.XPath[Axis.this.T]" id="47171">pos</a><span class="delimiter">(</span><a title="=&gt; Int" id="123538">pos</a>: =&gt; Int<span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = 
      <a href="#47161" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.xpath.XPath[Axis.this.T]">xflatMap</a> <span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123541">path</a> =&gt;
	<span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123542">n</a> = <a href="#123541" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(n: Int)Iterable[scales.xml.package.XmlPath]">take</span><span class="delimiter">(</span><a href="#123538" title="=&gt; Int">pos</a><span class="delimiter">)</span>
		 
	<span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#123542" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <a href="#123538" title="=&gt; Int">pos</a><span class="delimiter">)</span> 
	  <a href="#47159" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
	<span class="keyword">else</span> 
	  <a href="../../utils/package.scala.html#15182" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#47160" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#123542" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; scales.xml.package.XmlPath">last</span><span class="delimiter">)</span><span class="delimiter">)</span>               
      <span class="delimiter">}</span>

    <span class="comment">/** Parents of these paths */</span>
    <span class="keyword">def</span> <a title="=&gt; scales.xml.xpath.XPath[Axis.this.T]" id="47172">\^</a> : <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <span class="comment">/* must process dups
       * flatten, only each elem should get through anyway
       */</span>
      <a href="#47158" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="123569">path</a> =&gt;
	<a href="#123569" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(f: scales.xml.package.XmlPath =&gt; scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">{</span> <a title="scales.xml.package.XmlPath" id="123586">x</a> =&gt;
          <span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#123586" title="scales.xml.package.XmlPath">x</a>.<a href="../../utils/collection/path/Paths.scala.html#46940" title="=&gt; scales.utils.EitherLike[scales.utils.collection.path.Top[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC],scales.utils.collection.path.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">top</a>.<a href="../../utils/EitherLike.scala.html#45593" title="=&gt; Boolean">isLeft</a><span class="delimiter">)</span> <a href="#47159" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
          <span class="keyword">else</span> <a href="../../utils/package.scala.html#15182" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#47160" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#123586" title="scales.xml.package.XmlPath">x</a>.<a href="../../utils/collection/path/Paths.scala.html#46940" title="=&gt; scales.utils.EitherLike[scales.utils.collection.path.Top[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC],scales.utils.collection.path.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">top</a>.<a href="../../utils/EitherLike.scala.html#45600" title="=&gt; scales.utils.impl.RightLikeProjection[scales.utils.collection.path.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">right</a>.<a href="../../utils/impl/EitherLikeImpl.scala.html#45617" title="=&gt; scales.utils.collection.path.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">get</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>, <a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="124505">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="124500" class="keyword">false</a>, direct = <a title="Boolean(false)" id="124501" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/** simply forwards the current context, element\item specific versions exist that step downwards in document order */</span>
    <span class="keyword">def</span> <a title="=&gt; scales.xml.xpath.XPath[Axis.this.T]" id="47173">\</a> : <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47157" title="(xpathInfo: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">newThis</a><span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="124511">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="124506" class="keyword">false</a>, direct = <a title="Boolean(false)" id="124507" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * all children unpacked, normal xpath requires the context in E1/E2, which hugely complicates things, so \ is this, \+ is \ in the case where unpacking is needed
     * which just leaves \* varieties for elements.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; scales.xml.xpath.XPath[Axis.this.T]" id="47174">\+</a> : <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47158" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],scales.xml.package.XmlPath,Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span>
        <a href="#124530" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="(f: scales.xml.package.XmlPath =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span> <a title="scales.xml.package.XmlPath" id="124547">child</a> =&gt;
          <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#124547" title="scales.xml.package.XmlPath">child</a>.<a href="../../utils/collection/path/Paths.scala.html#46950" title="=&gt; Boolean">isItem</a><span class="delimiter">)</span> <a href="#47160" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#124547" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="../../utils/package.scala.html#15182" title="(i: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">one</a><span class="delimiter">(</span><a href="#124547" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span> <span class="comment">//: Iterable[XmlPath] </span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>, <a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="124600">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="124595" class="keyword">false</a>, direct = <a title="Boolean(false)" id="124596" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * All descendants, uses XPathInfo eager to choose an implementation
     */</span> 
    <span class="keyword">def</span> <a title="=&gt; scales.xml.xpath.XPath[Axis.this.T]" id="47175">\\</a> : <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]" id="124601">f</a> = 
	<span title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123237" title="=&gt; Boolean">eager</a><span class="delimiter">)</span> <a href="#47248" title="(xmlPath: Iterable[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]">eager_recUnpack</a> _
	<span class="keyword">else</span> <a href="#47249" title="(axis: scales.xml.xpath.Axis)(xmlPath: Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]">lazy_recUnpack</a><a href="#124605" title="Iterable[scales.xml.package.XmlPath]" class="delimiter">(</a><a href="#11576" title="scales.xml.xpath.Axis" class="keyword">this</a><span class="delimiter">)</span> _

      <a href="#47158" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">process</a><span class="delimiter">(</span>
        <span class="delimiter">(</span><span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123236" title="=&gt; Boolean">initialNode</a><span class="delimiter">)</span> <a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a> <span class="comment">// crazy initial expression thing 3.2 in http://www.w3.org/TR/xpath20/#id-path-expressions</span>
        <span class="keyword">else</span> List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="(that: scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">++</span> <a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span> <a href="#124601" title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]">f</a> <span class="delimiter">}</span>,
	 <a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="124700">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="124695" class="keyword">false</a>, direct = <a title="Boolean(false)" id="124696" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])scales.xml.xpath.XPath[Axis.this.T]" id="47176">xmap</a><span class="delimiter">(</span> <a title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]" id="123468">f</a> : Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> <span class="delimiter">)</span> =
      <a href="#47158" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.xpath.XPathInfo)scales.xml.xpath.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#47156" title="=&gt; scales.xml.xpath.XPathInfo">path</a>.<a href="#123233" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">{</span> <a href="#123468" title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]">f</a> <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="comment">/** filter through the current matches */</span>
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(pred: scales.xml.package.XmlPath =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]" id="47177">filter</a><span class="delimiter">(</span><a title="scales.xml.package.XmlPath =&gt; Boolean" id="120426">pred</a>: XmlPath =&gt; Boolean<span class="delimiter">)</span>: <a href="#11888" title="scales.xml.xpath.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#47176" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])scales.xml.xpath.XPath[Axis.this.T]">xmap</a><span class="delimiter">{</span> <a href="#124702" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="(p: scales.xml.package.XmlPath =&gt; Boolean)Iterable[scales.xml.package.XmlPath]">filter</span><span class="delimiter">(</span><a href="#120426" title="scales.xml.package.XmlPath =&gt; Boolean">pred</a><span class="delimiter">)</span> <span class="delimiter">}</span>

    <span class="comment">/**
     * simple test for string equality
     */</span> 
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(textValue: =&gt; String)scales.xml.xpath.XPath[Axis.this.T]" id="47178">===</a><span class="delimiter">(</span> <a title="=&gt; String" id="124705">textValue</a> : =&gt; String <span class="delimiter">)</span> = 
      <a href="#47177" title="(pred: scales.xml.package.XmlPath =&gt; Boolean)scales.xml.xpath.XPath[Axis.this.T]">filter</a><span class="delimiter">(</span><a title="scales.xml.package.XmlPath" id="124709">x</a> =&gt; <a href="Functions.scala.html#11871" title="object scales.xml.xpath.XmlPathText">XmlPathText</a>.<a href="Functions.scala.html#47386" title="(implicit t: scales.xml.package.XmlPath)String">text</a><span class="delimiter">(</span><a href="#124709" title="scales.xml.package.XmlPath">x</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#124705" title="=&gt; String">textValue</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

        </pre>
    </body>
</html>