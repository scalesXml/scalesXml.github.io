<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\utils\iteratee\Iteratees.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.utils.iteratee

<span class="keyword">import</span> scalaz.<span class="delimiter">{</span>IterV, Enumerator, Input, EphemeralStream<span class="delimiter">}</span>
<span class="keyword">import</span> scalaz.<span title="scalaz.IterV.type">IterV</span>._

<span class="keyword">import</span> scales.utils.ScalesUtils
<span class="keyword">import</span> scales.utils.io

<span class="comment">/**
 * Evals once, the developer must check its Done, equivalent to a .run but
 * doesn't lose the continuation - no &quot;Diverging Iteratee&quot;
 */</span>
<span class="keyword">trait</span> <a title="trait Eval[WHAT, RETURN] extends AnyRef" id="scales.utils.iteratee;Eval">Eval</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Eval;WHAT">WHAT</a>,<a title="" id="scales.utils.iteratee;Eval;RETURN">RETURN</a><span class="delimiter">]</span> <span title="Unit" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="=&gt; scalaz.IterV[WHAT,RETURN]" id="scales.utils.iteratee;Eval.orig">orig</a> : <span title="scalaz.IterV[WHAT,RETURN]">IterV</span><span class="delimiter">[</span>WHAT, RETURN<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; scalaz.IterV[WHAT,RETURN]" id="scales.utils.iteratee;Eval.eval">eval</a> : <span title="scalaz.IterV[WHAT,RETURN]">IterV</span><span class="delimiter">[</span>WHAT, RETURN<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#scales.utils.iteratee;Eval.orig" title="=&gt; scalaz.IterV[WHAT,RETURN]">orig</a>.<span title="(done: (=&gt; RETURN, =&gt; scalaz.Input[WHAT]) =&gt; scalaz.IterV[WHAT,RETURN], cont: (scalaz.Input[WHAT] =&gt; scalaz.IterV[WHAT,RETURN]) =&gt; scalaz.IterV[WHAT,RETURN])scalaz.IterV[WHAT,RETURN]">fold</span><span class="delimiter">(</span>done = <span class="delimiter">(</span><a title="=&gt; RETURN" id="scales.utils.iteratee;Eval.eval.$anonfun.x">x</a>, <a title="=&gt; scalaz.Input[WHAT]" id="scales.utils.iteratee;Eval.eval.$anonfun.y">y</a><span title="=&gt; scalaz.Input[WHAT]" class="delimiter">)</span> =&gt; <span title="(a: =&gt; RETURN, i: =&gt; scalaz.Input[WHAT])scalaz.IterV[WHAT,RETURN]">Done</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Eval.eval.$anonfun.x" title="=&gt; RETURN">x</a>,<a href="#scales.utils.iteratee;Eval.eval.$anonfun.y" title="=&gt; scalaz.Input[WHAT]">y</a><span class="delimiter">)</span>,
	 cont = <a title="scalaz.Input[WHAT] =&gt; scalaz.IterV[WHAT,RETURN]" id="scales.utils.iteratee;Eval.eval.$anonfun.k">k</a> =&gt; <a href="#scales.utils.iteratee;Eval.eval.$anonfun.k" title="(v1: scalaz.Input[WHAT])scalaz.IterV[WHAT,RETURN]">k</a><span class="delimiter">(</span><span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[WHAT]" class="delimiter">[</span><a href="#scales.utils.iteratee;Eval;WHAT" title="WHAT">WHAT</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait IterateeImplicits extends AnyRef" id="scales.utils.iteratee;IterateeImplicits">IterateeImplicits</a> <span title="Unit" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[WHAT, RETURN](i: scalaz.IterV[WHAT,RETURN])scales.utils.iteratee.Eval[WHAT,RETURN]" id="scales.utils.iteratee;IterateeImplicits.toEval">toEval</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;IterateeImplicits.toEval;WHAT">WHAT</a>, <a title="" id="scales.utils.iteratee;IterateeImplicits.toEval;RETURN">RETURN</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="scalaz.IterV[WHAT,RETURN]" id="scales.utils.iteratee;IterateeImplicits.toEval.i">i</a> : <span title="scalaz.IterV[WHAT,RETURN]">IterV</span><span class="delimiter">[</span>WHAT, RETURN<span class="delimiter">]</span> <span class="delimiter">)</span> = <a href="#scales.utils.iteratee;IterateeImplicits.toEval;$anon" title="scales.utils.iteratee.Eval[WHAT,RETURN]{}" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with scales.utils.iteratee.Eval[WHAT,RETURN]" id="scales.utils.iteratee;IterateeImplicits.toEval;$anon">Eval</a><span class="delimiter">[</span>WHAT, RETURN<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scalaz.IterV[WHAT,RETURN]" id="scales.utils.iteratee;IterateeImplicits.toEval;$anon.orig">orig</a> = <a href="#scales.utils.iteratee;IterateeImplicits.toEval.i" title="scalaz.IterV[WHAT,RETURN]">i</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Taken from huynhjl's answer on StackOverflow, just abstracting the type to allow for better implicit inference
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="iteratorEnumerator extends Object with scalaz.Enumerator[Iterator]" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator">iteratorEnumerator</a> = <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon" title="scalaz.Enumerator[Iterator]" class="keyword">new</a> <a title="anonymous class $anon extends Object with scalaz.Enumerator[Iterator]" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon">Enumerator</a><span class="delimiter">[</span>Iterator<span class="delimiter">]</span> <span class="delimiter">{</span>
    @annotation.tailrec
    <span class="keyword">def</span> <a title="[E, A](iter: Iterator[E], i: scalaz.IterV[E,A])scalaz.IterV[E,A]" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply">apply</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply;E">E</a>,<a title="" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterator[E]" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.iter">iter</a>: <span title="Iterator[E]">Iterator</span><span class="delimiter">[</span>E<span class="delimiter">]</span>, <a title="scalaz.IterV[E,A]" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.i">i</a>: <span title="scalaz.IterV[E,A]">IterV</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.IterV[E,A]">IterV</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> = <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.i" title="scalaz.IterV[E,A]">i</a> <span title="scalaz.IterV[E,A]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> _ <span class="keyword">if</span> <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.iter" title="Iterator[E]">iter</a>.<span title="=&gt; Boolean">isEmpty</span> =&gt; <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.i" title="scalaz.IterV[E,A]">i</a>
      <span class="keyword">case</span> <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.<unapply-selector>" title="(r: scalaz.IterV[E,A])Option[(A, scalaz.Input[E])]">Done</a><span class="delimiter">(</span><a title="A" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.acc">acc</a>, <a title="scalaz.Input[E]" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.input">input</a><span class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.i" title="scalaz.IterV[E,A]">i</a>
      <span class="keyword">case</span> <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.<unapply-selector>" title="(r: scalaz.IterV[E,A])Option[scalaz.Input[E] =&gt; scalaz.IterV[E,A]]">Cont</a><span class="delimiter">(</span><a title="scalaz.Input[E] =&gt; scalaz.IterV[E,A]" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.k">k</a><span class="delimiter">)</span> =&gt;
	<span class="keyword">val</span> <a title="E" id="scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.x">x</a> : <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply;E" title="E">E</a> = <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.iter" title="Iterator[E]">iter</a>.<span title="()E">next</span><span class="comment">//.asInstanceOf[E]</span>
      <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply" title="(iter: Iterator[E], i: scalaz.IterV[E,A])scalaz.IterV[E,A]">apply</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.iter" title="Iterator[E]">iter</a>, <a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.k" title="(v1: scalaz.Input[E])scalaz.IterV[E,A]">k</a><span class="delimiter">(</span><span title="(e0: =&gt; E)scalaz.Input[E]">El</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;IterateeImplicits.iteratorEnumerator;$anon.apply.x" title="E">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Collection of iterateees
 */</span>
<span title="AnyRef" class="keyword">trait</span> <a title="trait Iteratees extends AnyRef" id="scales.utils.iteratee;Iteratees">Iteratees</a> <span title="Unit" class="delimiter">{</span>

  <span class="comment">/** drop while iteratee */</span>
  <span class="keyword">def</span> <a title="[E](f: E =&gt; Boolean)scalaz.IterV[E,Option[E]]" id="scales.utils.iteratee;Iteratees.dropWhile">dropWhile</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.dropWhile;E">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="E =&gt; Boolean" id="scales.utils.iteratee;Iteratees.dropWhile.f">f</a>: <span class="delimiter">(</span>E<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">)</span> : <span title="scalaz.IterV[E,Option[E]]">IterV</span><span class="delimiter">[</span>E, Option<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: scalaz.Input[E])scalaz.IterV[E,Option[E]]" id="scales.utils.iteratee;Iteratees.dropWhile.step">step</a><span class="delimiter">(</span><a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.dropWhile.step.s">s</a>: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.IterV[E,Option[E]]">IterV</span><span class="delimiter">[</span>E, Option<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.dropWhile.step.s" title="(empty: =&gt; scalaz.IterV[E,Option[E]], el: (=&gt; E) =&gt; scalaz.IterV[E,Option[E]], eof: =&gt; scalaz.IterV[E,Option[E]])scalaz.IterV[E,Option[E]]">s</a><span class="delimiter">(</span>el = <a title="=&gt; E" id="scales.utils.iteratee;Iteratees.dropWhile.step.x$10.$anonfun.e">e</a> =&gt; <span class="delimiter">{</span>
	<span title="scalaz.IterV[E,Option[E]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.dropWhile.f" title="(v1: E)Boolean">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.dropWhile.step.x$10.$anonfun.e" title="=&gt; E">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
	  <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,Option[E]])scalaz.IterV[E,Option[E]]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.dropWhile.step" title="(s: scalaz.Input[E])scalaz.IterV[E,Option[E]]">step</a><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <span title="(a: =&gt; Option[E], i: =&gt; scalaz.Input[E])scalaz.IterV[E,Option[E]]">Done</span><span class="delimiter">(</span><span title="(x: E)Some[E]">Some</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.dropWhile.step.x$10.$anonfun.e" title="=&gt; E">e</a><span class="delimiter">)</span>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.dropWhile;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>,
        empty = <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,Option[E]])scalaz.IterV[E,Option[E]]">Cont</span><a title="() =&gt; scalaz.IterV[E,Option[E]]" id="scales.utils.iteratee;Iteratees.dropWhile.step.x$11" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.dropWhile.step" title="(s: scalaz.Input[E])scalaz.IterV[E,Option[E]]">step</a><span class="delimiter">)</span>,
        eof = <span title="(a: =&gt; Option[E], i: =&gt; scalaz.Input[E])scalaz.IterV[E,Option[E]]">Done</span><a title="() =&gt; scalaz.IterV[E,Option[E]]" id="scales.utils.iteratee;Iteratees.dropWhile.step.x$12" class="delimiter">(</a><span title="None.type">None</span>, <span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.dropWhile;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,Option[E]])scalaz.IterV[E,Option[E]]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.dropWhile.step" title="(s: scalaz.Input[E])scalaz.IterV[E,Option[E]]">step</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** &quot;find&quot; iteratee, finds Some(first) or None */</span>
  <span class="keyword">def</span> <a title="[E](f: E =&gt; Boolean)scalaz.IterV[E,Option[E]]" id="scales.utils.iteratee;Iteratees.find">find</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.find;E">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="E =&gt; Boolean" id="scales.utils.iteratee;Iteratees.find.f">f</a>: <span class="delimiter">(</span>E<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">)</span> : <span title="scalaz.IterV[E,Option[E]]">IterV</span><span class="delimiter">[</span>E, Option<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#scales.utils.iteratee;Iteratees.dropWhile" title="(f: E =&gt; Boolean)scalaz.IterV[E,Option[E]]">dropWhile</a><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.find.f" title="(v1: E)Boolean">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.find.$anonfun.x$1" title="E">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** filter iteratee, greedily taking all content until eof */</span>
  <span class="keyword">def</span> <a title="[E](f: E =&gt; Boolean)scalaz.IterV[E,Iterable[E]]" id="scales.utils.iteratee;Iteratees.filter">filter</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.filter;E">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="E =&gt; Boolean" id="scales.utils.iteratee;Iteratees.filter.f">f</a>: <span class="delimiter">(</span>E<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">)</span> : <span title="scalaz.IterV[E,Iterable[E]]">IterV</span><span class="delimiter">[</span>E, Iterable<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(l: List[E])(s: scalaz.Input[E])scalaz.IterV[E,Iterable[E]]" id="scales.utils.iteratee;Iteratees.filter.step">step</a><span class="delimiter">(</span><a title="List[E]" id="scales.utils.iteratee;Iteratees.filter.step.l">l</a> : <span title="List[E]">List</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.filter.step.s">s</a>: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.IterV[E,Iterable[E]]">IterV</span><span class="delimiter">[</span>E, Iterable<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.filter.step.s" title="(empty: =&gt; scalaz.IterV[E,Iterable[E]], el: (=&gt; E) =&gt; scalaz.IterV[E,Iterable[E]], eof: =&gt; scalaz.IterV[E,Iterable[E]])scalaz.IterV[E,Iterable[E]]">s</a><span class="delimiter">(</span>el = <a title="=&gt; E" id="scales.utils.iteratee;Iteratees.filter.step.x$13.$anonfun.e">e</a> =&gt; <span class="delimiter">{</span>
	<span title="scalaz.IterV[E,Iterable[E]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.filter.f" title="(v1: E)Boolean">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.filter.step.x$13.$anonfun.e" title="=&gt; E">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
	  <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,Iterable[E]])scalaz.IterV[E,Iterable[E]]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.filter.step" title="(l: List[E])(s: scalaz.Input[E])scalaz.IterV[E,Iterable[E]]">step</a><a href="#scales.utils.iteratee;Iteratees.filter.step.x$13.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.filter.step.l" title="List[E]">l</a> <a href="#scales.utils.iteratee;Iteratees.filter.step.x$13.$anonfun.eta$0$1" title="(elem: E)(implicit bf: scala.collection.generic.CanBuildFrom[List[E],E,List[E]])List[E]">:+</a> <a href="#scales.utils.iteratee;Iteratees.filter.step.x$13.$anonfun.e" title="=&gt; E">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,Iterable[E]])scalaz.IterV[E,Iterable[E]]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.filter.step" title="(l: List[E])(s: scalaz.Input[E])scalaz.IterV[E,Iterable[E]]">step</a><a href="#scales.utils.iteratee;Iteratees.filter.step.x$13.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.filter.step.l" title="List[E]">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>,
        empty = <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,Iterable[E]])scalaz.IterV[E,Iterable[E]]">Cont</span><a title="() =&gt; scalaz.IterV[E,Iterable[E]]" id="scales.utils.iteratee;Iteratees.filter.step.x$14" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.filter.step" title="(l: List[E])(s: scalaz.Input[E])scalaz.IterV[E,Iterable[E]]">step</a><a href="#scales.utils.iteratee;Iteratees.filter.step.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.filter.step.l" title="List[E]">l</a><span class="delimiter">)</span><span class="delimiter">)</span>,
        eof = <span title="(a: =&gt; Iterable[E], i: =&gt; scalaz.Input[E])scalaz.IterV[E,Iterable[E]]">Done</span><a title="() =&gt; scalaz.IterV[E,Iterable[E]]" id="scales.utils.iteratee;Iteratees.filter.step.x$15" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.filter.step.l" title="List[E]">l</a>, <span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.filter;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,Iterable[E]])scalaz.IterV[E,Iterable[E]]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.filter.step" title="(l: List[E])(s: scalaz.Input[E])scalaz.IterV[E,Iterable[E]]">step</a><a href="#scales.utils.iteratee;Iteratees.filter.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">type</span> <a title="[E, A]scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees;ResumableIterList">ResumableIterList</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees;ResumableIterList;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees;ResumableIterList;A">A</a><span class="delimiter">]</span> = <span title="scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">IterV</span><span class="delimiter">[</span>E, <span class="delimiter">(</span>Iterable<span class="delimiter">[</span>A<span class="delimiter">]</span>,IterV<span class="delimiter">[</span>E,_<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="[E, A]scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees;ResumableIter">ResumableIter</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees;ResumableIter;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees;ResumableIter;A">A</a><span class="delimiter">]</span> = <span title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">IterV</span><span class="delimiter">[</span>E, <span class="delimiter">(</span>A, IterV<span class="delimiter">[</span>E,_<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Extract the continuation from a Done
   */</span>
  <span class="keyword">def</span> <a title="[E, A](iter: Iteratees.this.ResumableIter[E,A])Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.extractCont">extractCont</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.extractCont;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.extractCont;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.extractCont.iter">iter</a> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E, A<span class="delimiter">]</span> <span class="delimiter">)</span> =
    <a href="#scales.utils.iteratee;Iteratees.extractCont.iter" title="Iteratees.this.ResumableIter[E,A]">iter</a>.<span title="[Z](done: (=&gt; (A, scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; Z, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]) =&gt; Z)Z">fold</span><span title="(done: (=&gt; (A, scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; Iteratees.this.ResumableIter[E,A], cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]) =&gt; Iteratees.this.ResumableIter[E,A])Iteratees.this.ResumableIter[E,A]" class="delimiter">[</span><span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span>
      done = <span class="delimiter">(</span><a title="=&gt; (A, scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.extractCont.$anonfun.x">x</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.extractCont.$anonfun.i">i</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt;
	<a href="#scales.utils.iteratee;Iteratees.extractCont.$anonfun.x" title="=&gt; (A, scalaz.IterV[E, _])">x</a>.<span title="=&gt; scalaz.IterV[E, _]">_2</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iteratees.this.ResumableIter[E,A]" class="delimiter">[</span><span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">]</span>,
      cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.extractCont.$anonfun.f">f</a> =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Was not done&quot;)" class="string">&quot;Was not done&quot;</span><span class="delimiter">)</span> <span class="delimiter">)</span>

  <span class="comment">/**
   * Extract the Some(value) from a Done or None if it was not Done.
   */</span>
  <span class="keyword">def</span> <a title="[E, A](iter: Iteratees.this.ResumableIter[E,A])Option[A]" id="scales.utils.iteratee;Iteratees.extract">extract</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.extract;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.extract;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.extract.iter">iter</a> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E, A<span class="delimiter">]</span> <span class="delimiter">)</span> =
    <a href="#scales.utils.iteratee;Iteratees.extract.iter" title="Iteratees.this.ResumableIter[E,A]">iter</a>.<span title="[Z](done: (=&gt; (A, scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; Z, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]) =&gt; Z)Z">fold</span><span title="(done: (=&gt; (A, scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; Option[A], cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]) =&gt; Option[A])Option[A]" class="delimiter">[</span><span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span>
      done = <span class="delimiter">(</span><a title="=&gt; (A, scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.extract.$anonfun.x">x</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.extract.$anonfun.i">i</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt;
	<span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.extract.$anonfun.x" title="=&gt; (A, scalaz.IterV[E, _])">x</a>.<span title="=&gt; A">_1</span><span class="delimiter">)</span>,
      cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.extract.$anonfun.f">f</a> =&gt; <span title="None.type">None</span> <span class="delimiter">)</span>

  <span class="comment">/**
   * Helper to identify dones
   */</span>
  <span class="keyword">def</span> <a title="[E, A](iter: scalaz.IterV[E,A])Boolean" id="scales.utils.iteratee;Iteratees.isDone">isDone</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.isDone;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.isDone;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.isDone.iter">iter</a> : <span title="scalaz.IterV[E,A]">IterV</span><span class="delimiter">[</span>E, A<span class="delimiter">]</span> <span class="delimiter">)</span> =
    <a href="#scales.utils.iteratee;Iteratees.isDone.iter" title="scalaz.IterV[E,A]">iter</a>.<span title="[Z](done: (=&gt; A, =&gt; scalaz.Input[E]) =&gt; Z, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,A]) =&gt; Z)Z">fold</span><span title="(done: (=&gt; A, =&gt; scalaz.Input[E]) =&gt; Boolean, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,A]) =&gt; Boolean)Boolean" class="delimiter">[</span><span title="Boolean">Boolean</span><span class="delimiter">]</span><span class="delimiter">(</span>
      done = <span class="delimiter">(</span><a title="=&gt; A" id="scales.utils.iteratee;Iteratees.isDone.$anonfun.a">a</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.isDone.$anonfun.i">i</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>,
      cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.isDone.$anonfun.f">f</a> =&gt; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">)</span>

  <span class="comment">/**
   * Helper for done and empty
   */</span>
  <span class="keyword">def</span> <a title="[E, A](iter: scalaz.IterV[E,A])Boolean" id="scales.utils.iteratee;Iteratees.isEmpty">isEmpty</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.isEmpty;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.isEmpty;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.isEmpty.iter">iter</a> : <span title="scalaz.IterV[E,A]">IterV</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> <span class="delimiter">)</span> =
    <a href="#scales.utils.iteratee;Iteratees.isEmpty.iter" title="scalaz.IterV[E,A]">iter</a>.<span title="[Z](done: (=&gt; A, =&gt; scalaz.Input[E]) =&gt; Z, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,A]) =&gt; Z)Z">fold</span><span title="(done: (=&gt; A, =&gt; scalaz.Input[E]) =&gt; Boolean, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,A]) =&gt; Boolean)Boolean" class="delimiter">[</span><span title="Boolean">Boolean</span><span class="delimiter">]</span><span class="delimiter">(</span>
      done = <span class="delimiter">(</span><a title="=&gt; A" id="scales.utils.iteratee;Iteratees.isEmpty.$anonfun.a">a</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.isEmpty.$anonfun.i">i</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt; <span title="scalaz.IterV.type">IterV</span>.<span title="scalaz.IterV.Empty.type">Empty</span>.<span title="[E](r: scalaz.Input[E])Boolean">unapply</span><span title="(r: scalaz.Input[E])Boolean" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.isEmpty;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.isEmpty.$anonfun.i" title="=&gt; scalaz.Input[E]">i</a><span class="delimiter">)</span>,
      cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.isEmpty.$anonfun.f">f</a> =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Iteratee is not Done&quot;)" class="string">&quot;Iteratee is not Done&quot;</span><span class="delimiter">)</span> <span class="delimiter">)</span>

  <span class="comment">/**
   * Helper for done and eof
   */</span>
  <span class="keyword">def</span> <a title="[E, A](iter: scalaz.IterV[E,A])Boolean" id="scales.utils.iteratee;Iteratees.isEOF">isEOF</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.isEOF;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.isEOF;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.isEOF.iter">iter</a> : <span title="scalaz.IterV[E,A]">IterV</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> <span class="delimiter">)</span> =
    <a href="#scales.utils.iteratee;Iteratees.isEOF.iter" title="scalaz.IterV[E,A]">iter</a>.<span title="[Z](done: (=&gt; A, =&gt; scalaz.Input[E]) =&gt; Z, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,A]) =&gt; Z)Z">fold</span><span title="(done: (=&gt; A, =&gt; scalaz.Input[E]) =&gt; Boolean, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,A]) =&gt; Boolean)Boolean" class="delimiter">[</span><span title="Boolean">Boolean</span><span class="delimiter">]</span><span class="delimiter">(</span>
      done = <span class="delimiter">(</span><a title="=&gt; A" id="scales.utils.iteratee;Iteratees.isEOF.$anonfun.a">a</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.isEOF.$anonfun.i">i</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt; <span title="scalaz.IterV.EOF.type">EOF</span>.<span title="[E](r: scalaz.Input[E])Boolean">unapply</span><span title="(r: scalaz.Input[E])Boolean" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.isEOF;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.isEOF.$anonfun.i" title="=&gt; scalaz.Input[E]">i</a><span class="delimiter">)</span>,
      cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.isEOF.$anonfun.f">f</a> =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Iteratee is not Done&quot;)" class="string">&quot;Iteratee is not Done&quot;</span><span class="delimiter">)</span> <span class="delimiter">)</span>

  <span class="comment">/**
   * Converts a normal IterV[E,A] to a ResumableIter.
   *
   * Does so by folding over the iter once for an input
   * and when its Done starting again
   * with the original iter.  This is close to restarting the iter on
   * a new &quot;stream&quot;, otherwise all attempts to keep the Cont will be made.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[E, A](oiter: scalaz.IterV[E,A])Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.toResumableIter">toResumableIter</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.toResumableIter;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.toResumableIter;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.toResumableIter.oiter">oiter</a> : <span title="scalaz.IterV[E,A]">IterV</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(iter: scalaz.IterV[E,A])(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.toResumableIter.step">step</a><span class="delimiter">(</span><a title="scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.toResumableIter.step.iter">iter</a> : <span title="scalaz.IterV[E,A]">IterV</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span> <a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.toResumableIter.step.s">s</a> : <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E, A<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalaz.IterV[E, _ &gt;: (A, scalaz.IterV[E,(A, scalaz.IterV[E, _])]) &lt;: (A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.toResumableIter.step.next">next</a> = <a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.iter" title="scalaz.IterV[E,A]">iter</a> <span title="scalaz.IterV[E,_13]" class="keyword">match</span> <span class="delimiter">{</span><span class="comment">// need to evaluate s in the case of done....</span>
	  <span class="keyword">case</span> <a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.<unapply-selector>" title="(r: scalaz.IterV[E,A])Option[(A, scalaz.Input[E])]">Done</a><span class="delimiter">(</span><span title="A">x</span>, <span title="scalaz.Input[E]">y</span><span class="delimiter">)</span> =&gt; <span title="(a: =&gt; (A, scalaz.IterV[E,(A, scalaz.IterV[E, _])]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(A, scalaz.IterV[E,(A, scalaz.IterV[E, _])])]">Done</span><span class="delimiter">(</span><span title="(_1: A, _2: scalaz.IterV[E,(A, scalaz.IterV[E, _])])(A, scalaz.IterV[E,(A, scalaz.IterV[E, _])])" class="delimiter">(</span><span title="A">x</span>, <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step" title="(iter: scalaz.IterV[E,A])(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.toResumableIter.oiter" title="scalaz.IterV[E,A]">oiter</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,<span title="scalaz.Input[E]">y</span><span class="delimiter">)</span>
	  <span class="keyword">case</span> <a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.<unapply-selector>" title="(r: scalaz.IterV[E,A])Option[scalaz.Input[E] =&gt; scalaz.IterV[E,A]]">Cont</a><span class="delimiter">(</span><a title="scalaz.Input[E] =&gt; scalaz.IterV[E,A]" id="scales.utils.iteratee;Iteratees.toResumableIter.step.next.k">k</a><span class="delimiter">)</span> =&gt;
	    <span class="delimiter">{</span>
	      <a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.k" title="(v1: scalaz.Input[E])scalaz.IterV[E,A]">k</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.s" title="scalaz.Input[E]">s</a><span class="delimiter">)</span> <span title="scalaz.IterV[E,_13]" class="keyword">match</span> <span class="delimiter">{</span>
		<span class="keyword">case</span> <span title="scalaz.IterV[E,A]">i</span>@<a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.<unapply-selector>" title="(r: scalaz.IterV[E,A])Option[(A, scalaz.Input[E])]">Done</a><span class="delimiter">(</span><span title="A">x</span>, <span title="scalaz.Input[E]">y</span><span class="delimiter">)</span> =&gt; <span title="(a: =&gt; (A, scalaz.IterV[E,(A, scalaz.IterV[E, _])]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(A, scalaz.IterV[E,(A, scalaz.IterV[E, _])])]">Done</span><span class="delimiter">(</span><span title="(_1: A, _2: scalaz.IterV[E,(A, scalaz.IterV[E, _])])(A, scalaz.IterV[E,(A, scalaz.IterV[E, _])])" class="delimiter">(</span><span title="A">x</span>, <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step" title="(iter: scalaz.IterV[E,A])(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.toResumableIter.oiter" title="scalaz.IterV[E,A]">oiter</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,<span title="scalaz.Input[E]">y</span><span class="delimiter">)</span>
		<span class="keyword">case</span> <span title="scalaz.IterV[E,A]">i</span>@<a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.<unapply-selector>" title="(r: scalaz.IterV[E,A])Option[scalaz.Input[E] =&gt; scalaz.IterV[E,A]]">Cont</a><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step" title="(iter: scalaz.IterV[E,A])(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><span title="scalaz.IterV[E,A]">i</span><span class="delimiter">)</span><span class="delimiter">)</span>
	      <span class="delimiter">}</span>
	    <span class="delimiter">}</span>
	<span class="delimiter">}</span>
      <a href="#scales.utils.iteratee;Iteratees.toResumableIter.step.next" title="scalaz.IterV[E, _ &gt;: (A, scalaz.IterV[E,(A, scalaz.IterV[E, _])]) &lt;: (A, scalaz.IterV[E, _])]">next</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iteratees.this.ResumableIter[E,A]" class="delimiter">[</span><span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="delimiter">}</span>

    <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.toResumableIter.step" title="(iter: scalaz.IterV[E,A])(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.toResumableIter.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.toResumableIter.oiter" title="scalaz.IterV[E,A]">oiter</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Stepwise fold, each element is evaluated but each one is returned as a result+resumable iter.
   */</span>
  <span class="keyword">def</span> <a title="[E, A](f: (E, A) =&gt; A)(init: A)Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.foldI">foldI</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.foldI;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.foldI;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="(E, A) =&gt; A" id="scales.utils.iteratee;Iteratees.foldI.f">f</a> : <span class="delimiter">(</span>E,A<span class="delimiter">)</span> =&gt; A <span class="delimiter">)</span><span class="delimiter">(</span> <a title="A" id="scales.utils.iteratee;Iteratees.foldI.init">init</a> : <a href="#scales.utils.iteratee;Iteratees.foldI;A" title="A">A</a> <span class="delimiter">)</span> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(current: A)(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.foldI.step">step</a><span class="delimiter">(</span> <a title="A" id="scales.utils.iteratee;Iteratees.foldI.step.current">current</a> : <a href="#scales.utils.iteratee;Iteratees.foldI;A" title="A">A</a> <span class="delimiter">)</span><span class="delimiter">(</span> <a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.foldI.step.s">s</a> : <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.foldI.step.s" title="(empty: =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])], el: (=&gt; E) =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])], eof: =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">s</a><span class="delimiter">(</span>el = <span class="delimiter">{</span><a title="=&gt; E" id="scales.utils.iteratee;Iteratees.foldI.step.x$16.$anonfun.e">e</a> =&gt;
	<span class="keyword">val</span> <a title="A" id="scales.utils.iteratee;Iteratees.foldI.step.x$16.$anonfun.next">next</a> = <a href="#scales.utils.iteratee;Iteratees.foldI.f" title="(v1: E, v2: A)A">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldI.step.x$16.$anonfun.e" title="=&gt; E">e</a>,<a href="#scales.utils.iteratee;Iteratees.foldI.step.current" title="A">current</a><span class="delimiter">)</span>
	<span title="(a: =&gt; (A, scalaz.IterV[E, _]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Done</span><span class="delimiter">(</span><span title="(_1: A, _2: scalaz.IterV[E,(A, scalaz.IterV[E, _])])(A, scalaz.IterV[E,(A, scalaz.IterV[E, _])])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldI.step.x$16.$anonfun.next" title="A">next</a>, <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldI.step" title="(current: A)(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.foldI.step.x$16.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldI.step.x$16.$anonfun.next" title="A">next</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.foldI;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">}</span>,
        empty = <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><a title="() =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.foldI.step.x$17" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldI.step" title="(current: A)(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.foldI.step.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldI.step.current" title="A">current</a><span class="delimiter">)</span><span class="delimiter">)</span>,
        eof = <span title="(a: =&gt; (A, scalaz.IterV[E, _]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Done</span><a title="() =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.foldI.step.x$18" class="delimiter">(</a><span title="(_1: A, _2: scalaz.IterV[E,(A, scalaz.IterV[E, _])])(A, scalaz.IterV[E,(A, scalaz.IterV[E, _])])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldI.step.current" title="A">current</a>, <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldI.step" title="(current: A)(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.foldI.step.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldI.init" title="A">init</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,<span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.foldI;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldI.step" title="(current: A)(s: scalaz.Input[E])Iteratees.this.ResumableIter[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.foldI.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldI.init" title="A">init</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Folds over the Iteratee with Cont or Done and Empty, returning with Done and EOF.
   * If there is a ping pong on enumerator -&gt; Cont -&gt; enumerator then we'll of course get an infinite loop.
   *
   * foldI returns a ResumableIter that performs a fold until a done, this folds over the enumerator to return a value.
   *
   * combine with onDone to get through chunks of data.
   */</span>
  <span class="keyword">def</span> <a title="[E, A, ACC, F[_]](it: F[E])(initAcc: ACC, initResumable: Iteratees.this.ResumableIter[E,A])(f: (ACC, A) =&gt; ACC)(implicit e: scalaz.Enumerator[F])ACC" id="scales.utils.iteratee;Iteratees.foldOnDone">foldOnDone</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.foldOnDone;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.foldOnDone;A">A</a>, <a title="" id="scales.utils.iteratee;Iteratees.foldOnDone;ACC">ACC</a>, <a title="[_]" id="scales.utils.iteratee;Iteratees.foldOnDone;F">F</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.foldOnDone;F;_">_</a><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span> <a title="F[E]" id="scales.utils.iteratee;Iteratees.foldOnDone.it">it</a> : <a href="#scales.utils.iteratee;Iteratees.foldOnDone;F" title="F[E]">F</a><span class="delimiter">[</span>E<span class="delimiter">]</span> <span class="delimiter">)</span><span class="delimiter">(</span> <a title="ACC" id="scales.utils.iteratee;Iteratees.foldOnDone.initAcc">initAcc</a> : <a href="#scales.utils.iteratee;Iteratees.foldOnDone;ACC" title="ACC">ACC</a>, <a title="Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.foldOnDone.initResumable">initResumable</a> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> <span class="delimiter">)</span><span class="delimiter">(</span> <a title="(ACC, A) =&gt; ACC" id="scales.utils.iteratee;Iteratees.foldOnDone.f">f</a> : <span class="delimiter">(</span>ACC, A<span class="delimiter">)</span> =&gt; ACC <span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Enumerator[F]" id="scales.utils.iteratee;Iteratees.foldOnDone.e">e</a> : <span title="scalaz.Enumerator[F]">Enumerator</span><span class="delimiter">[</span>F<span class="delimiter">]</span> <span class="delimiter">)</span> : <a href="#scales.utils.iteratee;Iteratees.foldOnDone;ACC" title="ACC">ACC</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="../ScalesUtils.scala.html#scales.utils.ScalesUtils" title="scales.utils.ScalesUtils.type">ScalesUtils</a>._

    <span class="keyword">var</span> <a title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.foldOnDone.currentI">currentI</a> = <a href="#scales.utils.iteratee;Iteratees.foldOnDone.initResumable" title="(f: F[E])(implicit e: scalaz.Enumerator[F])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">initResumable</a><a href="#scales.utils.iteratee;IterateeImplicits.toEval" title="(i: scalaz.IterV[E,(A, scalaz.IterV[E, _])])scales.utils.iteratee.Eval[E,(A, scalaz.IterV[E, _])]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldOnDone.it" title="F[E]">it</a><span class="delimiter">)</span>.<a href="#scales.utils.iteratee;Eval.eval" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">eval</a>
    <span class="keyword">var</span> <a title="Boolean" id="scales.utils.iteratee;Iteratees.foldOnDone.isdone">isdone</a> = <a href="#scales.utils.iteratee;Iteratees.isDone" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isDone</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="ACC" id="scales.utils.iteratee;Iteratees.foldOnDone.currentA">currentA</a> = <a href="#scales.utils.iteratee;Iteratees.foldOnDone.initAcc" title="ACC">initAcc</a>
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span> <span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.isdone" title="Boolean">isdone</a> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.isdone" title="Boolean">isdone</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.isEOF" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isEOF</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">)</span> <a href="#scales.utils.iteratee;Iteratees.foldOnDone.while$1" title="()Unit" class="delimiter">{</a>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.isdone" title="Boolean">isdone</a><span class="delimiter">)</span> <span class="delimiter">{</span>
	<span class="keyword">val</span> <a title="Option[A]" id="scales.utils.iteratee;Iteratees.foldOnDone.a">a</a> = <a href="#scales.utils.iteratee;Iteratees.extract" title="(iter: Iteratees.this.ResumableIter[E,A])Option[A]">extract</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a><span class="delimiter">)</span>
	<span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.a" title="Option[A]">a</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
	  <span title="Nothing" class="keyword">return</span> <a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentA" title="ACC">currentA</a>
      	<span class="keyword">else</span> <span class="delimiter">{</span>
	  <a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentA" title="ACC">currentA</a> = <a href="#scales.utils.iteratee;Iteratees.foldOnDone.f" title="(v1: ACC, v2: A)ACC">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentA" title="ACC">currentA</a>, <a href="#scales.utils.iteratee;Iteratees.foldOnDone.a" title="Option[A]">a</a>.<span title="=&gt; A">get</span><span class="delimiter">)</span>
	  <a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a> = <a href="#scales.utils.iteratee;Iteratees.extractCont" title="(iter: Iteratees.this.ResumableIter[E,A])Iteratees.this.ResumableIter[E,A]">extractCont</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a> = <a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="(f: F[E])(implicit e: scalaz.Enumerator[F])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a><a href="#scales.utils.iteratee;IterateeImplicits.toEval" title="(i: scalaz.IterV[E,(A, scalaz.IterV[E, _])])scales.utils.iteratee.Eval[E,(A, scalaz.IterV[E, _])]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldOnDone.it" title="F[E]">it</a><span class="delimiter">)</span>.<a href="#scales.utils.iteratee;Eval.eval" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">eval</a>
      <a href="#scales.utils.iteratee;Iteratees.foldOnDone.isdone" title="Boolean">isdone</a> = <a href="#scales.utils.iteratee;Iteratees.isDone" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isDone</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentI" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">currentI</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#scales.utils.iteratee;Iteratees.foldOnDone.currentA" title="ACC">currentA</a>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class ResumableIterIterator[E, A, F[_]] extends AnyRef with Iterator[A]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator">ResumableIterIterator</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees;ResumableIterIterator;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees;ResumableIterIterator;A">A</a>,<a title="[_]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator;F">F</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees;ResumableIterIterator;F;_">_</a><span class="delimiter">]</span><span class="delimiter">]</span><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator" title="Iteratees.this.ResumableIterIterator[E,A,F]" class="delimiter">(</a> <a title="F[E]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.it">it</a> : <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator;F" title="F[E]">F</a><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.init">init</a> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Enumerator[F]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.e">e</a> : <span title="scalaz.Enumerator[F]">Enumerator</span><span class="delimiter">[</span>F<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="Iterator[A]">Iterator</span><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="../ScalesUtils.scala.html#scales.utils.ScalesUtils" title="scales.utils.ScalesUtils.type">ScalesUtils</a>._

    <span class="keyword">var</span> <a title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=">cur</a> = <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.init" title="(f: F[E])(implicit e: scalaz.Enumerator[F])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">init</a><a href="#scales.utils.iteratee;IterateeImplicits.toEval" title="(i: scalaz.IterV[E,(A, scalaz.IterV[E, _])])scales.utils.iteratee.Eval[E,(A, scalaz.IterV[E, _])]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.it" title="F[E]">it</a><span class="delimiter">)</span>.<a href="#scales.utils.iteratee;Eval.eval" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">eval</a>
    <span class="keyword">var</span> <a title="Boolean" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.isdone_=">isdone</a> = <a href="#scales.utils.iteratee;Iteratees.isDone" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isDone</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">cur</a><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="Option[A]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.r_=">r</a> = <a href="#scales.utils.iteratee;Iteratees.extract" title="(iter: Iteratees.this.ResumableIter[E,A])Option[A]">extract</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">cur</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="()A" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.next">next</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[A]" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.next.t">t</a> = <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.r_=" title="=&gt; Option[A]">r</a>
      <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=" title="(x$1: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Unit">cur</a> = <a href="#scales.utils.iteratee;Iteratees.extractCont" title="(iter: Iteratees.this.ResumableIter[E,A])Iteratees.this.ResumableIter[E,A]">extractCont</a><span title="(f: F[E])(implicit e: scalaz.Enumerator[F])scalaz.IterV[E,(A, scalaz.IterV[E, _])]" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">cur</a><span class="delimiter">)</span><a href="#scales.utils.iteratee;IterateeImplicits.toEval" title="(i: scalaz.IterV[E,(A, scalaz.IterV[E, _])])scales.utils.iteratee.Eval[E,(A, scalaz.IterV[E, _])]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.it" title="F[E]">it</a><span class="delimiter">)</span>.<a href="#scales.utils.iteratee;Eval.eval" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">eval</a>
      <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.isdone_=" title="(x$1: Boolean)Unit">isdone</a> = <a href="#scales.utils.iteratee;Iteratees.isDone" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isDone</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">cur</a><span class="delimiter">)</span>
      <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.r_=" title="(x$1: Option[A])Unit">r</a> = <a href="#scales.utils.iteratee;Iteratees.extract" title="(iter: Iteratees.this.ResumableIter[E,A])Option[A]">extract</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">cur</a><span class="delimiter">)</span>
      <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.next.t" title="Option[A]">t</a>.<span title="=&gt; A">get</span> <span class="comment">// note we check for defined in hasNext</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="scales.utils.iteratee;Iteratees;ResumableIterIterator.hasNext">hasNext</a> = <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.isdone_=" title="=&gt; Boolean">isdone</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.isEOF" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isEOF</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.cur_=" title="=&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">cur</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator.r_=" title="=&gt; Option[A]">r</a>.<span title="=&gt; Boolean">isDefined</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Converts the iteratee/enumerator/source triple into a Iterator
   */</span>
  <span class="keyword">def</span> <a title="[E, A, F[_]](it: F[E])(initResumable: Iteratees.this.ResumableIter[E,A])(implicit e: scalaz.Enumerator[F])Iteratees.this.ResumableIterIterator[E,A,F]" id="scales.utils.iteratee;Iteratees.withIter">withIter</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.withIter;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.withIter;A">A</a>,<a title="[_]" id="scales.utils.iteratee;Iteratees.withIter;F">F</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.withIter;F;_">_</a><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span> <a title="F[E]" id="scales.utils.iteratee;Iteratees.withIter.it">it</a> : <a href="#scales.utils.iteratee;Iteratees.withIter;F" title="F[E]">F</a><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.withIter.initResumable">initResumable</a> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Enumerator[F]" id="scales.utils.iteratee;Iteratees.withIter.e">e</a> : <span title="scalaz.Enumerator[F]">Enumerator</span><span class="delimiter">[</span>F<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#scales.utils.iteratee;Iteratees.withIter.e" title="Iteratees.this.ResumableIterIterator[E,A,F]" class="keyword">new</a> <a href="#scales.utils.iteratee;Iteratees;ResumableIterIterator" title="Iteratees.this.ResumableIterIterator[E,A,F]">ResumableIterIterator</a><span class="delimiter">[</span>E,A,F<span class="delimiter">]</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.withIter.it" title="F[E]">it</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.withIter.initResumable" title="Iteratees.this.ResumableIter[E,A]">initResumable</a><span class="delimiter">)</span>

  <span class="comment">/**
   * onDone, iterates over the list of iteratees applying
   * the element, when the resulting list contains a Done
   * then the list of Dones is returned.
   *
   * One can use tuples or pattern matching to discern which
   * of the original lists iteratees have matched.
   *
   * Due to the return type of this iteratee all items
   * in the list must return the same type and must return
   * both an A and an IterV with the same interface to continue
   * with the next and maintain state.
   *
   *
   * In the case of EOF, an empty list is returned
   */</span>
  <span class="keyword">def</span> <a title="[E, A](originalList: List[Iteratees.this.ResumableIter[E,A]])Iteratees.this.ResumableIterList[E,A]" id="scales.utils.iteratee;Iteratees.onDone">onDone</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.onDone;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.onDone;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="List[Iteratees.this.ResumableIter[E,A]]" id="scales.utils.iteratee;Iteratees.onDone.originalList">originalList</a> : <span title="List[Iteratees.this.ResumableIter[E,A]]">List</span><span class="delimiter">[</span>ResumableIter<span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Iteratees.this.ResumableIterList[E,A]">ResumableIterList</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(l: List[Iteratees.this.ResumableIter[E,A]])(s: scalaz.Input[E])Iteratees.this.ResumableIterList[E,A]" id="scales.utils.iteratee;Iteratees.onDone.step">step</a><span class="delimiter">(</span><a title="List[Iteratees.this.ResumableIter[E,A]]" id="scales.utils.iteratee;Iteratees.onDone.step.l">l</a> : <span title="List[Iteratees.this.ResumableIter[E,A]]">List</span><span class="delimiter">[</span>ResumableIter<span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.onDone.step.s">s</a>: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Iteratees.this.ResumableIterList[E,A]">ResumableIterList</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.onDone.step.s" title="(empty: =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])], el: (=&gt; E) =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])], eof: =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">s</a><span class="delimiter">(</span>el = <a title="=&gt; E" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.e">e</a> =&gt; <span class="delimiter">{</span>
	<span class="keyword">var</span> <a title="List[A]" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.res">res</a> : <span title="List[A]">List</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span title="scala.collection.immutable.Nil.type">Nil</span>
	<span class="keyword">var</span> <a title="List[Iteratees.this.ResumableIter[E,A]]" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.newl">newl</a> : <span title="List[Iteratees.this.ResumableIter[E,A]]">List</span><span class="delimiter">[</span> ResumableIter<span class="delimiter">[</span>E,A<span class="delimiter">]</span> <span class="delimiter">]</span> = <span title="scala.collection.immutable.Nil.type">Nil</span>

	@inline <span class="keyword">def</span> <a title="(k: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])Unit" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add">add</a><span class="delimiter">(</span> <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.k">k</a> : <span class="delimiter">(</span>scalaz.Input<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; scalaz.IterV<span class="delimiter">[</span>E,<span class="delimiter">(</span>A, scalaz.IterV<span class="delimiter">[</span>E, _<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	  <span class="keyword">val</span> <a title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.d">d</a> = <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.k" title="(v1: scalaz.Input[E])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">k</a><span class="delimiter">(</span><span title="(e0: =&gt; E)scalaz.Input[E]">El</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.e" title="=&gt; E">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
	  <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.newl" title="List[Iteratees.this.ResumableIter[E,A]]">newl</a> = <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.d" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">d</a> <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.x$2" title="(x: Iteratees.this.ResumableIter[E,A])List[Iteratees.this.ResumableIter[E,A]]">::</a> <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.newl" title="List[Iteratees.this.ResumableIter[E,A]]">newl</a>
	  <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.d" title="scalaz.IterV[E,(A, scalaz.IterV[E, _])]">d</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
	    <span class="keyword">case</span> <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.<unapply-selector>" title="(r: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Option[((A, scalaz.IterV[E, _]), scalaz.Input[E])]">Done</a><span class="delimiter">(</span><a title="(A, scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.x">x</a>, _<span class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.res" title="List[A]">res</a> = <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.x" title="(A, scalaz.IterV[E, _])">x</a>.<span title="=&gt; A">_1</span> <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add.x$3" title="(x: A)List[A]">::</a> <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.res" title="List[A]">res</a>
	    <span class="keyword">case</span> _ =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
	  <span class="delimiter">}</span>
	<span class="delimiter">}</span>

	<span class="keyword">val</span> <span title="Iterator[Iteratees.this.ResumableIter[E,A]]">i</span> = <a href="#scales.utils.iteratee;Iteratees.onDone.step.l" title="List[Iteratees.this.ResumableIter[E,A]]">l</a>.<span title="=&gt; Iterator[Iteratees.this.ResumableIter[E,A]]">iterator</span>
	<span title="Unit" class="keyword">while</span><span class="delimiter">(</span><span title="Iterator[Iteratees.this.ResumableIter[E,A]]">i</span>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	  <span title="Iterator[Iteratees.this.ResumableIter[E,A]]">i</span>.<span title="()Iteratees.this.ResumableIter[E,A]">next</span> <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.while$2" title="Any" class="keyword">match</a> <span class="delimiter">{</span>
	  <span class="comment">// safety first</span>
	  <span class="keyword">case</span> <span title="Iteratees.this.ResumableIter[E,A]">iter</span>@<a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.<unapply-selector>" title="(r: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Option[((A, scalaz.IterV[E, _]), scalaz.Input[E])]">Done</a><span class="delimiter">(</span><a title="(A, scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.e1">e1</a>, _<span class="delimiter">)</span> =&gt;
	    <span class="comment">// are we EOF, in which case remove</span>
	    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.isEOF" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isEOF</a><span class="delimiter">(</span><span title="Iteratees.this.ResumableIter[E,A]">iter</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
	    <span class="keyword">else</span> <span class="delimiter">{</span>
	      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.isEmpty" title="(iter: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Boolean">isEmpty</a><span class="delimiter">(</span><span title="Iteratees.this.ResumableIter[E,A]">iter</span><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="comment">// feed back the continuation</span>
		<span class="comment">// this is where we hope that the users don't</span>
		<span class="comment">// break on purpose :-()</span>
		<a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.e1" title="(A, scalaz.IterV[E, _])">e1</a>.<span title="=&gt; scalaz.IterV[E, _]">_2</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
		  <span class="keyword">case</span> <span title="scalaz.IterV[E,_$2]">i</span> @ <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.<unapply-selector>" title="(r: scalaz.IterV[E,_$2])Option[scalaz.Input[E] =&gt; scalaz.IterV[E,_$2]]">Cont</a><span class="delimiter">(</span><span title="scalaz.Input[E] =&gt; scalaz.IterV[E,_$2]">k</span><span class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add" title="(k: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])Unit">add</a><span class="delimiter">(</span><span title="scalaz.Input[E] =&gt; scalaz.IterV[E,_$2]">k</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]" class="delimiter">[</span><span class="delimiter">(</span>scalaz.Input<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; scalaz.IterV<span class="delimiter">[</span>E,<span class="delimiter">(</span>A, scalaz.IterV<span class="delimiter">[</span>E, _<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
		  <span class="keyword">case</span> _ =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Continuation can only be a Cont&quot;)" class="string">&quot;Continuation can only be a Cont&quot;</span><span class="delimiter">)</span>
		<span class="delimiter">}</span>
	      <span class="keyword">else</span> <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Can only handle EOF or Empty for Done&quot;)" class="string">&quot;Can only handle EOF or Empty for Done&quot;</span><span class="delimiter">)</span>

	    <span class="delimiter">}</span>
	  <span class="keyword">case</span> <span title="Iteratees.this.ResumableIter[E,A]">iter</span>@<a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.<unapply-selector>" title="(r: scalaz.IterV[E,(A, scalaz.IterV[E, _])])Option[scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]]">Cont</a><span class="delimiter">(</span><span title="scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">k</span><span class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.add" title="(k: scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])])Unit">add</a><span class="delimiter">(</span><span title="scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]">k</span><span class="delimiter">)</span>
	  <span class="delimiter">}</span>
	<span class="delimiter">}</span>

	<span title="scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.res" title="List[A]">res</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
	  <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.onDone.step" title="(l: List[Iteratees.this.ResumableIter[E,A]])(s: scalaz.Input[E])Iteratees.this.ResumableIterList[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.newl" title="List[Iteratees.this.ResumableIter[E,A]]">newl</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <span title="(a: =&gt; (Iterable[A], scalaz.IterV[E, _]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">Done</span><span class="delimiter">(</span><span title="(_1: List[A], _2: scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])(List[A], scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.res" title="List[A]">res</a>, <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.onDone.step" title="(l: List[Iteratees.this.ResumableIter[E,A]])(s: scalaz.Input[E])Iteratees.this.ResumableIterList[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.x$19.$anonfun.newl" title="List[Iteratees.this.ResumableIter[E,A]]">newl</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.onDone;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>,
        empty = <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">Cont</span><a title="() =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.onDone.step.x$20" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.onDone.step" title="(l: List[Iteratees.this.ResumableIter[E,A]])(s: scalaz.Input[E])Iteratees.this.ResumableIterList[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.l" title="List[Iteratees.this.ResumableIter[E,A]]">l</a><span class="delimiter">)</span><span class="delimiter">)</span>,
        eof = <span title="(a: =&gt; (Iterable[A], scalaz.IterV[E, _]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">Done</span><a title="() =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.onDone.step.x$21" class="delimiter">(</a><span title="(_1: scala.collection.immutable.Nil.type, _2: scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])(scala.collection.immutable.Nil.type, scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])" class="delimiter">(</span><span title="scala.collection.immutable.Nil.type">Nil</span>, <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.onDone.step" title="(l: List[Iteratees.this.ResumableIter[E,A]])(s: scalaz.Input[E])Iteratees.this.ResumableIterList[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.$anonfun.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.onDone.step.l" title="List[Iteratees.this.ResumableIter[E,A]]">l</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.onDone;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])])scalaz.IterV[E,(Iterable[A], scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.onDone.step" title="(l: List[Iteratees.this.ResumableIter[E,A]])(s: scalaz.Input[E])Iteratees.this.ResumableIterList[E,A]">step</a><a href="#scales.utils.iteratee;Iteratees.onDone.$anonfun.s" title="scalaz.Input[E]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.onDone.originalList" title="List[Iteratees.this.ResumableIter[E,A]]">originalList</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * keeps a running count of each element, probably not of much use
   * unless combined but acts as a good poc for ResumableIter
   */</span>
  <span class="keyword">def</span> <a title="[E]=&gt; Iteratees.this.ResumableIter[E,Long]" id="scales.utils.iteratee;Iteratees.runningCount">runningCount</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.runningCount;E">E</a><span class="delimiter">]</span> = <a href="#scales.utils.iteratee;Iteratees.foldI" title="[E, A](f: (E, A) =&gt; A)(init: A)Iteratees.this.ResumableIter[E,A]">foldI</a><span title="(f: (E, Long) =&gt; Long)(init: Long)Iteratees.this.ResumableIter[E,Long]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.runningCount;E" title="E">E</a>,<span title="Long">Long</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">(</span>e :<a href="#scales.utils.iteratee;Iteratees.runningCount;E" title="E">E</a>, count : <span title="Long">Long</span><span class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;Iteratees.runningCount.$anonfun.count" title="Long">count</a> <span title="(x: Int)Long">+</span> <span title="Int(1)" class="int">1</span> <span class="delimiter">)</span><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Append to an appendable, always returns Done for a line, cont for
   * everything else
   * TODO - should it be a pair including the appendable?
   */</span>
  <span class="keyword">def</span> <a title="(to: Appendable)scalaz.IterV[CharSequence,CharSequence]" id="scales.utils.iteratee;Iteratees.appendTo">appendTo</a><span class="delimiter">(</span> <a title="Appendable" id="scales.utils.iteratee;Iteratees.appendTo.to">to</a> : <span title="Appendable">Appendable</span> <span class="delimiter">)</span> : <span title="scalaz.IterV[CharSequence,CharSequence]">IterV</span><span class="delimiter">[</span>CharSequence, CharSequence<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: scalaz.Input[CharSequence])scalaz.IterV[CharSequence,CharSequence]" id="scales.utils.iteratee;Iteratees.appendTo.step">step</a><span class="delimiter">(</span><a title="scalaz.Input[CharSequence]" id="scales.utils.iteratee;Iteratees.appendTo.step.s">s</a>: <span title="scalaz.Input[CharSequence]">Input</span><span class="delimiter">[</span>CharSequence<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.IterV[CharSequence,CharSequence]">IterV</span><span class="delimiter">[</span>CharSequence, CharSequence<span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.appendTo.step.s" title="(empty: =&gt; scalaz.IterV[CharSequence,CharSequence], el: (=&gt; CharSequence) =&gt; scalaz.IterV[CharSequence,CharSequence], eof: =&gt; scalaz.IterV[CharSequence,CharSequence])scalaz.IterV[CharSequence,CharSequence]">s</a><span class="delimiter">(</span>el = <span class="delimiter">{</span><a title="=&gt; CharSequence" id="scales.utils.iteratee;Iteratees.appendTo.step.x$22.$anonfun.e">e</a> =&gt;
	<a href="#scales.utils.iteratee;Iteratees.appendTo.to" title="Appendable">to</a>.<span title="(x$1: CharSequence)Appendable">append</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.appendTo.step.x$22.$anonfun.e" title="=&gt; CharSequence">e</a><span class="delimiter">)</span>
	<span title="(a: =&gt; CharSequence, i: =&gt; scalaz.Input[CharSequence])scalaz.IterV[CharSequence,CharSequence]">Done</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.appendTo.step.x$22.$anonfun.e" title="=&gt; CharSequence">e</a>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[CharSequence]" class="delimiter">[</span><span title="CharSequence">CharSequence</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">}</span>,
        empty = <span title="(f: scalaz.Input[CharSequence] =&gt; scalaz.IterV[CharSequence,CharSequence])scalaz.IterV[CharSequence,CharSequence]">Cont</span><a title="() =&gt; scalaz.IterV[CharSequence,CharSequence]" id="scales.utils.iteratee;Iteratees.appendTo.step.x$23" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.appendTo.step" title="(s: scalaz.Input[CharSequence])scalaz.IterV[CharSequence,CharSequence]">step</a><span class="delimiter">)</span>,
        eof = <span title="(a: =&gt; CharSequence, i: =&gt; scalaz.Input[CharSequence])scalaz.IterV[CharSequence,CharSequence]">Done</span><a title="() =&gt; scalaz.IterV[CharSequence,CharSequence]" id="scales.utils.iteratee;Iteratees.appendTo.step.x$24" class="delimiter">(</a><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>,<span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[CharSequence]" class="delimiter">[</span><span title="CharSequence">CharSequence</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(f: scalaz.Input[CharSequence] =&gt; scalaz.IterV[CharSequence,CharSequence])scalaz.IterV[CharSequence,CharSequence]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.appendTo.step" title="(s: scalaz.Input[CharSequence])scalaz.IterV[CharSequence,CharSequence]">step</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Calls the function param with the fed data and returns its
   * result
   */</span>
  <span class="keyword">def</span> <a title="[FROM, TO](f: FROM =&gt; TO)scalaz.IterV[FROM,TO]" id="scales.utils.iteratee;Iteratees.evalWith">evalWith</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.evalWith;FROM">FROM</a>,<a title="" id="scales.utils.iteratee;Iteratees.evalWith;TO">TO</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="FROM =&gt; TO" id="scales.utils.iteratee;Iteratees.evalWith.f">f</a> : <span class="delimiter">(</span>FROM<span class="delimiter">)</span> =&gt; TO <span class="delimiter">)</span> : <span title="scalaz.IterV[FROM,TO]">IterV</span><span class="delimiter">[</span>FROM, TO<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: scalaz.Input[FROM])scalaz.IterV[FROM,TO]" id="scales.utils.iteratee;Iteratees.evalWith.step">step</a><span class="delimiter">(</span><a title="scalaz.Input[FROM]" id="scales.utils.iteratee;Iteratees.evalWith.step.s">s</a>: <span title="scalaz.Input[FROM]">Input</span><span class="delimiter">[</span>FROM<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.IterV[FROM,TO]">IterV</span><span class="delimiter">[</span>FROM, TO<span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.evalWith.step.s" title="(empty: =&gt; scalaz.IterV[FROM,TO], el: (=&gt; FROM) =&gt; scalaz.IterV[FROM,TO], eof: =&gt; scalaz.IterV[FROM,TO])scalaz.IterV[FROM,TO]">s</a><span class="delimiter">(</span>el = <a title="=&gt; FROM" id="scales.utils.iteratee;Iteratees.evalWith.step.x$25.$anonfun.e">e</a> =&gt; <span class="delimiter">{</span>
	<span class="keyword">val</span> <a title="TO" id="scales.utils.iteratee;Iteratees.evalWith.step.x$25.$anonfun.to">to</a> = <a href="#scales.utils.iteratee;Iteratees.evalWith.f" title="(v1: FROM)TO">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.evalWith.step.x$25.$anonfun.e" title="=&gt; FROM">e</a><span class="delimiter">)</span>
	<span title="(a: =&gt; TO, i: =&gt; scalaz.Input[FROM])scalaz.IterV[FROM,TO]">Done</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.evalWith.step.x$25.$anonfun.to" title="TO">to</a>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[FROM]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.evalWith;FROM" title="FROM">FROM</a><span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>,
        empty = <span title="(f: scalaz.Input[FROM] =&gt; scalaz.IterV[FROM,TO])scalaz.IterV[FROM,TO]">Cont</span><a title="() =&gt; scalaz.IterV[FROM,TO]" id="scales.utils.iteratee;Iteratees.evalWith.step.x$26" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.evalWith.step" title="(s: scalaz.Input[FROM])scalaz.IterV[FROM,TO]">step</a><span class="delimiter">)</span>,
        eof = <span title="(f: scalaz.Input[FROM] =&gt; scalaz.IterV[FROM,TO])scalaz.IterV[FROM,TO]">Cont</span><a title="() =&gt; scalaz.IterV[FROM,TO]" id="scales.utils.iteratee;Iteratees.evalWith.step.x$27" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.evalWith.step" title="(s: scalaz.Input[FROM])scalaz.IterV[FROM,TO]">step</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(f: scalaz.Input[FROM] =&gt; scalaz.IterV[FROM,TO])scalaz.IterV[FROM,TO]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.evalWith.step" title="(s: scalaz.Input[FROM])scalaz.IterV[FROM,TO]">step</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Enumeratee that converts input 1:1
   * String =&gt; Int, enumerator Iterator[String] but IterV[Int, Int]
   */</span>
  <span class="keyword">def</span> <a title="[E, A, R](dest: scalaz.IterV[A,R])(f: E =&gt; A)scalaz.IterV[E,R]" id="scales.utils.iteratee;Iteratees.enumerateeMap">enumerateeMap</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.enumerateeMap;E">E</a>, <a title="" id="scales.utils.iteratee;Iteratees.enumerateeMap;A">A</a>, <a title="" id="scales.utils.iteratee;Iteratees.enumerateeMap;R">R</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="scalaz.IterV[A,R]" id="scales.utils.iteratee;Iteratees.enumerateeMap.dest">dest</a> : <span title="scalaz.IterV[A,R]">IterV</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span> <a title="E =&gt; A" id="scales.utils.iteratee;Iteratees.enumerateeMap.f">f</a> : E =&gt; A <span class="delimiter">)</span> : <span title="scalaz.IterV[E,R]">IterV</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(i: scalaz.IterV[A,R])scalaz.IterV[E,R]" id="scales.utils.iteratee;Iteratees.enumerateeMap.next">next</a><span class="delimiter">(</span> <a title="scalaz.IterV[A,R]" id="scales.utils.iteratee;Iteratees.enumerateeMap.next.i">i</a> : <span title="scalaz.IterV[A,R]">IterV</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="scalaz.IterV[E,R]">IterV</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next.i" title="scalaz.IterV[A,R]">i</a>.<span title="(done: (=&gt; R, =&gt; scalaz.Input[A]) =&gt; scalaz.IterV[E,R], cont: (scalaz.Input[A] =&gt; scalaz.IterV[A,R]) =&gt; scalaz.IterV[E,R])scalaz.IterV[E,R]">fold</span><span class="delimiter">(</span>
	done = <span class="delimiter">(</span><a title="=&gt; R" id="scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.a">a</a>, <a title="=&gt; scalaz.Input[A]" id="scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.y">y</a><span title="=&gt; scalaz.Input[A]" class="delimiter">)</span> =&gt; <span title="(a: =&gt; R, i: =&gt; scalaz.Input[E])scalaz.IterV[E,R]">Done</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.a" title="=&gt; R">a</a>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>,
	cont = <a title="scalaz.Input[A] =&gt; scalaz.IterV[A,R]" id="scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.k">k</a> =&gt; <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,R])scalaz.IterV[E,R]">Cont</span><span class="delimiter">(</span><span class="delimiter">(</span>x: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
	  <a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.$anonfun.x" title="(empty: =&gt; scalaz.IterV[E,R], el: (=&gt; E) =&gt; scalaz.IterV[E,R], eof: =&gt; scalaz.IterV[E,R])scalaz.IterV[E,R]">x</a><span class="delimiter">(</span> el = <a title="=&gt; E" id="scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.$anonfun.x$28.$anonfun.e">e</a> =&gt; <a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next" title="(i: scalaz.IterV[A,R])scalaz.IterV[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.k" title="(v1: scalaz.Input[A])scalaz.IterV[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="(e0: =&gt; A)scalaz.Input[A]">El</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap.f" title="(v1: E)A">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.$anonfun.x$28.$anonfun.e" title="=&gt; E">e</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
	    empty = <a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next" title="(i: scalaz.IterV[A,R])scalaz.IterV[E,R]">next</a><a title="() =&gt; scalaz.IterV[E,R]" id="scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.$anonfun.x$29" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.k" title="(v1: scalaz.Input[A])scalaz.IterV[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[A]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>,
	     eof = <a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next" title="(i: scalaz.IterV[A,R])scalaz.IterV[E,R]">next</a><a title="() =&gt; scalaz.IterV[E,R]" id="scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.$anonfun.x$30" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next.$anonfun.k" title="(v1: scalaz.Input[A])scalaz.IterV[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[A]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="delimiter">)</span>
      <span class="delimiter">)</span>

    <a href="#scales.utils.iteratee;Iteratees.enumerateeMap.next" title="(i: scalaz.IterV[A,R])scalaz.IterV[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumerateeMap.dest" title="scalaz.IterV[A,R]">dest</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Sums an iteratee up
   */</span>
  <span class="keyword">def</span> <a title="[T](implicit n: Numeric[T])scalaz.IterV[T,T]" id="scales.utils.iteratee;Iteratees.sum">sum</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.sum;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Numeric[T]" id="scales.utils.iteratee;Iteratees.sum.n">n</a>: <span title="Numeric[T]">Numeric</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.IterV[T,T]">IterV</span><span class="delimiter">[</span>T,T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#scales.utils.iteratee;Iteratees.sum.n" title="Numeric[T]">n</a>._
    <span class="keyword">def</span> <a title="(acc: T)(s: scalaz.Input[T])scalaz.IterV[T,T]" id="scales.utils.iteratee;Iteratees.sum.step">step</a><span class="delimiter">(</span><a title="T" id="scales.utils.iteratee;Iteratees.sum.step.acc">acc</a>: <a href="#scales.utils.iteratee;Iteratees.sum;T" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span> <a title="scalaz.Input[T]" id="scales.utils.iteratee;Iteratees.sum.step.s">s</a> : <span title="scalaz.Input[T]">Input</span><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="scalaz.IterV[T,T]">IterV</span><span class="delimiter">[</span>T, T<span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.sum.step.s" title="(empty: =&gt; scalaz.IterV[T,T], el: (=&gt; T) =&gt; scalaz.IterV[T,T], eof: =&gt; scalaz.IterV[T,T])scalaz.IterV[T,T]">s</a><span class="delimiter">(</span> el = <a title="=&gt; T" id="scales.utils.iteratee;Iteratees.sum.step.x$31.$anonfun.e">e</a> =&gt; <span title="(f: scalaz.Input[T] =&gt; scalaz.IterV[T,T])scalaz.IterV[T,T]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.sum.step" title="(acc: T)(s: scalaz.Input[T])scalaz.IterV[T,T]">step</a><a href="#scales.utils.iteratee;Iteratees.sum.step.x$31.$anonfun.$anonfun.s" title="scalaz.Input[T]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.sum.n" title="implicit scala.math.Numeric.mkNumericOps : (lhs: T)n.Ops">acc</a> <a href="#scales.utils.iteratee;Iteratees.sum.step.x$31.$anonfun.eta$0$4" title="(rhs: T)T">+</a> <a href="#scales.utils.iteratee;Iteratees.sum.step.x$31.$anonfun.e" title="=&gt; T">e</a><span class="delimiter">)</span><span class="delimiter">)</span>,
	empty = <span title="(f: scalaz.Input[T] =&gt; scalaz.IterV[T,T])scalaz.IterV[T,T]">Cont</span><a title="() =&gt; scalaz.IterV[T,T]" id="scales.utils.iteratee;Iteratees.sum.step.x$32" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.sum.step" title="(acc: T)(s: scalaz.Input[T])scalaz.IterV[T,T]">step</a><a href="#scales.utils.iteratee;Iteratees.sum.step.$anonfun.$anonfun.s" title="scalaz.Input[T]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.sum.step.acc" title="T">acc</a><span class="delimiter">)</span><span class="delimiter">)</span>,
	eof = <span title="(a: =&gt; T, i: =&gt; scalaz.Input[T])scalaz.IterV[T,T]">Done</span><a title="() =&gt; scalaz.IterV[T,T]" id="scales.utils.iteratee;Iteratees.sum.step.x$33" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.sum.step.acc" title="T">acc</a>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[T]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.sum;T" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span title="(f: scalaz.Input[T] =&gt; scalaz.IterV[T,T])scalaz.IterV[T,T]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.sum.step" title="(acc: T)(s: scalaz.Input[T])scalaz.IterV[T,T]">step</a><a href="#scales.utils.iteratee;Iteratees.sum.$anonfun.s" title="scalaz.Input[T]" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.sum.n" title="=&gt; T">zero</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Maps a given input to a function returning a Input[EphemeralStream].
   * If the Input is El it returns it, if EOF empty and continues on empty.
   */</span>
  <span class="keyword">def</span> <a title="[E, A](f: E =&gt; scalaz.Input[scalaz.EphemeralStream[A]])scalaz.IterV[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo">mapTo</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.mapTo;E">E</a>, <a title="" id="scales.utils.iteratee;Iteratees.mapTo;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="E =&gt; scalaz.Input[scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo.f">f</a>: E =&gt; Input<span class="delimiter">[</span>EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">)</span>: <span title="scalaz.IterV[E,scalaz.EphemeralStream[A]]">IterV</span><span class="delimiter">[</span>E, EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: scalaz.Input[E])scalaz.IterV[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo.step">step</a><span class="delimiter">(</span><a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.mapTo.step.s">s</a>: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.IterV[E,scalaz.EphemeralStream[A]]">IterV</span><span class="delimiter">[</span>E, EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.mapTo.step.s" title="(empty: =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]], el: (=&gt; E) =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]], eof: =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]])scalaz.IterV[E,scalaz.EphemeralStream[A]]">s</a><span class="delimiter">(</span> el = <a title="=&gt; E" id="scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.e">e</a> =&gt; <span class="delimiter">{</span>
	    <span class="keyword">val</span> <a title="scalaz.Input[scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.r">r</a> = <a href="#scales.utils.iteratee;Iteratees.mapTo.f" title="(v1: E)scalaz.Input[scalaz.EphemeralStream[A]]">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.e" title="=&gt; E">e</a><span class="delimiter">)</span>
	    <a href="#scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.r" title="(empty: =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]], el: (=&gt; scalaz.EphemeralStream[A]) =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]], eof: =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]])scalaz.IterV[E,scalaz.EphemeralStream[A]]">r</a><span class="delimiter">(</span> el = <a title="=&gt; scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.x$34.$anonfun.e1">e1</a> =&gt; <span class="delimiter">{</span>
		  <span title="(a: =&gt; scalaz.EphemeralStream[A], i: =&gt; scalaz.Input[E])scalaz.IterV[E,scalaz.EphemeralStream[A]]">Done</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.x$34.$anonfun.e1" title="=&gt; scalaz.EphemeralStream[A]">e1</a>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.mapTo;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>
		<span class="delimiter">}</span>,
	      empty = <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]])scalaz.IterV[E,scalaz.EphemeralStream[A]]">Cont</span><a title="() =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.x$35" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.mapTo.step" title="(s: scalaz.Input[E])scalaz.IterV[E,scalaz.EphemeralStream[A]]">step</a><span class="delimiter">)</span>,
	      eof = <span title="(a: =&gt; scalaz.EphemeralStream[A], i: =&gt; scalaz.Input[E])scalaz.IterV[E,scalaz.EphemeralStream[A]]">Done</span><a title="() =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo.step.x$37.$anonfun.x$36" class="delimiter">(</a><span title="scalaz.EphemeralStream.type">EphemeralStream</span>.<span title="=&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</span>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.mapTo;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>
	    <span class="delimiter">)</span>
	  <span class="delimiter">}</span>,
	empty = <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]])scalaz.IterV[E,scalaz.EphemeralStream[A]]">Cont</span><a title="() =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo.step.x$38" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.mapTo.step" title="(s: scalaz.Input[E])scalaz.IterV[E,scalaz.EphemeralStream[A]]">step</a><span class="delimiter">)</span>,
	eof = <span title="(a: =&gt; scalaz.EphemeralStream[A], i: =&gt; scalaz.Input[E])scalaz.IterV[E,scalaz.EphemeralStream[A]]">Done</span><a title="() =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.mapTo.step.x$39" class="delimiter">(</a><span title="scalaz.EphemeralStream.type">EphemeralStream</span>.<span title="=&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</span>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.mapTo;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>

    <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,scalaz.EphemeralStream[A]])scalaz.IterV[E,scalaz.EphemeralStream[A]]">Cont</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.mapTo.step" title="(s: scalaz.Input[E])scalaz.IterV[E,scalaz.EphemeralStream[A]]">step</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

    <span class="comment">/**
   * Enumeratee that folds over the Iteratee with Cont or Done and Empty, returning with Done and EOF.
   *
   * Converts ResumableIters on Done via a fold, returning Done only when receiving EOF from the initIter.
   *
   * NB - This can be thought of the reverse of toResumableIter but also accumulating.
   */</span>
  <span class="keyword">def</span> <a title="[E, A, ACC](initAcc: ACC, initIter: Iteratees.this.ResumableIter[E,A])(f: (ACC, A) =&gt; ACC)scalaz.IterV[E,ACC]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter">foldOnDoneIter</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.foldOnDoneIter;E">E</a>,<a title="" id="scales.utils.iteratee;Iteratees.foldOnDoneIter;A">A</a>, <a title="" id="scales.utils.iteratee;Iteratees.foldOnDoneIter;ACC">ACC</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="ACC" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.initAcc">initAcc</a> : <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter;ACC" title="ACC">ACC</a>, <a title="Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.initIter">initIter</a> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span> <a title="(ACC, A) =&gt; ACC" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.f">f</a> : <span class="delimiter">(</span>ACC, A<span class="delimiter">)</span> =&gt; ACC <span class="delimiter">)</span> : <span title="scalaz.IterV[E,ACC]">IterV</span><span class="delimiter">[</span>E, ACC<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(acc: ACC, i: Iteratees.this.ResumableIter[E,A])scalaz.IterV[E,ACC]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next">next</a><span class="delimiter">(</span> <a title="ACC" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.acc">acc</a> : <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter;ACC" title="ACC">ACC</a>, <a title="Iteratees.this.ResumableIter[E,A]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.i">i</a> : <span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="scalaz.IterV[E,ACC]">IterV</span><span class="delimiter">[</span>E, ACC<span class="delimiter">]</span> =
      <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.i" title="Iteratees.this.ResumableIter[E,A]">i</a>.<span title="(done: (=&gt; (A, scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; scalaz.IterV[E,ACC], cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]) =&gt; scalaz.IterV[E,ACC])scalaz.IterV[E,ACC]">fold</span><span class="delimiter">(</span>
	done = <span class="delimiter">(</span><a title="=&gt; (A, scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.ac">ac</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.y">y</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
	  <span class="keyword">val</span> <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.e" title="(A, scalaz.IterV[E,_0])" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.x$4" title="A" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.e">e</a>, <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.x$4" title="scalaz.IterV[E, _]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.cont">cont</a><span class="delimiter">)</span> = <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.ac" title="=&gt; (A, scalaz.IterV[E, _])">ac</a>
	  <span class="keyword">val</span> <a title="ACC" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.newacc">newacc</a> = <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.f" title="(v1: ACC, v2: A)ACC">f</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.acc" title="ACC">acc</a>, <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.e" title="A">e</a><span class="delimiter">)</span>
	  <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.y" title="=&gt; scalaz.Input[E]">y</a> <span title="scalaz.IterV[E,ACC]" class="keyword">match</span> <span class="delimiter">{</span>
	    <span class="keyword">case</span> <span title="scalaz.IterV.type">IterV</span>.<a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.<unapply-selector>" title="(r: scalaz.Input[E])Option[E]">El</a><span class="delimiter">(</span><a title="E" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.a">a</a><span class="delimiter">)</span> =&gt;
	      <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Cannot process an input element from Done&quot;)" class="string">&quot;Cannot process an input element from Done&quot;</span><span class="delimiter">)</span>
	    <span class="keyword">case</span> <span title="scalaz.IterV.type">IterV</span>.<a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.<unapply-selector>" title="(r: scalaz.Input[E])Boolean">Empty</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
	      <span class="comment">// can continue</span>
	      <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,ACC])scalaz.IterV[E,ACC]">Cont</span><span class="delimiter">(</span> <span class="delimiter">(</span>x : <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
		<span class="comment">// is the cont itself actually a done or a cont?</span>
		<a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next" title="(acc: ACC, i: Iteratees.this.ResumableIter[E,A])scalaz.IterV[E,ACC]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.newacc" title="ACC">newacc</a>,
		     <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.cont" title="scalaz.IterV[E, _]">cont</a> <span title="Iteratees.this.ResumableIter[E,A]" class="keyword">match</span> <span class="delimiter">{</span>
		       <span class="keyword">case</span> <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.<unapply-selector>" title="(r: scalaz.IterV[E,_0])Option[(_0, scalaz.Input[E])]">Done</a><span class="delimiter">(</span><a title="_0" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.x">x</a>,<a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.y">y</a><span class="delimiter">)</span> =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;got a Done from a resumableIter cont &quot;)" class="string">&quot;got a Done from a resumableIter cont &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.x" title="_0">x</a> <span title="(x$1: Any)String">+</span><span title="String(&quot; &quot;)" class="string">&quot; &quot;</span><span title="(x$1: Any)String">+</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.y" title="scalaz.Input[E]">y</a><span class="delimiter">)</span>
		       <span class="keyword">case</span> <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.<unapply-selector>" title="(r: scalaz.IterV[E,_0])Option[scalaz.Input[E] =&gt; scalaz.IterV[E,_0]]">Cont</a><span class="delimiter">(</span><a title="scalaz.Input[E] =&gt; scalaz.IterV[E,_0]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.k">k</a><span class="delimiter">)</span> =&gt;
			 <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.k" title="(v1: scalaz.Input[E])scalaz.IterV[E,_0]">k</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.x" title="scalaz.Input[E]">x</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iteratees.this.ResumableIter[E,A]" class="delimiter">[</span><span title="Iteratees.this.ResumableIter[E,A]">ResumableIter</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">]</span>
		     <span class="delimiter">}</span>
		      <span class="delimiter">)</span><span class="delimiter">)</span>
	    <span class="keyword">case</span> <span title="scalaz.IterV.type">IterV</span>.<a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.<unapply-selector>" title="(r: scalaz.Input[E])Boolean">EOF</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="(a: =&gt; ACC, i: =&gt; scalaz.Input[E])scalaz.IterV[E,ACC]">Done</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.newacc" title="ACC">newacc</a>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>
	  <span class="delimiter">}</span>
	<span class="delimiter">}</span>,
	cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,(A, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.k">k</a> =&gt; <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,ACC])scalaz.IterV[E,ACC]">Cont</span><span class="delimiter">(</span><span class="delimiter">(</span>x: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
	  <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next" title="(acc: ACC, i: Iteratees.this.ResumableIter[E,A])scalaz.IterV[E,ACC]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.acc" title="ACC">acc</a>, <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.k" title="(v1: scalaz.Input[E])scalaz.IterV[E,(A, scalaz.IterV[E, _])]">k</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next.$anonfun.$anonfun.x" title="scalaz.Input[E]">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>

    <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.next" title="(acc: ACC, i: Iteratees.this.ResumableIter[E,A])scalaz.IterV[E,ACC]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.initAcc" title="ACC">initAcc</a>, <a href="#scales.utils.iteratee;Iteratees.foldOnDoneIter.initIter" title="Iteratees.this.ResumableIter[E,A]">initIter</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Takes Input[E] converts via toMany to an EphemeralStream[A].  This in turn is fed to the destination iteratee.
   * The inputs can be 1 -&gt; Many, Many -&gt; 1, or indeed 1 -&gt; 1.
   * 
   * The callers must take care of what kind of continnuation Iteratee is returned in a Done.
   *
   * If the dest returns EOF, the toMany is in turn called with EOF for any needed resource control processing.
   */</span> 
  <span class="keyword">def</span> <a title="[E, A, R](dest: Iteratees.this.ResumableIter[A,R])(toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]])Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany">enumToMany</a><span class="delimiter">[</span><a title="" id="scales.utils.iteratee;Iteratees.enumToMany;E">E</a>, <a title="" id="scales.utils.iteratee;Iteratees.enumToMany;A">A</a>, <a title="" id="scales.utils.iteratee;Iteratees.enumToMany;R">R</a><span class="delimiter">]</span><span class="delimiter">(</span> <a title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.dest">dest</a>: <span title="Iteratees.this.ResumableIter[A,R]">ResumableIter</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span> <a title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.toMany">toMany</a>: <span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">ResumableIter</span><span class="delimiter">[</span>E, EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Iteratees.this.ResumableIter[E,R]">ResumableIter</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="() =&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}" id="scales.utils.iteratee;Iteratees.enumToMany.empty">empty</a> = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="scalaz.EphemeralStream.type">EphemeralStream</span>.<span title="=&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</span>

    <span class="comment">/**
     * Pumps data from the toMany through to the destination, when the destination has consumed as much as possible it returns.
     */</span>
    <span class="keyword">def</span> <a title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A])(Iteratees.this.ResumableIter[A,R], () =&gt; scalaz.EphemeralStream[A])" id="scales.utils.iteratee;Iteratees.enumToMany.loop">loop</a><span class="delimiter">(</span> <a title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.i">i</a>: <span title="Iteratees.this.ResumableIter[A,R]">ResumableIter</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span>, <a title="() =&gt; scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.s">s</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">)</span>:
      <span title="(Iteratees.this.ResumableIter[A,R], () =&gt; scalaz.EphemeralStream[A])" class="delimiter">(</span>ResumableIter<span class="delimiter">[</span>A,R<span class="delimiter">]</span>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.c">c</a>: <span title="Iteratees.this.ResumableIter[A,R]">ResumableIter</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.i" title="Iteratees.this.ResumableIter[A,R]">i</a>
      <span class="keyword">var</span> <a title="scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.cs">cs</a>: <span title="scalaz.EphemeralStream[A]">EphemeralStream</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.s" title="()scalaz.EphemeralStream[A]">s</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// need it now</span>
	<span class="comment">//println(&quot;loopy &quot;+ isDone(c)+ &quot; &quot; +cs.isEmpty)</span>
      <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.isDone" title="(iter: scalaz.IterV[A,(R, scalaz.IterV[A, _])])Boolean">isDone</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.c" title="Iteratees.this.ResumableIter[A,R]">c</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.cs" title="scalaz.EphemeralStream[A]">cs</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.while$3" title="()Unit" class="delimiter">{</a>
	<span class="comment">// println(&quot;doing a loop &quot;+c)</span>
	<span class="keyword">val</span> <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.nc" title="(Iteratees.this.ResumableIter[A,R], scalaz.EphemeralStream[A])" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.x$5" title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.nc">nc</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.x$5" title="scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.ncs">ncs</a><span class="delimiter">)</span>: <span title="(Iteratees.this.ResumableIter[A,R], scalaz.EphemeralStream[A])" class="delimiter">(</span>ResumableIter<span class="delimiter">[</span>A,R<span class="delimiter">]</span>, EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.c" title="Iteratees.this.ResumableIter[A,R]">c</a>.<span title="(done: (=&gt; (R, scalaz.IterV[A, _]), =&gt; scalaz.Input[A]) =&gt; (scalaz.IterV[A,(R, scalaz.IterV[A, _])], scalaz.EphemeralStream[A]), cont: (scalaz.Input[A] =&gt; scalaz.IterV[A,(R, scalaz.IterV[A, _])]) =&gt; (scalaz.IterV[A,(R, scalaz.IterV[A, _])], scalaz.EphemeralStream[A]))(scalaz.IterV[A,(R, scalaz.IterV[A, _])], scalaz.EphemeralStream[A])">fold</span><span title="(scalaz.IterV[A,(R, scalaz.IterV[A, _])], scalaz.EphemeralStream[A]) @unchecked" class="delimiter">(</span>
	  done = <span class="delimiter">(</span><a title="=&gt; (R, scalaz.IterV[A, _])" id="scales.utils.iteratee;Iteratees.enumToMany.loop.x$5.$anonfun.a">a</a>, <a title="=&gt; scalaz.Input[A]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.x$5.$anonfun.y">y</a><span title="=&gt; scalaz.Input[A]" class="delimiter">)</span> =&gt; <span title="(_1: Iteratees.this.ResumableIter[A,R], _2: scalaz.EphemeralStream[A])(Iteratees.this.ResumableIter[A,R], scalaz.EphemeralStream[A])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.c" title="Iteratees.this.ResumableIter[A,R]">c</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.s" title="()scalaz.EphemeralStream[A]">s</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,<span class="comment">// send it back, shouldn't be possible to get here anyway due to while test</span>
	  cont =
	    <a title="scalaz.Input[A] =&gt; scalaz.IterV[A,(R, scalaz.IterV[A, _])]" id="scales.utils.iteratee;Iteratees.enumToMany.loop.x$5.$anonfun.k">k</a> =&gt; <span class="delimiter">{</span>
	      <span class="comment">// println(&quot;got cont&quot;)</span>
	      <span class="keyword">val</span> <a title="A" id="scales.utils.iteratee;Iteratees.enumToMany.loop.x$5.$anonfun.head">head</a> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.cs" title="scalaz.EphemeralStream[A]">cs</a>.<span title="()A">head</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// if used in El it captures the byname not the value</span>
	      <span title="(_1: scalaz.IterV[A,(R, scalaz.IterV[A, _])], _2: scalaz.EphemeralStream[A])(scalaz.IterV[A,(R, scalaz.IterV[A, _])], scalaz.EphemeralStream[A])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.x$5.$anonfun.k" title="(v1: scalaz.Input[A])scalaz.IterV[A,(R, scalaz.IterV[A, _])]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="(e0: =&gt; A)scalaz.Input[A]">El</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.x$5.$anonfun.head" title="A">head</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.cs" title="scalaz.EphemeralStream[A]">cs</a>.<span title="()scalaz.EphemeralStream[A]">tail</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
	    <span class="delimiter">}</span>
	    <span class="delimiter">)</span>
	<a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.c" title="Iteratees.this.ResumableIter[A,R]">c</a> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.nc" title="Iteratees.this.ResumableIter[A,R]">nc</a>
	<a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.cs" title="scalaz.EphemeralStream[A]">cs</a> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.ncs" title="scalaz.EphemeralStream[A]">ncs</a>
      <span class="delimiter">}</span>
      <span title="(_1: Iteratees.this.ResumableIter[A,R], _2: () =&gt; scalaz.EphemeralStream[A])(Iteratees.this.ResumableIter[A,R], () =&gt; scalaz.EphemeralStream[A])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.c" title="Iteratees.this.ResumableIter[A,R]">c</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop.cs" title="scalaz.EphemeralStream[A]">cs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Call the toMany continuation function
     */</span>
    <span class="keyword">def</span> <a title="(x: scalaz.Input[E], toMany: scalaz.Input[E] =&gt; Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], k: scalaz.Input[A] =&gt; Iteratees.this.ResumableIter[A,R])Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext">pumpNext</a><span class="delimiter">(</span><a title="scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.x">x</a>: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span>, <a title="scalaz.Input[E] =&gt; Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.toMany">toMany</a>: scalaz.Input<span class="delimiter">[</span>E<span class="delimiter">]</span> =&gt; ResumableIter<span class="delimiter">[</span>E,EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="scalaz.Input[A] =&gt; Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.k">k</a>: scalaz.Input<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; ResumableIter<span class="delimiter">[</span>A,R<span class="delimiter">]</span> <span class="delimiter">)</span>: <span title="Iteratees.this.ResumableIter[E,R]">ResumableIter</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> = <span class="delimiter">{</span>

      <span class="comment">/*
       println(&quot;and then I was here &quot;+
         x(el = e =&gt; e.toString,
         empty = &quot;I'm empty &quot;,
         eof = &quot;I'm eof&quot;))
       */</span>
      <span class="keyword">val</span> <a title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.afterNewCall">afterNewCall</a> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.toMany" title="(v1: scalaz.Input[E])Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.x" title="scalaz.Input[E]">x</a><span class="delimiter">)</span>
      <span class="comment">//println(&quot;and then &quot; + afterNewCall)</span>

      <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.afterNewCall" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">afterNewCall</a>.<span title="(done: (=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; Iteratees.this.ResumableIter[E,R], cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]) =&gt; Iteratees.this.ResumableIter[E,R])Iteratees.this.ResumableIter[E,R]">fold</span><span class="delimiter">(</span>
	done = <span class="delimiter">(</span><a title="=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextContPair">nextContPair</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.rest">rest</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
	  <span class="comment">//println(&quot;was done wern't it&quot;)</span>
	  <span class="keyword">val</span> <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.e1" title="(scalaz.EphemeralStream[A], scalaz.IterV[E,_0])" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.x$6" title="scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.e1">e1</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.x$6" title="scalaz.IterV[E, _]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextCont">nextCont</a><span class="delimiter">)</span> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextContPair" title="=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _])">nextContPair</a>
	  <span class="keyword">val</span> <a title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextContR">nextContR</a> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextCont" title="scalaz.IterV[E, _]">nextCont</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" class="delimiter">[</span><span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">ResumableIter</span><span class="delimiter">[</span>E,scalaz.EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
	  <span title="Iteratees.this.ResumableIter[E,R]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.isEOF" title="(iter: scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])])Boolean">isEOF</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.afterNewCall" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">afterNewCall</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	    <span class="comment">//println(&quot;after is eof&quot;)</span>
	    <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.k" title="(v1: scalaz.Input[A])Iteratees.this.ResumableIter[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[A]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.empty" title="() =&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextContR" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">nextContR</a><span class="delimiter">)</span>
	  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
	    <span title="Iteratees.this.ResumableIter[E,R]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.e1" title="scalaz.EphemeralStream[A]">e1</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	      <span class="comment">//println(&quot;empty on nextcontr&quot;)</span>
	      <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.k" title="(v1: scalaz.Input[A])Iteratees.this.ResumableIter[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[A]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.empty" title="() =&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextContR" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">nextContR</a><span class="delimiter">)</span>
	    <span class="delimiter">}</span>
	    <span class="keyword">else</span> <span class="delimiter">{</span>
	      <span class="keyword">val</span> <a title="A" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.h">h</a> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.e1" title="scalaz.EphemeralStream[A]">e1</a>.<span title="()A">head</span><span class="delimiter">(</span><span class="delimiter">)</span>
	      <span class="comment">// println(&quot;some data after all &quot;+h)</span>
	      <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.k" title="(v1: scalaz.Input[A])Iteratees.this.ResumableIter[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="(e0: =&gt; A)scalaz.Input[A]">El</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.h" title="A">h</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.e1" title="scalaz.EphemeralStream[A]">e1</a>.<span title="=&gt; () =&gt; scalaz.EphemeralStream[A]">tail</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.nextContR" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">nextContR</a><span class="delimiter">)</span>
	    <span class="delimiter">}</span>
	  <span class="delimiter">}</span>
	<span class="delimiter">}</span>,
	cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.enumToMany.pumpNext.$anonfun.k1">k1</a> =&gt; <span class="delimiter">{</span>
	  <span class="comment">//println(&quot;conted after here&quot;)</span>
	  <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.k" title="(v1: scalaz.Input[A])Iteratees.this.ResumableIter[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[A]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.empty" title="() =&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext.afterNewCall" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">afterNewCall</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * For Cont handling we must loop when there is more data left on the stream,
     * when not verify if the toMany has returned more data to process.
     */</span>
    <span class="keyword">def</span> <a title="(k: scalaz.Input[A] =&gt; Iteratees.this.ResumableIter[A,R], i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]])Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.contk">contk</a><span class="delimiter">(</span> <a title="scalaz.Input[A] =&gt; Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.k">k</a>: scalaz.Input<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; ResumableIter<span class="delimiter">[</span>A,R<span class="delimiter">]</span>,  <a title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.i">i</a>: <span title="Iteratees.this.ResumableIter[A,R]">ResumableIter</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span>, <a title="() =&gt; scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.s">s</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.toMany">toMany</a>: <span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">ResumableIter</span><span class="delimiter">[</span>E, EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">)</span>: <span title="Iteratees.this.ResumableIter[E,R]">ResumableIter</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span title="Iteratees.this.ResumableIter[E,R]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.s" title="()scalaz.EphemeralStream[A]">s</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	<span class="keyword">val</span> <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.ni" title="(Iteratees.this.ResumableIter[A,R], () =&gt; scalaz.EphemeralStream[A])" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.x$7" title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.ni">ni</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.x$7" title="() =&gt; scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.ns">ns</a><span class="delimiter">)</span> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.loop" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A])(Iteratees.this.ResumableIter[A,R], () =&gt; scalaz.EphemeralStream[A])">loop</a><span title="(Iteratees.this.ResumableIter[A,R], () =&gt; scalaz.EphemeralStream[A]) @unchecked" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.i" title="Iteratees.this.ResumableIter[A,R]">i</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.s" title="() =&gt; scalaz.EphemeralStream[A]">s</a><span class="delimiter">)</span>
	<span class="comment">//println(&quot;empty against the s &quot;+ni + &quot; &quot; + ns().isEmpty)</span>
	<span class="comment">//if (isDone(ni))</span>
	<a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.ni" title="Iteratees.this.ResumableIter[A,R]">ni</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.ns" title="() =&gt; scalaz.EphemeralStream[A]">ns</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">)</span> <span class="comment">// bad - should let a done exit early</span>
      <span class="delimiter">}</span> <span class="keyword">else</span>
	<span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(R, scalaz.IterV[E, _])])scalaz.IterV[E,(R, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span><span class="delimiter">(</span>x: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
	  <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x" title="(empty: =&gt; Iteratees.this.ResumableIter[E,R], el: (=&gt; E) =&gt; Iteratees.this.ResumableIter[E,R], eof: =&gt; Iteratees.this.ResumableIter[E,R])Iteratees.this.ResumableIter[E,R]">x</a><span class="delimiter">(</span> el = <a title="=&gt; E" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.e">e</a> =&gt; <span class="delimiter">{</span>
	    <span class="comment">//println(&quot;got a cont x el e &quot;+e)</span>
	    <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a>.<span title="(done: (=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; Iteratees.this.ResumableIter[E,R], cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]) =&gt; Iteratees.this.ResumableIter[E,R])Iteratees.this.ResumableIter[E,R]">fold</span> <span class="delimiter">(</span>
	      done = <span class="delimiter">(</span><a title="=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.a">a</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.y">y</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
		<span class="keyword">val</span> <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.e1" title="(scalaz.EphemeralStream[A], scalaz.IterV[E,_0])" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.x$8" title="scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.e1">e1</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.x$8" title="scalaz.IterV[E, _]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.nextContR">nextContR</a><span class="delimiter">)</span> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.a" title="=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _])">a</a>
		<span class="keyword">val</span> <a title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.nextCont">nextCont</a> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.nextContR" title="scalaz.IterV[E, _]">nextContR</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" class="delimiter">[</span><span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">ResumableIter</span><span class="delimiter">[</span>E,scalaz.EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
		<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Unexpected State for enumToMany - Cont but toMany is done&quot;)" class="string">&quot;Unexpected State for enumToMany - Cont but toMany is done&quot;</span><span class="delimiter">)</span>
	      <span class="delimiter">}</span>,
	      cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.toManyCont">toManyCont</a> =&gt; <span class="delimiter">{</span>
		<a href="#scales.utils.iteratee;Iteratees.enumToMany.pumpNext" title="(x: scalaz.Input[E], toMany: scalaz.Input[E] =&gt; Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], k: scalaz.Input[A] =&gt; Iteratees.this.ResumableIter[A,R])Iteratees.this.ResumableIter[E,R]">pumpNext</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x" title="scalaz.Input[E]">x</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$40.$anonfun.$anonfun.toManyCont" title="scalaz.Input[E] =&gt; scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]">toManyCont</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.k" title="scalaz.Input[A] =&gt; Iteratees.this.ResumableIter[A,R]">k</a><span class="delimiter">)</span>
	      <span class="delimiter">}</span>
	    <span class="delimiter">)</span>
	  <span class="delimiter">}</span>,
	    empty = <span class="delimiter">{</span>
	      <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><a title="() =&gt; Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$41" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.k" title="(v1: scalaz.Input[A])Iteratees.this.ResumableIter[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[A]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.empty" title="() =&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">)</span>
	    <span class="delimiter">}</span>,
	    eof = <span class="delimiter">{</span>
	      <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><a title="() =&gt; Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.contk.$anonfun.x$42" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.k" title="(v1: scalaz.Input[A])Iteratees.this.ResumableIter[A,R]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[A]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.empty" title="() =&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">)</span>
	    <span class="delimiter">}</span>
	  <span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="delimiter">}</span>

    <span class="comment">/**
     * Handle closed states in either dest or toMany, feed data back out when
     * dest signals it is Done.  .run triggers EOFs but in the case
     * of continuations the data is fake - triggered by doneWith itself.
     * internalEOF caters for this case.
     */</span>
    <span class="keyword">def</span> <a title="(a: (R, Iteratees.this.ResumableIter[A,R]), y: scalaz.Input[A], i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith">doneWith</a><span class="delimiter">(</span><a title="(R, Iteratees.this.ResumableIter[A,R])" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.a">a</a>: <span title="(R, Iteratees.this.ResumableIter[A,R])" class="delimiter">(</span>R, ResumableIter<span class="delimiter">[</span>A,R<span class="delimiter">]</span><span class="delimiter">)</span>, <a title="scalaz.Input[A]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.y">y</a>: <span title="scalaz.Input[A]">Input</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.i">i</a>: <span title="Iteratees.this.ResumableIter[A,R]">ResumableIter</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span>, <a title="() =&gt; scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.s">s</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.toMany">toMany</a>: <span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">ResumableIter</span><span class="delimiter">[</span>E, EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Boolean" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.internalEOF">internalEOF</a>: <span title="Boolean">Boolean</span> <span class="delimiter">)</span>: <span title="Iteratees.this.ResumableIter[E,R]">ResumableIter</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> = <span class="delimiter">{</span>

      <span class="keyword">val</span> <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.res" title="(R, Iteratees.this.ResumableIter[A,R])" class="delimiter">(</a><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.x$9" title="R" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.res">res</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.x$9" title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.nextCont">nextCont</a><span class="delimiter">)</span> = <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.a" title="(R, Iteratees.this.ResumableIter[A,R])">a</a>
      <span class="comment">// println(&quot;res is &quot;+ res)</span>

      <span class="keyword">val</span> <a title="Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.returnThis">returnThis</a> : <span title="Iteratees.this.ResumableIter[E,R]">ResumableIter</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> =
	<span title="scalaz.IterV[E,(R, scalaz.IterV[E, _])]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.isDone" title="(iter: scalaz.IterV[A,(R, scalaz.IterV[A, _])])Boolean">isDone</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.nextCont" title="Iteratees.this.ResumableIter[A,R]">nextCont</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#scales.utils.iteratee;Iteratees.isEOF" title="(iter: scalaz.IterV[A,(R, scalaz.IterV[A, _])])Boolean">isEOF</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.nextCont" title="Iteratees.this.ResumableIter[A,R]">nextCont</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
	    <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.isDone" title="(iter: scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])])Boolean">isDone</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#scales.utils.iteratee;Iteratees.isEOF" title="(iter: scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])])Boolean">isEOF</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">)</span><span class="delimiter">)</span>     <span title="(x: Boolean)Boolean">||</span> <span class="comment">// either eof then its not restartable</span>
	    <span class="delimiter">(</span><span title="scalaz.IterV.EOF.type">EOF</span>.<span title="(r: scalaz.Input[A])Boolean">unapply</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.y" title="scalaz.Input[A]">y</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.internalEOF" title="Boolean">internalEOF</a> <span class="delimiter">)</span>  <span class="comment">// or the source is out of elements</span>
	  <span class="delimiter">)</span> <span class="delimiter">{</span>

	  <span title="(a: =&gt; (R, scalaz.IterV[E, _]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(R, scalaz.IterV[E, _])]">Done</span><span class="delimiter">(</span><span title="(_1: R, _2: scalaz.IterV[E,R])(R, scalaz.IterV[E,R])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.res" title="R">res</a>, <span title="(a: =&gt; R, i: =&gt; scalaz.Input[E])scalaz.IterV[E,R]">Done</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.res" title="R">res</a>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>

	<span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
	  <span class="comment">// there is a value to pass back out</span>
	  <span title="(a: =&gt; (R, scalaz.IterV[E, _]), i: =&gt; scalaz.Input[E])scalaz.IterV[E,(R, scalaz.IterV[E, _])]">Done</span><span class="delimiter">(</span><span title="(_1: R, _2: scalaz.IterV[E,(R, scalaz.IterV[E, _])])(R, scalaz.IterV[E,(R, scalaz.IterV[E, _])])" class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.res" title="R">res</a>,
	    <span class="delimiter">{</span>
	      <span class="keyword">val</span> <a title="() =&gt; Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.returnThis.cont">cont</a> = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.nextCont" title="Iteratees.this.ResumableIter[A,R]">nextCont</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iteratees.this.ResumableIter[A,R]" class="delimiter">[</span><span title="Iteratees.this.ResumableIter[A,R]">ResumableIter</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span><span class="delimiter">]</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.s" title="() =&gt; scalaz.EphemeralStream[A]">s</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
	      <span class="keyword">val</span> <a title="scalaz.IterV[E,(R, scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.returnThis.n">n</a> = <span title="(f: scalaz.Input[E] =&gt; scalaz.IterV[E,(R, scalaz.IterV[E, _])])scalaz.IterV[E,(R, scalaz.IterV[E, _])]">Cont</span><span class="delimiter">(</span> <span class="delimiter">(</span>i: <span title="scalaz.Input[E]">Input</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
		<a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.returnThis.cont" title="()Iteratees.this.ResumableIter[E,R]">cont</a><span class="delimiter">(</span><span class="delimiter">)</span>
	      <span class="delimiter">}</span><span class="delimiter">)</span>

	      <span title="scalaz.IterV[E,(R, scalaz.IterV[E, _])]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.s" title="()scalaz.EphemeralStream[A]">s</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
		<span class="comment">// need to process this res but force another to be</span>
		<span class="comment">// calculated before it is returned to the enumerator</span>
		<a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.returnThis.n" title="scalaz.IterV[E,(R, scalaz.IterV[E, _])]">n</a>
	      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
		<span class="comment">// still data to process</span>
		<a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.returnThis.cont" title="()Iteratees.this.ResumableIter[E,R]">cont</a><span class="delimiter">(</span><span class="delimiter">)</span>
	      <span class="delimiter">}</span>
	    <span class="delimiter">}</span><span class="delimiter">)</span>, <span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">Empty</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>

      <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><span title="scalaz.IterV.EOF.type">EOF</span>.<span title="(r: scalaz.Input[A])Boolean">unapply</span><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.y" title="scalaz.Input[A]">y</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.internalEOF" title="Boolean">internalEOF</a><span class="delimiter">)</span> <span class="delimiter">{</span>
	<span class="comment">// signal the end here to toMany, don't care about result</span>
	<a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a>.<span title="(done: (=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _]), =&gt; scalaz.Input[E]) =&gt; Boolean, cont: (scalaz.Input[E] =&gt; scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]) =&gt; Boolean)Boolean">fold</span><span class="delimiter">(</span>done= <span class="delimiter">(</span><a title="=&gt; (scalaz.EphemeralStream[A], scalaz.IterV[E, _])" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.$anonfun.a1">a1</a>, <a title="=&gt; scalaz.Input[E]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.$anonfun.y1">y1</a><span title="=&gt; scalaz.Input[E]" class="delimiter">)</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>,
		    cont = <a title="scalaz.Input[E] =&gt; scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]" id="scales.utils.iteratee;Iteratees.enumToMany.doneWith.$anonfun.k">k</a> =&gt; <span class="delimiter">{</span>
		      <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.$anonfun.k" title="(v1: scalaz.Input[E])scalaz.IterV[E,(scalaz.EphemeralStream[A], scalaz.IterV[E, _])]">k</a><span class="delimiter">(</span><span title="scalaz.IterV.type">IterV</span>.<span title="[E]=&gt; scalaz.Input[E]">EOF</span><span title="scalaz.Input[E]" class="delimiter">[</span><a href="#scales.utils.iteratee;Iteratees.enumToMany;E" title="E">E</a><span class="delimiter">]</span><span class="delimiter">)</span>; <span title="Boolean(false)" class="keyword">false</span>
		    <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith.returnThis" title="Iteratees.this.ResumableIter[E,R]">returnThis</a>

    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]" id="scales.utils.iteratee;Iteratees.enumToMany.next">next</a><span class="delimiter">(</span> <a title="Iteratees.this.ResumableIter[A,R]" id="scales.utils.iteratee;Iteratees.enumToMany.next.i">i</a>: <span title="Iteratees.this.ResumableIter[A,R]">ResumableIter</span><span class="delimiter">[</span>A,R<span class="delimiter">]</span>, <a title="() =&gt; scalaz.EphemeralStream[A]" id="scales.utils.iteratee;Iteratees.enumToMany.next.s">s</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]" id="scales.utils.iteratee;Iteratees.enumToMany.next.toMany">toMany</a>: <span title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">ResumableIter</span><span class="delimiter">[</span>E, EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Boolean" id="scales.utils.iteratee;Iteratees.enumToMany.next$default$4">internalEOF</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">)</span>: <span title="Iteratees.this.ResumableIter[E,R]">ResumableIter</span><span class="delimiter">[</span>E, R<span class="delimiter">]</span> =

      <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.i" title="Iteratees.this.ResumableIter[A,R]">i</a>.<span title="(done: (=&gt; (R, scalaz.IterV[A, _]), =&gt; scalaz.Input[A]) =&gt; Iteratees.this.ResumableIter[E,R], cont: (scalaz.Input[A] =&gt; scalaz.IterV[A,(R, scalaz.IterV[A, _])]) =&gt; Iteratees.this.ResumableIter[E,R])Iteratees.this.ResumableIter[E,R]">fold</span><span class="delimiter">(</span>
	done = <span class="delimiter">(</span><a title="=&gt; (R, scalaz.IterV[A, _])" id="scales.utils.iteratee;Iteratees.enumToMany.next.$anonfun.a">a</a>, <a title="=&gt; scalaz.Input[A]" id="scales.utils.iteratee;Iteratees.enumToMany.next.$anonfun.y">y</a><span title="=&gt; scalaz.Input[A]" class="delimiter">)</span> =&gt; <a href="#scales.utils.iteratee;Iteratees.enumToMany.doneWith" title="(a: (R, Iteratees.this.ResumableIter[A,R]), y: scalaz.Input[A], i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">doneWith</a><span class="delimiter">(</span>
	  <span class="comment">// oh for recursive types</span>
	  <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.$anonfun.a" title="=&gt; (R, scalaz.IterV[A, _])">a</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="(R, Iteratees.this.ResumableIter[A,R])" class="delimiter">[</span><span title="(R, Iteratees.this.ResumableIter[A,R])" class="delimiter">(</span>R, ResumableIter<span class="delimiter">[</span>A, R<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.$anonfun.y" title="=&gt; scalaz.Input[A]">y</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.i" title="Iteratees.this.ResumableIter[A,R]">i</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.s" title="() =&gt; scalaz.EphemeralStream[A]">s</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next$default$4" title="Boolean">internalEOF</a><span class="delimiter">)</span>,
	cont =
	  <a title="scalaz.Input[A] =&gt; scalaz.IterV[A,(R, scalaz.IterV[A, _])]" id="scales.utils.iteratee;Iteratees.enumToMany.next.$anonfun.k">k</a> =&gt; <span class="delimiter">{</span>
	    <a href="#scales.utils.iteratee;Iteratees.enumToMany.contk" title="(k: scalaz.Input[A] =&gt; Iteratees.this.ResumableIter[A,R], i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]])Iteratees.this.ResumableIter[E,R]">contk</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.next.$anonfun.k" title="scalaz.Input[A] =&gt; scalaz.IterV[A,(R, scalaz.IterV[A, _])]">k</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.i" title="Iteratees.this.ResumableIter[A,R]">i</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.s" title="() =&gt; scalaz.EphemeralStream[A]">s</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.next.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">)</span>
	  <span class="delimiter">}</span>
      <span class="delimiter">)</span>

    <a href="#scales.utils.iteratee;Iteratees.enumToMany.next" title="(i: Iteratees.this.ResumableIter[A,R], s: () =&gt; scalaz.EphemeralStream[A], toMany: Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]], internalEOF: Boolean)Iteratees.this.ResumableIter[E,R]">next</a><span class="delimiter">(</span><a href="#scales.utils.iteratee;Iteratees.enumToMany.dest" title="Iteratees.this.ResumableIter[A,R]">dest</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.empty" title="() =&gt; scalaz.EphemeralStream[scalaz.Scalaz.⊥]{def tail: () =&gt; scalaz.Scalaz.⊥}">empty</a>, <a href="#scales.utils.iteratee;Iteratees.enumToMany.toMany" title="Iteratees.this.ResumableIter[E,scalaz.EphemeralStream[A]]">toMany</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
