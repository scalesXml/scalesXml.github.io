<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\equals\XmlComparisons.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml.equals

<span class="keyword">import</span> scales.xml.<span class="delimiter">{</span>QName, Elem, Attribs, Attributes, Attribute, XmlItem, Text, PI, CData, Comment, PullType, EndElem, Misc, Miscs, DocLike, impl<span class="delimiter">}</span>

<span class="keyword">import</span> impl.EqualsHelpers

<span class="keyword">import</span> <a href="XmlEquals.scala.html#scales.xml.equals.XmlEquals" title="scales.xml.equals.XmlEquals.type">XmlEquals</a>._

<span class="keyword">import</span> scalaz.<span title="scalaz.Equal.type">Equal</span>._
<span class="keyword">import</span> scalaz._
<span class="keyword">import</span> <span title="scalaz.Scalaz.type">Scalaz</span>._

<span class="keyword">import</span> <a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference" title="scales.xml.equals.SomeDifference.type">SomeDifference</a>.noCalculation

<span class="comment">/**
 * Like Equals but also gives a path in addition to the fun reason
 * 
 */</span> 
<span class="keyword">trait</span> <a title="trait XmlComparison[-T] extends AnyRef" id="scales.xml.equals;XmlComparison">XmlComparison</a><span class="delimiter">[</span>-<a title="" id="scales.xml.equals;XmlComparison;T">T</a><span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * Takes the context for information reasons (works for streams as well).  The return is either None == boolean or the reason
   */</span> 
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: T, right: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="scales.xml.equals;XmlComparison.compare">compare</a><span class="delimiter">(</span> <a title="Boolean" id="scales.xml.equals;XmlComparison.compare.calculate">calculate</a> : <span title="Boolean">Boolean</span> , <a title="scales.xml.equals.ComparisonContext" id="scales.xml.equals;XmlComparison.compare.context">context</a> : <a href="ComparisonContext.scala.html#scales.xml.equals;ComparisonContext" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="T" id="scales.xml.equals;XmlComparison.compare.left">left</a> : <a href="#scales.xml.equals;XmlComparison;T" title="T">T</a>, <a title="T" id="scales.xml.equals;XmlComparison.compare.right">right</a> : <a href="#scales.xml.equals;XmlComparison;T" title="T">T</a><span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait DefaultQNameEquals extends AnyRef" id="scales.xml.equals;DefaultQNameEquals">DefaultQNameEquals</a> <span title="Unit" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="scalaz.Equal[scales.xml.QName]" id="scales.xml.equals;DefaultQNameEquals.qnameEqual">qnameEqual</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span> = <span title="(f: (scales.xml.QName, scales.xml.QName) =&gt; Boolean)scalaz.Equal[scales.xml.QName]">equal</span> <span class="delimiter">{</span> <span class="delimiter">(</span>a: <a href="../QName.scala.html#scales.xml;QName" title="scales.xml.QName">QName</a>, b: <a href="../QName.scala.html#scales.xml;QName" title="scales.xml.QName">QName</a><span class="delimiter">)</span> =&gt; <a href="#scales.xml.equals;DefaultQNameEquals.qnameEqual.$anonfun.a" title="scales.xml.QName">a</a> <a href="../QName.scala.html#scales.xml;QName.=:=" title="(other: scales.xml.QName)Boolean">=:=</a> <a href="#scales.xml.equals;DefaultQNameEquals.qnameEqual.$anonfun.b" title="scales.xml.QName">b</a> <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Only added to provide a complete `compare` set
 */</span> 
<span title="AnyRef" class="keyword">class</span> <a title="class QNameComparison extends AnyRef with scales.xml.equals.XmlComparison[scales.xml.QName]" id="scales.xml.equals;QNameComparison">QNameComparison</a><a href="#scales.xml.equals;QNameComparison" title="scales.xml.equals.QNameComparison" class="delimiter">(</a> <span class="keyword">implicit</span> <a title="scalaz.Equal[scales.xml.QName]" id="scales.xml.equals;QNameComparison.qe">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span> <span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.QName]">XmlComparison</a><span class="delimiter">[</span>QName<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.QName, right: scales.xml.QName)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="scales.xml.equals;QNameComparison.compare">compare</a><span class="delimiter">(</span> <a title="Boolean" id="scales.xml.equals;QNameComparison.compare.calculate">calculate</a> : <span title="Boolean">Boolean</span> , <a title="scales.xml.equals.ComparisonContext" id="scales.xml.equals;QNameComparison.compare.context">context</a> : <a href="ComparisonContext.scala.html#scales.xml.equals;ComparisonContext" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="scales.xml.QName" id="scales.xml.equals;QNameComparison.compare.left">left</a> : <a href="../QName.scala.html#scales.xml;QName" title="scales.xml.QName">QName</a>, <a title="scales.xml.QName" id="scales.xml.equals;QNameComparison.compare.right">right</a> : <a href="../QName.scala.html#scales.xml;QName" title="scales.xml.QName">QName</a> <span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;QNameComparison.compare.left" title="(x: =&gt; scales.xml.QName)scalaz.Identity[scales.xml.QName]">left</a> <a href="#scales.xml.equals;QNameComparison.qe" title="(a: scales.xml.QName)(implicit e: scalaz.Equal[scales.xml.QName])Boolean">===</a> <a href="#scales.xml.equals;QNameComparison.compare.right" title="scales.xml.QName">right</a><span class="delimiter">)</span>
      <span title="None.type">None</span>
    <span class="keyword">else</span>
      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;QNameComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span>
	<span title="(x: (scales.xml.equals.QNameDifference, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.QNameDifference, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.QNameDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.QNameDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#scales.xml.equals;QNameDifference" title="(left: scales.xml.QName, right: scales.xml.QName)scales.xml.equals.QNameDifference">QNameDifference</a><span class="delimiter">(</span><a href="#scales.xml.equals;QNameComparison.compare.left" title="scales.xml.QName">left</a>, <a href="#scales.xml.equals;QNameComparison.compare.right" title="scales.xml.QName">right</a><span class="delimiter">)</span>, <a href="#scales.xml.equals;QNameComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span>
	<a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait QNameEquals extends AnyRef" id="scales.xml.equals;QNameEquals">QNameEquals</a> <span title="Unit" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scales.xml.equals.QNameEquals.qnameComparison : (implicit qe: scalaz.Equal[scales.xml.QName])scales.xml.equals.XmlComparison[scales.xml.QName]" id="scales.xml.equals;QNameEquals.qnameComparison">qnameComparison</a><span class="delimiter">(</span> <span class="keyword">implicit</span> <a title="scalaz.Equal[scales.xml.QName]" id="scales.xml.equals;QNameEquals.qnameComparison.qe">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span> <span class="delimiter">)</span> : <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.QName]">XmlComparison</a><span class="delimiter">[</span>QName<span class="delimiter">]</span> = <span title="scales.xml.equals.QNameComparison" class="keyword">new</span> <a href="#scales.xml.equals;QNameComparison" title="scales.xml.equals.QNameComparison">QNameComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scales.xml.equals;QNameEquals.qnameComparison.qe" title="scalaz.Equal[scales.xml.QName]">qe</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">object</span> <a title="scales.xml.equals.QNameEquals.type" id="scales.xml.equals.QNameEquals">QNameEquals</a> <a href="#scales.xml.equals.QNameEquals" title="scales.xml.equals.QNameEquals.type" class="keyword">extends</a> <a href="#scales.xml.equals;DefaultQNameEquals" title="scales.xml.equals.DefaultQNameEquals">DefaultQNameEquals</a> <span class="keyword">with</span> <a href="#scales.xml.equals;QNameEquals" title="scales.xml.equals.QNameEquals">QNameEquals</a> <span class="delimiter">{</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DefaultQNameToken extends AnyRef" id="scales.xml.equals;DefaultQNameToken">DefaultQNameToken</a> <span title="Unit" class="delimiter">{</span>

  <span class="comment">/**
   * Finally decides if a Text/CData node or Attribute value should be compared as if containing a qname (prefix:local). 
   */</span> 
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="scales.xml.equals;DefaultQNameToken.defaultQNameTokenComparison">defaultQNameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span> = <span title="None.type">None</span>

<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">object</span> <a title="scales.xml.equals.DefaultQNameToken.type" id="scales.xml.equals.DefaultQNameToken">DefaultQNameToken</a> <a href="#scales.xml.equals.DefaultQNameToken" title="scales.xml.equals.DefaultQNameToken.type" class="keyword">extends</a> <a href="#scales.xml.equals;DefaultQNameToken" title="scales.xml.equals.DefaultQNameToken">DefaultQNameToken</a> <span class="delimiter">{</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Compares XmlItems, providing Some qnameTokenComparison will force that to be used to decide if qname comparison should be used or not
 */</span> 
<span class="keyword">class</span> <a title="class XmlItemComparison extends AnyRef with scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="scales.xml.equals;XmlItemComparison">XmlItemComparison</a><a href="#scales.xml.equals;XmlItemComparison" title="scales.xml.equals.XmlItemComparison" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="scales.xml.equals;XmlItemComparison.qnameTokenComparison">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.XmlItem, right: scales.xml.XmlItem)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="scales.xml.equals;XmlItemComparison.compare">compare</a><span class="delimiter">(</span> <a title="Boolean" id="scales.xml.equals;XmlItemComparison.compare.calculate">calculate</a> : <span title="Boolean">Boolean</span> , <a title="scales.xml.equals.ComparisonContext" id="scales.xml.equals;XmlItemComparison.compare.context">context</a> : <a href="ComparisonContext.scala.html#scales.xml.equals;ComparisonContext" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="scales.xml.XmlItem" id="scales.xml.equals;XmlItemComparison.compare.left">left</a> : <a href="../XmlTypes.scala.html#scales.xml;XmlItem" title="scales.xml.XmlItem">XmlItem</a>, <a title="scales.xml.XmlItem" id="scales.xml.equals;XmlItemComparison.compare.right">right</a> : <a href="../XmlTypes.scala.html#scales.xml;XmlItem" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(str: String, str2: String, isQNameRelevant: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="scales.xml.equals;XmlItemComparison.compare.check">check</a><span class="delimiter">(</span> <a title="String" id="scales.xml.equals;XmlItemComparison.compare.check.str">str</a> : <span title="String">String</span>, <a title="String" id="scales.xml.equals;XmlItemComparison.compare.check.str2">str2</a> : <span title="String">String</span>, <a title="Boolean" id="scales.xml.equals;XmlItemComparison.compare.check$default$3">isQNameRelevant</a> : <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Boolean" id="scales.xml.equals;XmlItemComparison.compare.check.res">res</a> = 
	<span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.check$default$3" title="Boolean">isQNameRelevant</a><span class="delimiter">)</span>
	  <a href="XmlEquals.scala.html#scales.xml.equals;XmlEquals.compareTokens" title="(context: scales.xml.equals.ComparisonContext, qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean], str: String, str2: String)Boolean">compareTokens</a><span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#scales.xml.equals;XmlItemComparison.qnameTokenComparison" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a>, <a href="#scales.xml.equals;XmlItemComparison.compare.check.str" title="String">str</a>, <a href="#scales.xml.equals;XmlItemComparison.compare.check.str2" title="String">str2</a><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <a href="#scales.xml.equals;XmlItemComparison.compare.check.str" title="String">str</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#scales.xml.equals;XmlItemComparison.compare.check.str2" title="String">str2</a> <span class="comment">// qnames don't make sense for non Text / CData</span>

      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.check.res" title="Boolean">res</a><span class="delimiter">)</span> <span title="None.type">None</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
	<span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span> 
	  <span title="(x: (scales.xml.equals.ItemDifference, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.ItemDifference, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.ItemDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.ItemDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#scales.xml.equals;ItemDifference" title="(left: scales.xml.XmlItem, right: scales.xml.XmlItem)scales.xml.equals.ItemDifference">ItemDifference</a><span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.left" title="scales.xml.XmlItem">left</a>, <a href="#scales.xml.equals;XmlItemComparison.compare.right" title="scales.xml.XmlItem">right</a><span class="delimiter">)</span>, <a href="#scales.xml.equals;XmlItemComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.left" title="scales.xml.XmlItem">left</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scales.xml.equals;XmlItemComparison.compare.right" title="scales.xml.XmlItem">right</a><span class="delimiter">)</span>
      <span title="None.type">None</span> <span class="comment">// worth checking</span>
    <span class="keyword">else</span> <span title="(_1: scales.xml.XmlItem, _2: scales.xml.XmlItem)(scales.xml.XmlItem, scales.xml.XmlItem)" class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.left" title="scales.xml.XmlItem">left</a>, <a href="#scales.xml.equals;XmlItemComparison.compare.right" title="scales.xml.XmlItem">right</a><span class="delimiter">)</span> <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">match</span> <span class="delimiter">{</span> <span class="comment">// we have to do it on types as well</span>
      <span class="keyword">case</span> <span class="delimiter">(</span>Text<span class="delimiter">(</span><span title="String">valu</span><span class="delimiter">)</span>, Text<span class="delimiter">(</span><span title="String">value</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scales.xml.equals;XmlItemComparison.compare.check" title="(str: String, str2: String, isQNameRelevant: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">check</a><span class="delimiter">(</span><span title="String">valu</span>, <span title="String">value</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../XmlTypes.scala.html#scales.xml.Comment.unapply" title="(cmt: scales.xml.Comment)Some[String]">Comment</a><span class="delimiter">(</span><a title="String" id="scales.xml.equals;XmlItemComparison.compare.com">com</a><span class="delimiter">)</span>, <a href="../XmlTypes.scala.html#scales.xml.Comment.unapply" title="(cmt: scales.xml.Comment)Some[String]">Comment</a><span class="delimiter">(</span><a title="String" id="scales.xml.equals;XmlItemComparison.compare.comm">comm</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scales.xml.equals;XmlItemComparison.compare.check" title="(str: String, str2: String, isQNameRelevant: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">check</a><span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.com" title="String">com</a>, <a href="#scales.xml.equals;XmlItemComparison.compare.comm" title="String">comm</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../XmlTypes.scala.html#scales.xml.CData.unapply" title="(cmt: scales.xml.CData)Some[String]">CData</a><span class="delimiter">(</span><a title="String" id="scales.xml.equals;XmlItemComparison.compare.cd">cd</a><span class="delimiter">)</span>, <a href="../XmlTypes.scala.html#scales.xml.CData.unapply" title="(cmt: scales.xml.CData)Some[String]">CData</a><span class="delimiter">(</span><a title="String" id="scales.xml.equals;XmlItemComparison.compare.cda">cda</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scales.xml.equals;XmlItemComparison.compare.check" title="(str: String, str2: String, isQNameRelevant: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">check</a><span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.cd" title="String">cd</a>, <a href="#scales.xml.equals;XmlItemComparison.compare.cda" title="String">cda</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../XmlTypes.scala.html#scales.xml.PI.unapply" title="(pi: scales.xml.PI)Some[(String, String)]">PI</a><span class="delimiter">(</span><a title="String" id="scales.xml.equals;XmlItemComparison.compare.ta">ta</a>, <span title="String">valu</span><span class="delimiter">)</span>, <a href="../XmlTypes.scala.html#scales.xml.PI.unapply" title="(pi: scales.xml.PI)Some[(String, String)]">PI</a><span class="delimiter">(</span><a title="String" id="scales.xml.equals;XmlItemComparison.compare.tar">tar</a>, <span title="String">value</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; 
	<a href="#scales.xml.equals;XmlItemComparison.compare.check" title="(str: String, str2: String, isQNameRelevant: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">check</a><span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.ta" title="String">ta</a>, <a href="#scales.xml.equals;XmlItemComparison.compare.tar" title="String">tar</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">orElse</span> <a href="#scales.xml.equals;XmlItemComparison.compare.check" title="(str: String, str2: String, isQNameRelevant: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">check</a><span class="delimiter">(</span><span title="String">valu</span>,  <span title="String">value</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt; 
	<span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;XmlItemComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span>
	  <span title="(x: (scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.DifferentTypes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#scales.xml.equals;DifferentTypes" title="(left: scales.xml.PullType, right: scales.xml.PullType)scales.xml.equals.DifferentTypes">DifferentTypes</a><span class="delimiter">(</span><a href="../parser/pull/XmlPull.scala.html#scales.xml.parser.pull;XmlPulls.toLeft" title="implicit scales.xml.parser.pull.XmlPulls.toLeft : (ev: scales.xml.XmlEvent)scala.util.Left[scales.xml.XmlEvent,Nothing]">left</a>, <a href="../parser/pull/XmlPull.scala.html#scales.xml.parser.pull;XmlPulls.toLeft" title="implicit scales.xml.parser.pull.XmlPulls.toLeft : (ev: scales.xml.XmlEvent)scala.util.Left[scales.xml.XmlEvent,Nothing]">right</a><span class="delimiter">)</span>, <a href="#scales.xml.equals;XmlItemComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DefaultItemEquals extends AnyRef" id="scales.xml.equals;DefaultItemEquals">DefaultItemEquals</a> <span title="Unit" class="delimiter">{</span>

  <span class="comment">/**
   * creates an XmlItem comparison given a given qnameTokenComparison function (should it compare using qnames or not).
   */</span> 
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scales.xml.equals.DefaultItemEquals.defaultXmlItemComparison : (implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="scales.xml.equals;DefaultItemEquals.defaultXmlItemComparison">defaultXmlItemComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="scales.xml.equals;DefaultItemEquals.defaultXmlItemComparison.qnameTokenComparison">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span> = <span title="scales.xml.equals.XmlItemComparison" class="keyword">new</span> <a href="#scales.xml.equals;XmlItemComparison" title="scales.xml.equals.XmlItemComparison">XmlItemComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scales.xml.equals;DefaultItemEquals.defaultXmlItemComparison.qnameTokenComparison" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span>
  
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">object</span> <a title="scales.xml.equals.ItemEquals.type" id="scales.xml.equals.ItemEquals">ItemEquals</a> <a href="#scales.xml.equals.ItemEquals" title="scales.xml.equals.ItemEquals.type" class="keyword">extends</a> <a href="#scales.xml.equals;DefaultItemEquals" title="scales.xml.equals.DefaultItemEquals">DefaultItemEquals</a> <span class="delimiter">{</span><span class="delimiter">}</span>

<span class="comment">/**
 * Comparison between attributes, requires an Equal type class for QNames
 */</span> 
<span class="keyword">class</span> <a title="class AttributeComparison extends AnyRef with scales.xml.equals.XmlComparison[scales.xml.Attribute]" id="scales.xml.equals;AttributeComparison">AttributeComparison</a><a href="#scales.xml.equals;AttributeComparison" title="scales.xml.equals.AttributeComparison" class="delimiter">(</a><span class="keyword">implicit</span> <a title="scalaz.Equal[scales.xml.QName]" id="scales.xml.equals;AttributeComparison.eqn">eqn</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="scales.xml.equals;AttributeComparison.qnameTokenComparison">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.Attribute]">XmlComparison</a><span class="delimiter">[</span>Attribute<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../impl/EqualsHelpers.scala.html#scales.xml.impl.EqualsHelpers" title="scales.xml.impl.EqualsHelpers.type">EqualsHelpers</a>.toQName

  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.Attribute, right: scales.xml.Attribute)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="scales.xml.equals;AttributeComparison.compare">compare</a><span class="delimiter">(</span> <a title="Boolean" id="scales.xml.equals;AttributeComparison.compare.calculate">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="scales.xml.equals;AttributeComparison.compare.context">context</a> : <a href="ComparisonContext.scala.html#scales.xml.equals;ComparisonContext" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="scales.xml.Attribute" id="scales.xml.equals;AttributeComparison.compare.left">left</a>: <a href="../XmlTypes.scala.html#scales.xml;Attribute" title="scales.xml.Attribute">Attribute</a>, <a title="scales.xml.Attribute" id="scales.xml.equals;AttributeComparison.compare.right">right</a> : <a href="../XmlTypes.scala.html#scales.xml;Attribute" title="scales.xml.Attribute">Attribute</a><span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributeComparison.compare.left" title="scales.xml.Attribute">left</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scales.xml.equals;AttributeComparison.compare.right" title="scales.xml.Attribute">right</a><span class="delimiter">)</span>
      <span title="None.type">None</span>
    <span class="keyword">else</span> <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#scales.xml.equals;AttributeComparison.eqn" title="scalaz.Equal[scales.xml.QName]">eqn</a>.<span title="(a1: scales.xml.QName, a2: scales.xml.QName)Boolean">equal</span><span class="delimiter">(</span><a href="../impl/EqualsHelpers.scala.html#scales.xml.impl.EqualsHelpers.toQName" title="implicit scales.xml.impl.EqualsHelpers.toQName : (attribQName: scales.xml.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#scales.xml.equals;AttributeComparison.compare.left" title="scales.xml.Attribute">left</a>.<a href="../XmlTypes.scala.html#scales.xml;Attribute.name" title="=&gt; scales.xml.AttributeQName">name</a><span class="delimiter">)</span>, <a href="../impl/EqualsHelpers.scala.html#scales.xml.impl.EqualsHelpers.toQName" title="implicit scales.xml.impl.EqualsHelpers.toQName : (attribQName: scales.xml.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#scales.xml.equals;AttributeComparison.compare.right" title="scales.xml.Attribute">right</a>.<a href="../XmlTypes.scala.html#scales.xml;Attribute.name" title="=&gt; scales.xml.AttributeQName">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributeComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span>
	<span title="(x: (scales.xml.equals.AttributeNameDifference, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.AttributeNameDifference, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.AttributeNameDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.AttributeNameDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#scales.xml.equals;AttributeNameDifference" title="(left: scales.xml.Attribute, right: scales.xml.Attribute)scales.xml.equals.AttributeNameDifference">AttributeNameDifference</a><span class="delimiter">(</span> <a href="#scales.xml.equals;AttributeComparison.compare.left" title="scales.xml.Attribute">left</a>, <a href="#scales.xml.equals;AttributeComparison.compare.right" title="scales.xml.Attribute">right</a><span class="delimiter">)</span>, <a href="#scales.xml.equals;AttributeComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span>
	<a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="XmlEquals.scala.html#scales.xml.equals;XmlEquals.compareTokens" title="(context: scales.xml.equals.ComparisonContext, qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean], str: String, str2: String)Boolean">compareTokens</a><span class="delimiter">(</span> <a href="#scales.xml.equals;AttributeComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#scales.xml.equals;AttributeComparison.qnameTokenComparison" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a>, <a href="#scales.xml.equals;AttributeComparison.compare.left" title="scales.xml.Attribute">left</a>.<a href="../XmlTypes.scala.html#scales.xml;Attribute.value" title="=&gt; String">value</a>, <a href="#scales.xml.equals;AttributeComparison.compare.right" title="scales.xml.Attribute">right</a>.<a href="../XmlTypes.scala.html#scales.xml;Attribute.value" title="=&gt; String">value</a> <span class="delimiter">)</span><span class="delimiter">)</span>
	<span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributeComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span>
	  <span title="(x: (scales.xml.equals.AttributeValueDifference, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.AttributeValueDifference, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.AttributeValueDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.AttributeValueDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#scales.xml.equals;AttributeValueDifference" title="(left: scales.xml.Attribute, right: scales.xml.Attribute)scales.xml.equals.AttributeValueDifference">AttributeValueDifference</a><span class="delimiter">(</span> <a href="#scales.xml.equals;AttributeComparison.compare.left" title="scales.xml.Attribute">left</a>, <a href="#scales.xml.equals;AttributeComparison.compare.right" title="scales.xml.Attribute">right</a><span class="delimiter">)</span>, <a href="#scales.xml.equals;AttributeComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
      <span class="keyword">else</span>
	<span title="None.type">None</span> <span class="comment">// a ok</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DefaultAttributeEquals extends AnyRef" id="scales.xml.equals;DefaultAttributeEquals">DefaultAttributeEquals</a> <span title="Unit" class="delimiter">{</span>
  <span class="comment">/**
   * QNames are not compared with prefix
   */</span> 
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scales.xml.equals.DefaultAttributeEquals.defaultAttributeComparison : (implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.Attribute]" id="scales.xml.equals;DefaultAttributeEquals.defaultAttributeComparison">defaultAttributeComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Equal[scales.xml.QName]" id="scales.xml.equals;DefaultAttributeEquals.defaultAttributeComparison.qe">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="scales.xml.equals;DefaultAttributeEquals.defaultAttributeComparison.qnameTokenComparison">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.Attribute]">XmlComparison</a><span class="delimiter">[</span>Attribute<span class="delimiter">]</span> = <span title="scales.xml.equals.AttributeComparison" class="keyword">new</span> <a href="#scales.xml.equals;AttributeComparison" title="scales.xml.equals.AttributeComparison">AttributeComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scales.xml.equals;DefaultAttributeEquals.defaultAttributeComparison.qe" title="scalaz.Equal[scales.xml.QName]">qe</a>, <a href="#scales.xml.equals;DefaultAttributeEquals.defaultAttributeComparison.qnameTokenComparison" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span>
  
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">object</span> <a title="scales.xml.equals.AttributeEquals.type" id="scales.xml.equals.AttributeEquals">AttributeEquals</a> <a href="#scales.xml.equals.AttributeEquals" title="scales.xml.equals.AttributeEquals.type" class="keyword">extends</a> <a href="#scales.xml.equals;DefaultAttributeEquals" title="scales.xml.equals.DefaultAttributeEquals">DefaultAttributeEquals</a> <span class="keyword">with</span> <a href="#scales.xml.equals;DefaultQNameEquals" title="scales.xml.equals.DefaultQNameEquals">DefaultQNameEquals</a> <span class="delimiter">{</span><span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait ExactQName extends AnyRef" id="scales.xml.equals;ExactQName">ExactQName</a><span title="Unit" class="delimiter">{</span>
  <span class="comment">/**
   * QNames are compared with prefix
   */</span> 
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scales.xml.equals.ExactQName.prefixAttributeComparison : (implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.AttributeComparison" id="scales.xml.equals;ExactQName.prefixAttributeComparison">prefixAttributeComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="scales.xml.equals;ExactQName.prefixAttributeComparison.qnameTokenComparison">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="scales.xml.equals.AttributeComparison" class="keyword">new</span> <a href="#scales.xml.equals;AttributeComparison" title="scales.xml.equals.AttributeComparison">AttributeComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="(f: (scales.xml.QName, scales.xml.QName) =&gt; Boolean)scalaz.Equal[scales.xml.QName]">equal</span> <span class="delimiter">{</span> <span class="delimiter">(</span>a: <a href="../QName.scala.html#scales.xml;QName" title="scales.xml.QName">QName</a>, b: <a href="../QName.scala.html#scales.xml;QName" title="scales.xml.QName">QName</a><span class="delimiter">)</span> =&gt; <a href="#scales.xml.equals;ExactQName.prefixAttributeComparison.$anonfun.a" title="scales.xml.QName">a</a>.<a href="../QName.scala.html#scales.xml;QName.====" title="(other: scales.xml.QName)Boolean">====</a><span class="delimiter">(</span><a href="#scales.xml.equals;ExactQName.prefixAttributeComparison.$anonfun.b" title="scales.xml.QName">b</a><span class="delimiter">)</span> <span class="delimiter">}</span>, <a href="#scales.xml.equals;ExactQName.prefixAttributeComparison.qnameTokenComparison" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span>
  
<span class="delimiter">}</span>

<span class="comment">/**
 * Comparisoms built on exact qname comparisom, prefixes can be important for some systems
 */</span> 
<span title="AnyRef" class="keyword">object</span> <a title="scales.xml.equals.ExactQName.type" id="scales.xml.equals.ExactQName">ExactQName</a> <a href="#scales.xml.equals.ExactQName" title="scales.xml.equals.ExactQName.type" class="keyword">extends</a> <a href="#scales.xml.equals;ExactQName" title="scales.xml.equals.ExactQName">ExactQName</a> <span class="delimiter">{</span><span class="delimiter">}</span>

<span class="comment">/**
 * Comparison for attributes, requires a comparison for individual attributes, allowing flexible definitions of equality
 */</span> 
<span class="keyword">class</span> <a title="class AttributesComparison extends AnyRef with scales.xml.equals.XmlComparison[scales.xml.Attributes]" id="scales.xml.equals;AttributesComparison">AttributesComparison</a><a href="#scales.xml.equals;AttributesComparison" title="scales.xml.equals.AttributesComparison" class="delimiter">(</a> <span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.Attribute]" id="scales.xml.equals;AttributesComparison.ac">ac</a> : <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.Attribute]">XmlComparison</a><span class="delimiter">[</span>Attribute<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.Attributes]">XmlComparison</a><span class="delimiter">[</span>Attributes<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.Attributes, right: scales.xml.Attributes)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="scales.xml.equals;AttributesComparison.compare">compare</a><span class="delimiter">(</span> <a title="Boolean" id="scales.xml.equals;AttributesComparison.compare.calculate">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="scales.xml.equals;AttributesComparison.compare.context">context</a> : <a href="ComparisonContext.scala.html#scales.xml.equals;ComparisonContext" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="scales.xml.Attributes" id="scales.xml.equals;AttributesComparison.compare.left">left</a> : <a href="../../utils/collection/ArraySet.scala.html#scales.utils.collection;ArraySet" title="scales.xml.Attributes">Attributes</a>, <a title="scales.xml.Attributes" id="scales.xml.equals;AttributesComparison.compare.right">right</a> : <a href="../../utils/collection/ArraySet.scala.html#scales.utils.collection;ArraySet" title="scales.xml.Attributes">Attributes</a><span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="../impl/EqualsHelpers.scala.html#scales.xml.impl.EqualsHelpers" title="scales.xml.impl.EqualsHelpers.type">EqualsHelpers</a>._
    <span class="keyword">import</span> scales.utils.collectFirst

    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.left" title="scales.xml.Attributes">left</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scales.xml.equals;AttributesComparison.compare.right" title="scales.xml.Attributes">right</a><span class="delimiter">)</span>
      <span title="None.type">None</span>
    <span class="keyword">else</span>
    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.left" title="scales.xml.Attributes">left</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <a href="#scales.xml.equals;AttributesComparison.compare.right" title="scales.xml.Attributes">right</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span>
	<span title="(x: (scales.xml.equals.DifferentNumberOfAttributes, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.DifferentNumberOfAttributes, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.DifferentNumberOfAttributes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.DifferentNumberOfAttributes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#scales.xml.equals;DifferentNumberOfAttributes" title="(left: scales.xml.Attributes, right: scales.xml.Attributes)scales.xml.equals.DifferentNumberOfAttributes">DifferentNumberOfAttributes</a><span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.left" title="scales.xml.Attributes">left</a>,<a href="#scales.xml.equals;AttributesComparison.compare.right" title="scales.xml.Attributes">right</a><span class="delimiter">)</span>, <a href="#scales.xml.equals;AttributesComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span>
	<a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
      <span class="keyword">else</span> 
	<span class="comment">// get the first error</span>
	<a href="../../utils/collection/IterableUtils.scala.html#scales.utils.collection;IterableUtils.collectFirst" title="[A, B](in: Iterable[A])(f: A =&gt; Option[B])Option[B]">collectFirst</a><span title="(in: Iterable[scales.xml.Attribute])(f: scales.xml.Attribute =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="delimiter">[</span><a href="../XmlTypes.scala.html#scales.xml;Attribute" title="scales.xml.Attribute">Attribute</a>, <span title="(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)" class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.left" title="scales.xml.Attributes">left</a><span class="delimiter">)</span><span class="delimiter">{</span> 
	  <a title="scales.xml.Attribute" id="scales.xml.equals;AttributesComparison.compare.$anonfun.x1">x1</a> =&gt;
	    <a href="../../utils/collection/ArraySet.scala.html#scales.utils.collection;ArraySet.apply" title="(b: scales.xml.AttributeQName)(implicit equiv: scales.utils.Equiv[scales.xml.QName], implicit viewA: scales.xml.Attribute =&gt; scales.xml.QName, implicit viewB: scales.xml.AttributeQName =&gt; scales.xml.QName)Option[scales.xml.Attribute]">right</a><a href="../impl/EqualsHelpers.scala.html#scales.xml.impl.EqualsHelpers.qnameEquiv" title="(o: Option[scales.xml.Attribute])scalaz.OptionW[scales.xml.Attribute]" class="delimiter">(</a> <a href="#scales.xml.equals;AttributesComparison.compare.$anonfun.x1" title="scales.xml.Attribute">x1</a>.<a href="../XmlTypes.scala.html#scales.xml;Attribute.name" title="=&gt; scales.xml.AttributeQName">name</a> <span class="delimiter">)</span>.<span title="(some: scales.xml.Attribute =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)], none: =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">cata</span><span class="delimiter">(</span> <a title="scales.xml.Attribute" id="scales.xml.equals;AttributesComparison.compare.$anonfun.$anonfun.x2">x2</a> =&gt; <span class="delimiter">{</span><span class="comment">// if we have it check the attributes</span>
	      <span class="keyword">val</span> <a title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="scales.xml.equals;AttributesComparison.compare.$anonfun.$anonfun.r">r</a> = <a href="#scales.xml.equals;AttributesComparison.ac" title="scales.xml.equals.XmlComparison[scales.xml.Attribute]">ac</a>.<a href="#scales.xml.equals;XmlComparison.compare" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.Attribute, right: scales.xml.Attribute)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.calculate" title="Boolean">calculate</a>, <a href="#scales.xml.equals;AttributesComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#scales.xml.equals;AttributesComparison.compare.$anonfun.x1" title="scales.xml.Attribute">x1</a>, <a href="#scales.xml.equals;AttributesComparison.compare.$anonfun.$anonfun.x2" title="scales.xml.Attribute">x2</a><span class="delimiter">)</span>
	      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.$anonfun.$anonfun.r" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">r</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
		<span class="comment">// it can only be AttributeValueDifference</span>
		<span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span>
		  <span title="(x: (scales.xml.equals.DifferentValueAttributes, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.DifferentValueAttributes, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span> <span title="(_1: scales.xml.equals.DifferentValueAttributes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.DifferentValueAttributes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#scales.xml.equals;DifferentValueAttributes" title="(left: scales.xml.Attributes, right: scales.xml.Attributes, differentValue: scales.xml.Attribute)scales.xml.equals.DifferentValueAttributes">DifferentValueAttributes</a><span class="delimiter">(</span> <a href="#scales.xml.equals;AttributesComparison.compare.left" title="scales.xml.Attributes">left</a>, <a href="#scales.xml.equals;AttributesComparison.compare.right" title="scales.xml.Attributes">right</a>, <a href="#scales.xml.equals;AttributesComparison.compare.$anonfun.x1" title="scales.xml.Attribute">x1</a> <span class="delimiter">)</span>, <a href="#scales.xml.equals;AttributesComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span> <span class="delimiter">)</span>
		<span class="keyword">else</span>
		  <a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
	      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="None.type">None</span>
	    <span class="delimiter">}</span> , 
	    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.equals;AttributesComparison.compare.calculate" title="Boolean">calculate</a><span class="delimiter">)</span>
	      <span title="(x: (scales.xml.equals.MissingAttributes, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.MissingAttributes, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span> <span title="(_1: scales.xml.equals.MissingAttributes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.MissingAttributes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span> <a href="XmlDifference.scala.html#scales.xml.equals;MissingAttributes" title="(left: scales.xml.Attributes, right: scales.xml.Attributes, missing: scales.xml.Attribute)scales.xml.equals.MissingAttributes">MissingAttributes</a><span class="delimiter">(</span> <a href="#scales.xml.equals;AttributesComparison.compare.left" title="scales.xml.Attributes">left</a>, <a href="#scales.xml.equals;AttributesComparison.compare.right" title="scales.xml.Attributes">right</a>, <a href="#scales.xml.equals;AttributesComparison.compare.$anonfun.x1" title="scales.xml.Attribute">x1</a> <span class="delimiter">)</span>, <a href="#scales.xml.equals;AttributesComparison.compare.context" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span> <span class="delimiter">)</span>
	    <span class="keyword">else</span>
	      <a href="XmlDifference.scala.html#scales.xml.equals.SomeDifference.noCalculation" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>     
	    <span class="delimiter">)</span>
	<span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DefaultAttributesEquals extends AnyRef" id="scales.xml.equals;DefaultAttributesEquals">DefaultAttributesEquals</a> <span title="Unit" class="delimiter">{</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scales.xml.equals.DefaultAttributesEquals.defaultAttributesComparison : (implicit ac: scales.xml.equals.XmlComparison[scales.xml.Attribute])scales.xml.equals.XmlComparison[scales.xml.Attributes]" id="scales.xml.equals;DefaultAttributesEquals.defaultAttributesComparison">defaultAttributesComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.Attribute]" id="scales.xml.equals;DefaultAttributesEquals.defaultAttributesComparison.ac">ac</a> : <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.Attribute]">XmlComparison</a><span class="delimiter">[</span>Attribute<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#scales.xml.equals;XmlComparison" title="scales.xml.equals.XmlComparison[scales.xml.Attributes]">XmlComparison</a><span class="delimiter">[</span>Attributes<span class="delimiter">]</span>  = <span title="scales.xml.equals.AttributesComparison" class="keyword">new</span> <a href="#scales.xml.equals;AttributesComparison" title="scales.xml.equals.AttributesComparison">AttributesComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span> <a href="#scales.xml.equals;DefaultAttributesEquals.defaultAttributesComparison.ac" title="scales.xml.equals.XmlComparison[scales.xml.Attribute]">ac</a> <span class="delimiter">)</span>

<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">object</span> <a title="scales.xml.equals.AttributesEquals.type" id="scales.xml.equals.AttributesEquals">AttributesEquals</a> <a href="#scales.xml.equals.AttributesEquals" title="scales.xml.equals.AttributesEquals.type" class="keyword">extends</a> <a href="#scales.xml.equals;DefaultAttributesEquals" title="scales.xml.equals.DefaultAttributesEquals">DefaultAttributesEquals</a> 
  <span class="keyword">with</span> <a href="#scales.xml.equals;DefaultAttributeEquals" title="scales.xml.equals.DefaultAttributeEquals">DefaultAttributeEquals</a> <span class="keyword">with</span> <a href="#scales.xml.equals;DefaultQNameEquals" title="scales.xml.equals.DefaultQNameEquals">DefaultQNameEquals</a> <span class="delimiter">{</span><span class="delimiter">}</span>


        </pre>
    </body>
</html>
