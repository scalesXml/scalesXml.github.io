<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\impl\XmlUtils.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml.impl

<span class="keyword">import</span> scales.xml.<span class="delimiter">{</span>ItemOrElem, XmlChildren, 
		   XmlItem, Text, XmlTree, XmlVersion, 
		   ScalesXml, defaultPathOptimisation, 
		   Doc, loadXmlReader, convertFromScalaXml, 
		   emptyChildren, AttributeQName,
		   Namespace, Xml10<span class="delimiter">}</span>

<span class="keyword">import</span> <a href="../ScalesXml.scala.html#scales.xml.ScalesXml" title="scales.xml.ScalesXml.type">ScalesXml</a>.xmlCBF
<span class="keyword">import</span> scales.utils.resources.Loaner
  
<span class="keyword">import</span> scales.xml.parser.strategies.<span class="delimiter">{</span>PathOptimisationStrategy, OptimisationToken<span class="delimiter">}</span>

<span class="keyword">import</span> scales.xml.parser.sax.SaxSupport

<span class="comment">/**
 * A collection of whitespace related functions
 */</span>
<span class="keyword">trait</span> <a title="trait Whitespace extends AnyRef" id="scales.xml.impl;Whitespace">Whitespace</a> <span title="Unit" class="delimiter">{</span>
  <span class="keyword">import</span> scales.utils.collection.Tree

<span class="comment">//  import scala.collection.generic.CanBuildFrom</span>

  <span class="comment">/**
   * XPath normalize-space function, replaces all consecutive whitespace with &quot; &quot; and trims.
   */</span>
  <span class="keyword">def</span> <a title="(str: String)String" id="scales.xml.impl;Whitespace.normalizeSpaceS">normalizeSpaceS</a><span class="delimiter">(</span><a title="String" id="scales.xml.impl;Whitespace.normalizeSpaceS.str">str</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#scales.xml.impl;Whitespace.normalizeSpaceS.str" title="String">str</a>.<span title="(x$1: String, x$2: String)String">replaceAll</span><span class="delimiter">(</span><span title="String(&quot;\\s{2,}&quot;)" class="string">&quot;\\s{2,}&quot;</span>, <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>.<span title="()String">trim</span>

  <span class="comment">/**
   * Joins adjacent text nodes for immediate children
   */</span>
  <span class="keyword">val</span> <a title="((Option[scales.xml.XmlItem], scales.xml.XmlChildren), scales.xml.ItemOrElem) =&gt; (Option[scales.xml.XmlItem], scales.xml.XmlChildren)" id="scales.xml.impl;Whitespace.mergeAdjacentText">mergeAdjacentText</a>
    : <span class="delimiter">(</span><span class="delimiter">(</span>Option<span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, XmlChildren<span class="delimiter">)</span>, ItemOrElem<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>Option<span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, XmlChildren<span class="delimiter">)</span>
    = <span class="delimiter">(</span>pair: <span title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)" class="delimiter">(</span>Option<span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, XmlChildren<span class="delimiter">)</span>, item: <a href="../../utils/EitherLike.scala.html#scales.utils;EitherLike" title="scales.xml.ItemOrElem">ItemOrElem</a><span class="delimiter">)</span> =&gt;
    <span title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.item" title="scales.xml.ItemOrElem">item</a>.<a href="../../utils/EitherLike.scala.html#scales.utils;EitherLike.isLeft" title="=&gt; Boolean">isLeft</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.item" title="scales.xml.ItemOrElem">item</a>.<a href="../../utils/EitherLike.scala.html#scales.utils;EitherLike.left" title="=&gt; scales.utils.impl.LeftLikeProjection[scales.xml.XmlItem]">left</a>.<a href="../../utils/impl/EitherLikeImpl.scala.html#scales.utils.impl;LeftLikeProjection.get" title="=&gt; scales.xml.XmlItem">get</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../XmlTypes.scala.html#scales.xml;Text" title="scales.xml.Text">Text</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="comment">// its an item</span>
      <span class="comment">// do we have a current text node?</span>
      <span title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.pair" title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)">pair</a>.<span title="=&gt; Option[scales.xml.XmlItem]">_1</span>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scales.xml.Text" id="scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.text">text</a> = <a href="../XmlTypes.scala.html#scales.xml;Text" title="(value: String)scales.xml.Text">Text</a><span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.pair" title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)">pair</a>.<span title="=&gt; Option[scales.xml.XmlItem]">_1</span>.<span title="=&gt; scales.xml.XmlItem">get</span>.<a href="../XmlTypes.scala.html#scales.xml;XmlItem.value" title="=&gt; String">value</a> <span title="(x$1: Any)String">+</span> <a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.item" title="scales.xml.ItemOrElem">item</a>.<a href="../../utils/EitherLike.scala.html#scales.utils;EitherLike.left" title="=&gt; scales.utils.impl.LeftLikeProjection[scales.xml.XmlItem]">left</a>.<a href="../../utils/impl/EitherLikeImpl.scala.html#scales.utils.impl;LeftLikeProjection.get" title="=&gt; scales.xml.XmlItem">get</a>.<a href="../XmlTypes.scala.html#scales.xml;XmlItem.value" title="=&gt; String">value</a><span class="delimiter">)</span>

        <span class="comment">// replace the last</span>
        <span title="(_1: Some[scales.xml.Text], _2: scales.xml.XmlChildren)(Some[scales.xml.Text], scales.xml.XmlChildren)" class="delimiter">(</span><span title="(x: scales.xml.Text)Some[scales.xml.Text]">Some</span><span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.text" title="scales.xml.Text">text</a><span class="delimiter">)</span>, <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.pair" title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)">pair</a>.<span title="=&gt; scales.xml.XmlChildren">_2</span>.<span title="(n: Int)scales.utils.collection.ImmutableArrayProxy[scales.xml.ItemOrElem]">dropRight</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="XmlTypesImplicits.scala.html#scales.xml.impl;XmlTypesImplicits.xmlCBF" title="(elem: scales.xml.ItemOrElem)(implicit bf: scala.collection.generic.CanBuildFrom[scales.utils.collection.ImmutableArrayProxy[scales.xml.ItemOrElem],scales.xml.ItemOrElem,scales.xml.XmlChildren])scales.xml.XmlChildren">:+</a> <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.text" title="scales.xml.Text">text</a><span class="delimiter">)</span><span class="delimiter">)</span> : <a href="../../utils/collection/ImmutableArray.scala.html#scales.utils.collection;ImmutableArrayProxy" title="scales.xml.XmlChildren">XmlChildren</a><span class="delimiter">)</span><span class="comment">//Left(</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="(_1: Some[scales.xml.XmlItem], _2: scales.xml.XmlChildren)(Some[scales.xml.XmlItem], scales.xml.XmlChildren)" class="delimiter">(</span><span title="(x: scales.xml.XmlItem)Some[scales.xml.XmlItem]">Some</span><span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.item" title="scales.xml.ItemOrElem">item</a>.<a href="../../utils/EitherLike.scala.html#scales.utils;EitherLike.left" title="=&gt; scales.utils.impl.LeftLikeProjection[scales.xml.XmlItem]">left</a>.<a href="../../utils/impl/EitherLikeImpl.scala.html#scales.utils.impl;LeftLikeProjection.get" title="=&gt; scales.xml.XmlItem">get</a><span class="delimiter">)</span>, <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.pair" title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)">pair</a>.<span title="=&gt; scales.xml.XmlChildren">_2</span> <a href="XmlTypesImplicits.scala.html#scales.xml.impl;XmlTypesImplicits.xmlCBF" title="(elem: scales.xml.ItemOrElem)(implicit bf: scala.collection.generic.CanBuildFrom[scales.utils.collection.ImmutableArrayProxy[scales.xml.ItemOrElem],scales.xml.ItemOrElem,scales.xml.XmlChildren])scales.xml.XmlChildren">:+</a> <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.item" title="scales.xml.ItemOrElem">item</a><span class="delimiter">)</span><span class="delimiter">)</span> : <a href="../../utils/collection/ImmutableArray.scala.html#scales.utils.collection;ImmutableArrayProxy" title="scales.xml.XmlChildren">XmlChildren</a><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <span title="(_1: None.type, _2: scales.xml.XmlChildren)(None.type, scales.xml.XmlChildren)" class="delimiter">(</span><span title="None.type">None</span>, <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.pair" title="(Option[scales.xml.XmlItem], scales.xml.XmlChildren)">pair</a>.<span title="=&gt; scales.xml.XmlChildren">_2</span> <a href="XmlTypesImplicits.scala.html#scales.xml.impl;XmlTypesImplicits.xmlCBF" title="(elem: scales.xml.ItemOrElem)(implicit bf: scala.collection.generic.CanBuildFrom[scales.utils.collection.ImmutableArrayProxy[scales.xml.ItemOrElem],scales.xml.ItemOrElem,scales.xml.XmlChildren])scales.xml.XmlChildren">:+</a> <span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText.$anonfun.item" title="scales.xml.ItemOrElem">item</a><span class="delimiter">)</span><span class="delimiter">)</span> : <a href="../../utils/collection/ImmutableArray.scala.html#scales.utils.collection;ImmutableArrayProxy" title="scales.xml.XmlChildren">XmlChildren</a><span class="delimiter">)</span>
  
  <span class="comment">/**
   * Joins adjacent text nodes for the immediate children only (make a tree more XPath friendly) 
   */</span>
  <span class="keyword">def</span> <a title="(tree: scales.xml.XmlTree)scales.xml.XmlTree" id="scales.xml.impl;Whitespace.joinTextNodes(fcffbb5e99)">joinTextNodes</a><span class="delimiter">(</span><a title="scales.xml.XmlTree" id="scales.xml.impl;Whitespace.joinTextNodes(fcffbb5e99).tree">tree</a>: <a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree" title="scales.xml.XmlTree">XmlTree</a><span class="delimiter">)</span> : <a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree" title="scales.xml.XmlTree">XmlTree</a> =
    <a href="../../utils/collection/Trees.scala.html#scales.utils.collection.Tree.apply" title="(isection: scales.xml.Elem, ichildren: scales.xml.XCC[scales.utils.ItemOrTree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.XCC]])scales.utils.collection.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.XCC]">Tree</a><span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.joinTextNodes(fcffbb5e99).tree" title="scales.xml.XmlTree">tree</a>.<a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree.section" title="=&gt; scales.xml.Elem">section</a>, <a href="#scales.xml.impl;Whitespace.joinTextNodes(dc525b3043)" title="(children: scales.xml.XmlChildren)scales.xml.XmlChildren">joinTextNodes</a><span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.joinTextNodes(fcffbb5e99).tree" title="scales.xml.XmlTree">tree</a>.<a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree.children" title="=&gt; scales.xml.XCC[scales.utils.ItemOrTree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.XCC]]">children</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(children: scales.xml.XmlChildren)scales.xml.XmlChildren" id="scales.xml.impl;Whitespace.joinTextNodes(dc525b3043)">joinTextNodes</a><span class="delimiter">(</span><a title="scales.xml.XmlChildren" id="scales.xml.impl;Whitespace.joinTextNodes(dc525b3043).children">children</a> : <a href="../../utils/collection/ImmutableArray.scala.html#scales.utils.collection;ImmutableArrayProxy" title="scales.xml.XmlChildren">XmlChildren</a><span class="delimiter">)</span> : <a href="../../utils/collection/ImmutableArray.scala.html#scales.utils.collection;ImmutableArrayProxy" title="scales.xml.XmlChildren">XmlChildren</a> =
    <a href="#scales.xml.impl;Whitespace.joinTextNodes(dc525b3043).children" title="scales.xml.XmlChildren">children</a>.<span title="(z: (Option[scales.xml.XmlItem], scales.xml.XmlChildren))(op: ((Option[scales.xml.XmlItem], scales.xml.XmlChildren), scales.xml.ItemOrElem) =&gt; (Option[scales.xml.XmlItem], scales.xml.XmlChildren))(Option[scales.xml.XmlItem], scales.xml.XmlChildren)">foldLeft</span><span class="delimiter">(</span><span title="(_1: Option[scales.xml.XmlItem], _2: scales.xml.XmlChildren)(Option[scales.xml.XmlItem], scales.xml.XmlChildren)" class="delimiter">(</span><span title="None.type">None</span>: <span title="Option[scales.xml.XmlItem]">Option</span><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a href="XmlTypesDefaults.scala.html#scales.xml.impl;XmlTypes.emptyChildren" title="=&gt; scales.xml.XmlChildren">emptyChildren</a> <span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scales.xml.impl;Whitespace.mergeAdjacentText" title="=&gt; ((Option[scales.xml.XmlItem], scales.xml.XmlChildren), scales.xml.ItemOrElem) =&gt; (Option[scales.xml.XmlItem], scales.xml.XmlChildren)">mergeAdjacentText</a><span class="delimiter">)</span>.<span title="=&gt; scales.xml.XmlChildren">_2</span>


<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">import</span> org.xml.sax.XMLReader

<span class="keyword">trait</span> <a title="trait XmlUtils extends AnyRef" id="scales.xml.impl;XmlUtils">XmlUtils</a> <span title="Unit" class="delimiter">{</span>
  
  <span class="comment">/**
   * Conversion from Scala XML into Scales XML
   */</span> 
  <span class="keyword">def</span> <a title="[Token &lt;: scales.xml.parser.strategies.OptimisationToken](elem: scala.xml.Elem, parsers: scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport, optimisationStrategy: scales.xml.parser.strategies.PathOptimisationStrategy[Token], encoding: String)(implicit xmlVer: scales.xml.XmlVersion)scales.xml.Doc" id="scales.xml.impl;XmlUtils.convertFromScalaXml">convertFromScalaXml</a><span class="delimiter">[</span><a title=" &lt;: scales.xml.parser.strategies.OptimisationToken" id="scales.xml.impl;XmlUtils.convertFromScalaXml$default$4;Token">Token</a> &lt;: OptimisationToken<span class="delimiter">]</span><span class="delimiter">(</span> <a title="scala.xml.Elem" id="scales.xml.impl;XmlUtils.convertFromScalaXml.elem">elem</a> : scala.xml.<span title="scala.xml.Elem">Elem</span>, <a title="XmlUtils extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport" id="scales.xml.impl;XmlUtils.convertFromScalaXml$default$2">parsers</a> : <a href="#scales.xml.impl;XmlUtils;<refinement>" title="XmlUtils extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport">Loaner</a><span class="delimiter">[</span>XMLReader<span class="delimiter">]</span> <span class="keyword">with</span> SaxSupport = <a href="XmlFactories.scala.html#scales.xml.impl.DefaultXMLReaderFactoryPool" title="scales.xml.impl.DefaultXMLReaderFactoryPool.type">DefaultXMLReaderFactoryPool</a>, <a title="scales.xml.parser.strategies.PathOptimisationStrategy[Token]" id="scales.xml.impl;XmlUtils.convertFromScalaXml$default$3">optimisationStrategy</a> : <a href="../parser/strategies/OptimisingStrategies.scala.html#scales.xml.parser.strategies;PathOptimisationStrategy" title="scales.xml.parser.strategies.PathOptimisationStrategy[Token]">PathOptimisationStrategy</a><span class="delimiter">[</span>Token<span class="delimiter">]</span> = <a href="../package.scala.html#scales.xml.package.defaultPathOptimisation" title="=&gt; scales.xml.parser.strategies.PathOptimisationStrategy[scales.xml.parser.strategies.QNameToken]">defaultPathOptimisation</a>, <a title="String" id="scales.xml.impl;XmlUtils.convertFromScalaXml$default$4">encoding</a> : <span title="String">String</span> = <span title="String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span> <span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.XmlVersion" id="scales.xml.impl;XmlUtils.convertFromScalaXml.xmlVer">xmlVer</a> : <a href="../Namespaces.scala.html#scales.xml;XmlVersion" title="scales.xml.XmlVersion">XmlVersion</a><span class="delimiter">)</span>  : <a href="../XmlTypes.scala.html#scales.xml;Doc" title="scales.xml.Doc">Doc</a> = <span class="delimiter">{</span>
    <span class="comment">// simple stream conversion.., for &quot;large docs&quot; a conversion in place might be better, but for now its isolated....</span>
    <span class="keyword">var</span> <a title="java.io.StringWriter" id="scales.xml.impl;XmlUtils.convertFromScalaXml.out">out</a> = <span title="java.io.StringWriter" class="keyword">new</span> java.io.<span title="java.io.StringWriter">StringWriter</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="XmlUtils extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport" id="scales.xml.impl;XmlUtils.convertFromScalaXml.p">p</a> = <a href="#scales.xml.impl;XmlUtils.convertFromScalaXml$default$2" title="XmlUtils extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport">parsers</a>						 
    scala.xml.<span title="scala.xml.XML.type">XML</span>.<span title="(w: java.io.Writer, node: scala.xml.Node, enc: String, xmlDecl: Boolean, doctype: scala.xml.dtd.DocType, minimizeTags: scala.xml.MinimizeMode.Value)Unit">write</span><span class="delimiter">(</span><a href="#scales.xml.impl;XmlUtils.convertFromScalaXml.out" title="java.io.StringWriter">out</a>, <a href="#scales.xml.impl;XmlUtils.convertFromScalaXml.elem" title="scala.xml.Elem">elem</a>, <a href="#scales.xml.impl;XmlUtils.convertFromScalaXml$default$4" title="String">encoding</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <span class="keyword">import</span> <a href="../ScalesXml.scala.html#scales.xml.ScalesXml" title="scales.xml.ScalesXml.type">ScalesXml</a>.readerToSource
    <a href="../parser/sax/XmlParser.scala.html#scales.xml.parser.sax;XmlParser.loadXmlReader" title="[Token &lt;: scales.xml.parser.strategies.OptimisationToken](source: org.xml.sax.InputSource, strategy: scales.xml.parser.strategies.PathOptimisationStrategy[Token], parsers: scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport)(implicit xmlVer: scales.xml.XmlVersion)scales.xml.Doc">loadXmlReader</a><span title="(source: org.xml.sax.InputSource, strategy: scales.xml.parser.strategies.PathOptimisationStrategy[Token], parsers: scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport)(implicit xmlVer: scales.xml.XmlVersion)scales.xml.Doc" class="delimiter">[</span><a href="#scales.xml.impl;XmlUtils.convertFromScalaXml$default$4;Token" title="Token">Token</a><span class="delimiter">]</span><a href="#scales.xml.impl;XmlUtils.convertFromScalaXml.xmlVer" title="scales.xml.XmlVersion" class="delimiter">(</a><a href="../parser/sax/XmlParser.scala.html#scales.xml.parser.sax;XmlParserImplicits.readerToSource" title="org.xml.sax.InputSource" id="scales.xml.impl;XmlUtils.convertFromScalaXml.x$1" class="keyword">new</a> java.io.<span title="java.io.StringReader">StringReader</span><span class="delimiter">(</span><a href="#scales.xml.impl;XmlUtils.convertFromScalaXml.out" title="java.io.StringWriter">out</a>.<span title="()String">toString</span><span class="delimiter">)</span>, parsers = <a href="#scales.xml.impl;XmlUtils.convertFromScalaXml.p" title="XmlUtils extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport" id="scales.xml.impl;XmlUtils.convertFromScalaXml.x$2">p</a>, strategy = <a href="#scales.xml.impl;XmlUtils.convertFromScalaXml$default$3" title="scales.xml.parser.strategies.PathOptimisationStrategy[Token]" id="scales.xml.impl;XmlUtils.convertFromScalaXml.x$3">optimisationStrategy</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns true if the tree is effectively empty, i.e. no attributes or children
   */</span>
  <span class="keyword">def</span> <a title="(tree: scales.xml.XmlTree)Boolean" id="scales.xml.impl;XmlUtils.isEmptyTree">isEmptyTree</a><span class="delimiter">(</span><a title="scales.xml.XmlTree" id="scales.xml.impl;XmlUtils.isEmptyTree.tree">tree</a>: <a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree" title="scales.xml.XmlTree">XmlTree</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = 
    <span class="delimiter">(</span><a href="#scales.xml.impl;XmlUtils.isEmptyTree.tree" title="scales.xml.XmlTree">tree</a>.<a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree.children" title="=&gt; scales.xml.XCC[scales.utils.ItemOrTree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.XCC]]">children</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#scales.xml.impl;XmlUtils.isEmptyTree.tree" title="scales.xml.XmlTree">tree</a>.<a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree.section" title="=&gt; scales.xml.Elem">section</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.attributes" title="=&gt; scales.xml.Attributes">attributes</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>

  <span class="comment">/**
   * A convenient AttributeQName for xsi:nil attributes
   */</span> 
  <span class="keyword">val</span> <a title="scales.xml.AttributeQName" id="scales.xml.impl;XmlUtils.xsiNil">xsiNil</a> : <a href="../../utils/EitherLike.scala.html#scales.utils;EitherLike" title="scales.xml.AttributeQName">AttributeQName</a> = <a href="../Namespaces.scala.html#scales.xml.Namespace" title="scales.xml.Namespace.type">Namespace</a>.<a href="../Namespaces.scala.html#scales.xml.Namespace.xsi" title="=&gt; scales.xml.Namespace">xsi</a>.<a href="../Namespaces.scala.html#scales.xml;Namespace.prefixed(27af3f0704)" title="(prefix: String, local: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.impl.FromParser)scales.xml.PrefixedQName">prefixed</a><span class="delimiter">(</span><span title="String(&quot;xsi&quot;)" class="string">&quot;xsi&quot;</span>, <span title="String(&quot;nil&quot;)" class="string">&quot;nil&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="../Namespaces.scala.html#scales.xml.Xml10" title="scales.xml.Xml10.type">Xml10</a>, <a href="FromParser.scala.html#scales.xml.impl.IsFromParser" title="scales.xml.impl.IsFromParser.type">IsFromParser</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Tests if a given tree is nil, but does not check if children are present.
   *
   * @return true if there is a xsi:nil=&quot;true&quot; value (or 1)
   */</span> 
  <span class="keyword">def</span> <a title="(tree: scales.xml.XmlTree)Boolean" id="scales.xml.impl;XmlUtils.isNil">isNil</a><span class="delimiter">(</span><a title="scales.xml.XmlTree" id="scales.xml.impl;XmlUtils.isNil.tree">tree</a>: <a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree" title="scales.xml.XmlTree">XmlTree</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="../ScalesXml.scala.html#scales.xml.ScalesXml" title="scales.xml.ScalesXml.type">ScalesXml</a>._
    <a href="#scales.xml.impl;XmlUtils.isNil.tree" title="scales.xml.XmlTree">tree</a>.<a href="../../utils/collection/Trees.scala.html#scales.utils.collection;Tree.section" title="=&gt; scales.xml.Elem">section</a>.<a href="../../utils/collection/ArraySet.scala.html#scales.utils.collection;ArraySet.apply" title="(b: scales.xml.AttributeQName)(implicit equiv: scales.utils.Equiv[scales.xml.QName], implicit viewA: scales.xml.Attribute =&gt; scales.xml.QName, implicit viewB: scales.xml.AttributeQName =&gt; scales.xml.QName)Option[scales.xml.Attribute]">attributes</a><a href="XmlTypesImplicits.scala.html#scales.xml.impl;XmlTypesImplicits.qnameEquiv" title="=&gt; scales.utils.Equiv[scales.xml.QName]" class="delimiter">(</a><a href="#scales.xml.impl;XmlUtils.xsiNil" title="=&gt; scales.xml.AttributeQName">xsiNil</a><span class="delimiter">)</span>.
      <span title="(f: scales.xml.Attribute =&gt; Boolean)Option[Boolean]">map</span><span class="delimiter">{</span><a title="scales.xml.Attribute" id="scales.xml.impl;XmlUtils.isNil.$anonfun.b">b</a> =&gt; java.lang.<span title="Boolean.type">Boolean</span>.<span title="(x$1: String)Boolean">parseBoolean</span><span class="delimiter">(</span><a href="#scales.xml.impl;XmlUtils.isNil.$anonfun.b" title="scales.xml.Attribute">b</a>.<a href="../XmlTypes.scala.html#scales.xml;Attribute.value" title="=&gt; String">value</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#scales.xml.impl;XmlUtils.isNil.$anonfun.b" title="scales.xml.Attribute">b</a>.<a href="../XmlTypes.scala.html#scales.xml;Attribute.value" title="=&gt; String">value</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;1&quot;)" class="string">&quot;1&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
    
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait XmlUtilsImplicits extends AnyRef" id="scales.xml.impl;XmlUtilsImplicits">XmlUtilsImplicits</a> <span title="Unit" class="delimiter">{</span>
  <span class="keyword">class</span> <a title="class ToScales extends AnyRef" id="scales.xml.impl;XmlUtilsImplicits;ToScales">ToScales</a><a href="#scales.xml.impl;XmlUtilsImplicits;ToScales" title="XmlUtilsImplicits.this.ToScales" class="delimiter">(</a> <a title="scala.xml.Elem" id="scales.xml.impl;XmlUtilsImplicits;ToScales.elem">elem</a> : scala.xml.<span title="scala.xml.Elem">Elem</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.XmlVersion" id="scales.xml.impl;XmlUtilsImplicits;ToScales.xmlVer">xmlVer</a> : <a href="../Namespaces.scala.html#scales.xml;XmlVersion" title="scales.xml.XmlVersion">XmlVersion</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[Token &lt;: scales.xml.parser.strategies.OptimisationToken](parsers: scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport, optimisationStrategy: scales.xml.parser.strategies.PathOptimisationStrategy[Token], encoding: String)scales.xml.Doc" id="scales.xml.impl;XmlUtilsImplicits;ToScales.asScales">asScales</a><span class="delimiter">[</span><a title=" &lt;: scales.xml.parser.strategies.OptimisationToken" id="scales.xml.impl;XmlUtilsImplicits;ToScales.asScales$default$3;Token">Token</a> &lt;: OptimisationToken<span class="delimiter">]</span><span class="delimiter">(</span><a title="ToScales extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport" id="scales.xml.impl;XmlUtilsImplicits;ToScales.asScales$default$1">parsers</a> : <a href="#scales.xml.impl;XmlUtilsImplicits;ToScales;<refinement>" title="ToScales extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport">Loaner</a><span class="delimiter">[</span>XMLReader<span class="delimiter">]</span> <span class="keyword">with</span> SaxSupport = <a href="XmlFactories.scala.html#scales.xml.impl.DefaultXMLReaderFactoryPool" title="scales.xml.impl.DefaultXMLReaderFactoryPool.type">DefaultXMLReaderFactoryPool</a>, <a title="scales.xml.parser.strategies.PathOptimisationStrategy[Token]" id="scales.xml.impl;XmlUtilsImplicits;ToScales.asScales$default$2">optimisationStrategy</a> : <a href="../parser/strategies/OptimisingStrategies.scala.html#scales.xml.parser.strategies;PathOptimisationStrategy" title="scales.xml.parser.strategies.PathOptimisationStrategy[Token]">PathOptimisationStrategy</a><span class="delimiter">[</span>Token<span class="delimiter">]</span> = <a href="../package.scala.html#scales.xml.package.defaultPathOptimisation" title="=&gt; scales.xml.parser.strategies.PathOptimisationStrategy[scales.xml.parser.strategies.QNameToken]">defaultPathOptimisation</a>, <a title="String" id="scales.xml.impl;XmlUtilsImplicits;ToScales.asScales$default$3">encoding</a> : <span title="String">String</span> = <span title="String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span> <span class="delimiter">)</span> = <a href="#scales.xml.impl;XmlUtils.convertFromScalaXml" title="(elem: scala.xml.Elem, parsers: scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport, optimisationStrategy: scales.xml.parser.strategies.PathOptimisationStrategy[Token], encoding: String)(implicit xmlVer: scales.xml.XmlVersion)scales.xml.Doc">convertFromScalaXml</a><a href="#scales.xml.impl;XmlUtilsImplicits;ToScales.xmlVer" title="scales.xml.XmlVersion" class="delimiter">(</a><a href="#scales.xml.impl;XmlUtilsImplicits;ToScales.elem" title="scala.xml.Elem">elem</a>, <a href="#scales.xml.impl;XmlUtilsImplicits;ToScales.asScales$default$1" title="ToScales extends scales.utils.resources.Loaner[org.xml.sax.XMLReader] with scales.xml.parser.sax.SaxSupport">parsers</a>, <a href="#scales.xml.impl;XmlUtilsImplicits;ToScales.asScales$default$2" title="scales.xml.parser.strategies.PathOptimisationStrategy[Token]">optimisationStrategy</a>, <a href="#scales.xml.impl;XmlUtilsImplicits;ToScales.asScales$default$3" title="String">encoding</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scales.xml.impl.XmlUtilsImplicits.toScalesXml : (elem: scala.xml.Elem)(implicit xmlVer: scales.xml.XmlVersion)XmlUtilsImplicits.this.ToScales" id="scales.xml.impl;XmlUtilsImplicits.toScalesXml">toScalesXml</a><span class="delimiter">(</span> <a title="scala.xml.Elem" id="scales.xml.impl;XmlUtilsImplicits.toScalesXml.elem">elem</a> : scala.xml.<span title="scala.xml.Elem">Elem</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.XmlVersion" id="scales.xml.impl;XmlUtilsImplicits.toScalesXml.xmlVer">xmlVer</a> : <a href="../Namespaces.scala.html#scales.xml;XmlVersion" title="scales.xml.XmlVersion">XmlVersion</a><span class="delimiter">)</span> = <a href="#scales.xml.impl;XmlUtilsImplicits.toScalesXml.xmlVer" title="XmlUtilsImplicits.this.ToScales" class="keyword">new</a> <a href="#scales.xml.impl;XmlUtilsImplicits;ToScales" title="XmlUtilsImplicits.this.ToScales">ToScales</a><span class="delimiter">(</span><a href="#scales.xml.impl;XmlUtilsImplicits.toScalesXml.elem" title="scala.xml.Elem">elem</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
