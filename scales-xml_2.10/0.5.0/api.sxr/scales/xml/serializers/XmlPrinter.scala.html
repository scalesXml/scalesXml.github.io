<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\serializers\XmlPrinter.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml.serializers

<span class="keyword">import</span> scales.xml.impl.NamespaceDefaults

<span class="keyword">import</span> scales.xml.<span class="delimiter">{</span>EmptyDoc, XmlItem, DocLike,
		 Misc, XmlVersion, Declaration,
		 XmlPull, ScalesXml, Elem<span class="delimiter">}</span>

<span class="keyword">import</span> scales.utils._

<span class="keyword">import</span> scala.collection.immutable.<span class="delimiter">{</span> Stack, Map <span class="delimiter">}</span>

<span class="keyword">import</span> resources._

<span class="keyword">import</span> java.io.Writer

<span class="keyword">import</span> java.nio.charset.Charset

<span class="keyword">trait</span> <a title="trait XmlPrinterImplicits extends AnyRef" id="scales.xml.serializers;XmlPrinterImplicits">XmlPrinterImplicits</a> <span title="Unit" class="delimiter">{</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](it: T)(implicit evidence$1: scales.xml.serializers.SerializeableXml[T])scales.xml.serializers.WriteTo[T]" id="scales.xml.serializers;XmlPrinterImplicits.fromSerializeableToWriteTo">fromSerializeableToWriteTo</a><span class="delimiter">[</span><a title="" id="scales.xml.serializers;XmlPrinterImplicits.fromSerializeableToWriteTo;T">T</a> : SerializeableXml<span class="delimiter">]</span><span class="delimiter">(</span> <a title="T" id="scales.xml.serializers;XmlPrinterImplicits.fromSerializeableToWriteTo.it">it</a> : <a href="#scales.xml.serializers;XmlPrinterImplicits.fromSerializeableToWriteTo;T" title="T">T</a> <span class="delimiter">)</span> =
    <a href="XmlPrinterTypes.scala.html#scales.xml.serializers.WriteTo.<init>$default$2" title="scales.xml.serializers.WriteTo[T]" class="keyword">new</a> <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;WriteTo" title="scales.xml.serializers.WriteTo[T]">WriteTo</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinterImplicits.fromSerializeableToWriteTo.it" title="T">it</a><span class="delimiter">)</span>


  <span class="comment">/**
   * Import to _ and replace with your own SerializerFactory if desired
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="scales.xml.serializers.SerializerFactory" id="scales.xml.serializers;XmlPrinterImplicits.defaultSerializerFactory">defaultSerializerFactory</a> : <a href="Serializers.scala.html#scales.xml.serializers;SerializerFactory" title="scales.xml.serializers.SerializerFactory">SerializerFactory</a> = <a href="LSSerializer.scala.html#scales.xml.serializers.LSSerializerFactory" title="scales.xml.serializers.LSSerializerFactory.type">LSSerializerFactory</a>

  <span class="keyword">case class</span> <a title="class DeclarationConverter extends AnyRef with Product with Serializable" id="scales.xml.serializers;XmlPrinterImplicits.DeclarationConverter.readResolve">DeclarationConverter</a><a href="#scales.xml.serializers;XmlPrinterImplicits.DeclarationConverter.readResolve" title="Product" class="delimiter">(</a><a title="scales.xml.Declaration" id="scales.xml.serializers;XmlPrinterImplicits;DeclarationConverter.decl">decl</a>: <a href="../XmlTypes.scala.html#scales.xml;Declaration" title="scales.xml.Declaration">Declaration</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(out: java.io.Writer)scales.xml.serializers.SerializerData" id="scales.xml.serializers;XmlPrinterImplicits;DeclarationConverter.withWriter">withWriter</a><span class="delimiter">(</span><a title="java.io.Writer" id="scales.xml.serializers;XmlPrinterImplicits;DeclarationConverter.withWriter.out">out</a>: <span title="java.io.Writer">Writer</span><span class="delimiter">)</span>: <a href="Serializers.scala.html#scales.xml.serializers;SerializerData" title="scales.xml.serializers.SerializerData">SerializerData</a> = scales.xml.<a href="#scales.xml.serializers;XmlPrinter.withWriter" title="(decl: scales.xml.Declaration, out: java.io.Writer)scales.xml.serializers.SerializerData">withWriter</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinterImplicits;DeclarationConverter.decl" title="=&gt; scales.xml.Declaration">decl</a>, <a href="#scales.xml.serializers;XmlPrinterImplicits;DeclarationConverter.withWriter.out" title="java.io.Writer">out</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scales.xml.serializers.XmlPrinterImplicits.toWithWriter : (decl: scales.xml.Declaration)XmlPrinterImplicits.this.DeclarationConverter" id="scales.xml.serializers;XmlPrinterImplicits.toWithWriter">toWithWriter</a><span class="delimiter">(</span><a title="scales.xml.Declaration" id="scales.xml.serializers;XmlPrinterImplicits.toWithWriter.decl">decl</a>: <a href="../XmlTypes.scala.html#scales.xml;Declaration" title="scales.xml.Declaration">Declaration</a><span class="delimiter">)</span> = <a href="#scales.xml.serializers;XmlPrinterImplicits.DeclarationConverter.readResolve" title="(decl: scales.xml.Declaration)XmlPrinterImplicits.this.DeclarationConverter">DeclarationConverter</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinterImplicits.toWithWriter.decl" title="scales.xml.Declaration">decl</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait XmlPrinter extends AnyRef" id="scales.xml.serializers;XmlPrinter">XmlPrinter</a> <span title="Unit" class="delimiter">{</span>

  <span class="comment">/**
   * a) add / replace in mappings
   * b) add to declMap
   */</span>
  <span class="keyword">def</span> <a title="(entry: (String, String), mappings: scala.collection.immutable.Map[String,String], declMap: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" id="scales.xml.serializers;XmlPrinter.laddNS">laddNS</a><span class="delimiter">(</span><a title="(String, String)" id="scales.xml.serializers;XmlPrinter.laddNS.entry">entry</a>: <span title="(String, String)" class="delimiter">(</span>String, String<span class="delimiter">)</span>, <a title="scala.collection.immutable.Map[String,String]" id="scales.xml.serializers;XmlPrinter.laddNS.mappings">mappings</a>: <span title="scala.collection.immutable.Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>, <a title="scala.collection.immutable.Map[String,String]" id="scales.xml.serializers;XmlPrinter.laddNS.declMap">declMap</a>: <span title="scala.collection.immutable.Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Option[String]" id="scales.xml.serializers;XmlPrinter.laddNS.mapping">mapping</a> = <a href="#scales.xml.serializers;XmlPrinter.laddNS.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a>.<span title="=&gt; String">_1</span><span class="delimiter">)</span>

    <span title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.mapping" title="Option[String]">mapping</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// currently exists</span>
      <span title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.mapping" title="Option[String]">mapping</a>.<span title="=&gt; String">get</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// do nothing</span>
        <span title="(_1: scala.collection.immutable.Map[String,String], _2: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>, <a href="#scales.xml.serializers;XmlPrinter.laddNS.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// replace and redefine</span>
        <span title="(_1: scala.collection.immutable.Map[String,String], _2: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>.<span title="(key: String, value: String)scala.collection.immutable.Map[String,String]">updated</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a>.<span title="=&gt; String">_1</span>, <a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span>,
          <a href="#scales.xml.serializers;XmlPrinter.laddNS.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a> <span title="(kv: (String, String))scala.collection.immutable.Map[String,String]">+</span> <a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// map and define</span>
      <span title="(_1: scala.collection.immutable.Map[String,String], _2: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a> <span title="(kv: (String, String))scala.collection.immutable.Map[String,String]">+</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a>.<span title="(x: String)ArrowAssoc[String]">_1</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span>,
        <a href="#scales.xml.serializers;XmlPrinter.laddNS.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a> <span title="(kv: (String, String))scala.collection.immutable.Map[String,String]">+</span> <a href="#scales.xml.serializers;XmlPrinter.laddNS.entry" title="(String, String)">entry</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(x: scales.xml.Elem, currentMappings: scala.collection.immutable.Map[String,String])scales.xml.serializers.NamespaceContext" id="scales.xml.serializers;XmlPrinter.doElement">doElement</a><span class="delimiter">(</span><a title="scales.xml.Elem" id="scales.xml.serializers;XmlPrinter.doElement.x">x</a>: <a href="../XmlTypes.scala.html#scales.xml;Elem" title="scales.xml.Elem">Elem</a>, <a title="scala.collection.immutable.Map[String,String]" id="scales.xml.serializers;XmlPrinter.doElement.currentMappings">currentMappings</a> : <span title="scala.collection.immutable.Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="../ScalesXml.scala.html#scales.xml.ScalesXml" title="scales.xml.ScalesXml.type">ScalesXml</a>._

    <span class="comment">// for each of our namespace mappings that differ (or are not there)</span>
    <span class="keyword">var</span> <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.doElement.x$1" title="scala.collection.immutable.Map[String,String]" id="scales.xml.serializers;XmlPrinter.doElement.mappings">mappings</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.x$1" title="scala.collection.immutable.Map[String,String]" id="scales.xml.serializers;XmlPrinter.doElement.declMap">declMap</a><span class="delimiter">)</span> = <a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.namespaces" title="=&gt; scala.collection.immutable.Map[String,String]">namespaces</a>.<span title="(z: (scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]))(op: ((scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]), (String, String)) =&gt; (scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]))(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">foldLeft</span><span class="delimiter">(</span> <span class="comment">// (nsmappings start with top , what we declare)</span>
      <span title="(_1: scala.collection.immutable.Map[String,String], _2: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.currentMappings" title="scala.collection.immutable.Map[String,String]">currentMappings</a>, <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, String)*)scala.collection.immutable.Map[String,String]" class="delimiter">[</span><span title="String">String</span>, <span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]) @unchecked" class="delimiter">(</span><span class="delimiter">(</span><a title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" id="scales.xml.serializers;XmlPrinter.doElement.x$1.$anonfun.p">p</a>, <a title="(String, String)" id="scales.xml.serializers;XmlPrinter.doElement.x$1.$anonfun.a">a</a><span title="(String, String)" class="delimiter">)</span> =&gt; <a href="#scales.xml.serializers;XmlPrinter.laddNS" title="(entry: (String, String), mappings: scala.collection.immutable.Map[String,String], declMap: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">laddNS</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.x$1.$anonfun.a" title="(String, String)">a</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.x$1.$anonfun.p" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">p</a>.<span title="=&gt; scala.collection.immutable.Map[String,String]">_1</span>, <a href="#scales.xml.serializers;XmlPrinter.doElement.x$1.$anonfun.p" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">p</a>.<span title="=&gt; scala.collection.immutable.Map[String,String]">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// with our attributes</span>
    <span class="keyword">val</span> <a title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" id="scales.xml.serializers;XmlPrinter.doElement.t">t</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.attributes" title="=&gt; scales.xml.Attributes">attributes</a>.<span title="(z: (scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]))(op: ((scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]), scales.xml.Attribute) =&gt; (scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]))(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">foldLeft</span><span class="delimiter">(</span><span title="(_1: scala.collection.immutable.Map[String,String], _2: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" id="scales.xml.serializers;XmlPrinter.doElement.t.$anonfun.p">p</a>, <a title="scales.xml.Attribute" id="scales.xml.serializers;XmlPrinter.doElement.t.$anonfun.a">a</a><a href="../XmlTypes.scala.html#scales.xml;Attribute" title="scales.xml.Attribute" class="delimiter">)</a> =&gt;
      <span class="keyword">val</span> <a title="scales.xml.Attribute" id="scales.xml.serializers;XmlPrinter.doElement.t.$anonfun.e">e</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.t.$anonfun.a" title="scales.xml.Attribute">a</a>
      <span title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="keyword">if</span> <span class="delimiter">(</span><a href="../impl/XmlTypesImplicits.scala.html#scales.xml.impl;XmlTypesImplicits.toQNameF" title="(v1: scales.xml.Attribute)scales.xml.QName">e</a>.<a href="../QName.scala.html#scales.xml;QName.prefix" title="=&gt; Option[String]">prefix</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
        <a href="#scales.xml.serializers;XmlPrinter.laddNS" title="(entry: (String, String), mappings: scala.collection.immutable.Map[String,String], declMap: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">laddNS</a><span class="delimiter">(</span><span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="../impl/XmlTypesImplicits.scala.html#scales.xml.impl;XmlTypesImplicits.toQNameF" title="(v1: scales.xml.Attribute)scales.xml.QName">e</a>.<a href="../QName.scala.html#scales.xml;QName.prefix" title="=&gt; Option[String]">prefix</a>.<span title="=&gt; String">get</span>, <a href="../impl/XmlTypesImplicits.scala.html#scales.xml.impl;XmlTypesImplicits.toQNameF" title="(v1: scales.xml.Attribute)scales.xml.QName">e</a>.<a href="../QName.scala.html#scales.xml;QName.namespace" title="=&gt; scales.xml.UnderlyingNamespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a><span class="delimiter">)</span>, <a href="#scales.xml.serializers;XmlPrinter.doElement.t.$anonfun.p" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">p</a>.<span title="=&gt; scala.collection.immutable.Map[String,String]">_1</span>, <a href="#scales.xml.serializers;XmlPrinter.doElement.t.$anonfun.p" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">p</a>.<span title="=&gt; scala.collection.immutable.Map[String,String]">_2</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#scales.xml.serializers;XmlPrinter.doElement.t.$anonfun.p" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">p</a>
    <span class="delimiter">}</span>

    <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.t" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">t</a>.<span title="=&gt; scala.collection.immutable.Map[String,String]">_1</span>
    <a href="#scales.xml.serializers;XmlPrinter.doElement.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.t" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">t</a>.<span title="=&gt; scala.collection.immutable.Map[String,String]">_2</span>

    <span class="comment">// is this namespace declared?</span>
    <span class="keyword">val</span> <a title="Boolean" id="scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS">addedDefaultNS</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.currentDefault">currentDefault</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="(key: String)String">mappings</a><span class="delimiter">(</span><a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.namespace" title="=&gt; scales.xml.Namespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a><span class="delimiter">)</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.name" title="=&gt; scales.xml.QName">name</a>.<a href="../QName.scala.html#scales.xml;QName.namespace" title="=&gt; scales.xml.UnderlyingNamespace">namespace</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.noNamespace" title="=&gt; scales.xml.EmptyNamespace.type">noNamespace</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// is there a prefix?</span>
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.name" title="=&gt; scales.xml.QName">name</a>.<a href="../QName.scala.html#scales.xml;QName.prefix" title="=&gt; Option[String]">prefix</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// then it is a normal laddNS</span>
          <span class="keyword">val</span> <a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.imappings" title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.x$2" title="scala.collection.immutable.Map[String,String]" id="scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.imappings">imappings</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.x$2" title="scala.collection.immutable.Map[String,String]" id="scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.ideclMap">ideclMap</a><span class="delimiter">)</span> = <a href="#scales.xml.serializers;XmlPrinter.laddNS" title="(entry: (String, String), mappings: scala.collection.immutable.Map[String,String], declMap: scala.collection.immutable.Map[String,String])(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String])">laddNS</a><span title="(scala.collection.immutable.Map[String,String], scala.collection.immutable.Map[String,String]) @unchecked" class="delimiter">(</span><span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.name" title="=&gt; scales.xml.QName">name</a>.<a href="../QName.scala.html#scales.xml;QName.prefix" title="=&gt; Option[String]">prefix</a>.<span title="=&gt; String">get</span>, <a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.name" title="=&gt; scales.xml.QName">name</a>.<a href="../QName.scala.html#scales.xml;QName.namespace" title="=&gt; scales.xml.UnderlyingNamespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a><span class="delimiter">)</span>, <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a><span class="delimiter">)</span>
          <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.imappings" title="scala.collection.immutable.Map[String,String]">imappings</a>
          <a href="#scales.xml.serializers;XmlPrinter.doElement.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.ideclMap" title="scala.collection.immutable.Map[String,String]">ideclMap</a>
          <span class="comment">// push the current on again</span>
          <span title="Boolean(false)" class="keyword">false</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="comment">// there will always be on as we don't remove only redefine.</span>

          <span class="comment">// is it the current default namespace? </span>
          <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.currentDefault" title="String">currentDefault</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.name" title="=&gt; scales.xml.QName">name</a>.<a href="../QName.scala.html#scales.xml;QName.namespace" title="=&gt; scales.xml.UnderlyingNamespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// keep the current</span>
            <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="comment">// must redefine it</span>
            <span class="comment">// then the namespace has been badly declared as we have a conflict, but in order for at</span>
            <span class="comment">// least this element to be valid we must remap it, log it?</span>
            <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>.<span title="(key: String, value: String)scala.collection.immutable.Map[String,String]">updated</span><span class="delimiter">(</span><a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.namespace" title="=&gt; scales.xml.Namespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.name" title="=&gt; scales.xml.QName">name</a>.<a href="../QName.scala.html#scales.xml;QName.namespace" title="=&gt; scales.xml.UnderlyingNamespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a><span class="delimiter">)</span>
            <span title="Boolean(true)" class="keyword">true</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// then if the current default is not &quot;&quot; we must redeclare it</span>
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS.currentDefault" title="String">currentDefault</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.noNamespace" title="=&gt; scales.xml.EmptyNamespace.type">noNamespace</a>.<a href="../Namespaces.scala.html#scales.xml.EmptyNamespace.uri" title="=&gt; String(&quot;&quot;)">uri</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Boolean(false)" class="keyword">false</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>.<span title="(key: String, value: String)scala.collection.immutable.Map[String,String]">updated</span><span class="delimiter">(</span><a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.namespace" title="=&gt; scales.xml.Namespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a>, <a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.noNamespace" title="=&gt; scales.xml.EmptyNamespace.type">noNamespace</a>.<a href="../Namespaces.scala.html#scales.xml.EmptyNamespace.uri" title="=&gt; String(&quot;&quot;)">uri</a><span class="delimiter">)</span>
          <span title="Boolean(true)" class="keyword">true</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">// don't render it here, mappings contains it</span>
    <a href="#scales.xml.serializers;XmlPrinter.doElement.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a> <span title="(key: String)scala.collection.immutable.Map[String,String]">-</span> <a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.namespace" title="=&gt; scales.xml.Namespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a>

    <span class="keyword">val</span> <a title="Option[String]" id="scales.xml.serializers;XmlPrinter.doElement.default">default</a> = <a href="#scales.xml.serializers;XmlPrinter.doElement.x" title="scales.xml.Elem">x</a>.<a href="../XmlTypes.scala.html#scales.xml;Elem.namespaces" title="=&gt; scala.collection.immutable.Map[String,String]">namespaces</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.namespace" title="=&gt; scales.xml.Namespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[String]" id="scales.xml.serializers;XmlPrinter.doElement.addDef">addDef</a> =
      <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.addedDefaultNS" title="Boolean">addedDefaultNS</a> <span title="(x: Boolean)Boolean">||</span> <a href="#scales.xml.serializers;XmlPrinter.doElement.default" title="Option[String]">default</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// we have a new mapping, old one doesn't work anymore</span>
        <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="(key: String)String">mappings</a><span class="delimiter">(</span><a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults" title="scales.xml.impl.NamespaceDefaults.type">NamespaceDefaults</a>.<a href="../impl/NamespaceExtras.scala.html#scales.xml.impl.NamespaceDefaults.namespace" title="=&gt; scales.xml.Namespace">namespace</a>.<a href="../Namespaces.scala.html#scales.xml;UnderlyingNamespace.uri" title="=&gt; String">uri</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span>
        <span title="None.type">None</span>

    <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;NamespaceContext" title="(mappings: scala.collection.immutable.Map[String,String], declMap: scala.collection.immutable.Map[String,String], addDefault: Option[String])scales.xml.serializers.NamespaceContext">NamespaceContext</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.doElement.mappings" title="scala.collection.immutable.Map[String,String]">mappings</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.declMap" title="scala.collection.immutable.Map[String,String]">declMap</a>, <a href="#scales.xml.serializers;XmlPrinter.doElement.addDef" title="Option[String]">addDef</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(decl: scales.xml.Declaration, out: java.io.Writer)scales.xml.serializers.SerializerData" id="scales.xml.serializers;XmlPrinter.withWriter">withWriter</a><span class="delimiter">(</span><a title="scales.xml.Declaration" id="scales.xml.serializers;XmlPrinter.withWriter.decl">decl</a>: <a href="../XmlTypes.scala.html#scales.xml;Declaration" title="scales.xml.Declaration">Declaration</a>, <a title="java.io.Writer" id="scales.xml.serializers;XmlPrinter.withWriter.out">out</a>: <span title="java.io.Writer">Writer</span><span class="delimiter">)</span>: <a href="Serializers.scala.html#scales.xml.serializers;SerializerData" title="scales.xml.serializers.SerializerData">SerializerData</a> = <a href="Serializers.scala.html#scales.xml.serializers;SerializerData" title="(out: java.io.Writer, version: scales.xml.XmlVersion, encoding: java.nio.charset.Charset)scales.xml.serializers.SerializerData">SerializerData</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.withWriter.out" title="java.io.Writer">out</a>, <a href="#scales.xml.serializers;XmlPrinter.withWriter.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.version" title="=&gt; scales.xml.XmlVersion">version</a>, <a href="#scales.xml.serializers;XmlPrinter.withWriter.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.encoding" title="=&gt; java.nio.charset.Charset">encoding</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(pout: scales.xml.serializers.XmlOutput, misc: Iterable[scales.xml.Misc], serializer: scales.xml.serializers.Serializer)(scales.xml.serializers.XmlOutput, Option[Throwable])" id="scales.xml.serializers;XmlPrinter.serializeMisc">serializeMisc</a><span class="delimiter">(</span><a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.serializeMisc.pout">pout</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="scales.xml.serializers.XmlOutput">XmlOutput</a>, <a title="Iterable[scales.xml.Misc]" id="scales.xml.serializers;XmlPrinter.serializeMisc.misc">misc</a>: <span title="Iterable[scales.xml.Misc]">Iterable</span><span class="delimiter">[</span>Misc<span class="delimiter">]</span>, <a title="scales.xml.serializers.Serializer" id="scales.xml.serializers;XmlPrinter.serializeMisc.serializer">serializer</a>: <a href="Serializers.scala.html#scales.xml.serializers;Serializer" title="scales.xml.serializers.Serializer">Serializer</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Option[Throwable]" id="scales.xml.serializers;XmlPrinter.serializeMisc.opt">opt</a> = <a href="#scales.xml.serializers;XmlPrinter.serializeMisc.misc" title="Iterable[scales.xml.Misc]">misc</a>.<span title="(z: Option[Throwable])(op: (Option[Throwable], scales.xml.Misc) =&gt; Option[Throwable])Option[Throwable]">foldLeft</span><span class="delimiter">(</span><span title="None.type">None</span>: <span title="Option[Throwable]">Option</span><span class="delimiter">[</span>Throwable<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="Option[Throwable]" id="scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.x">x</a>, <a title="scales.xml.Misc" id="scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.m">m</a><span title="scales.xml.Misc" class="delimiter">)</span> =&gt;
      <a href="#scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.x" title="Option[Throwable]">x</a>.<span title="(alternative: =&gt; Option[Throwable])Option[Throwable]">orElse</span> <span class="delimiter">{</span>
        <a href="#scales.xml.serializers;XmlPrinter.serializeMisc.serializer" title="scales.xml.serializers.Serializer">serializer</a>.<a href="Serializers.scala.html#scales.xml.serializers;Serializer.item" title="(item: scales.xml.XmlItem, path: List[scales.xml.QName])Option[Throwable]">item</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.m" title="scales.xml.Misc">m</a>.<span title="[X](fa: scales.xml.Comment =&gt; X, fb: scales.xml.PI =&gt; X)X">fold</span><span title="(fa: scales.xml.Comment =&gt; scales.xml.XmlItem, fb: scales.xml.PI =&gt; scales.xml.XmlItem)scales.xml.XmlItem" class="delimiter">[</span><a href="../XmlTypes.scala.html#scales.xml;XmlItem" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scales.xml.Comment" id="scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.$anonfun.z">z</a> =&gt; <a href="#scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.$anonfun.z" title="scales.xml.Comment">z</a>, <a title="scales.xml.PI" id="scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.$anonfun.y">y</a> =&gt; <a href="#scales.xml.serializers;XmlPrinter.serializeMisc.opt.$anonfun.$anonfun.y" title="scales.xml.PI">y</a><span class="delimiter">)</span>, List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span title="(_1: scales.xml.serializers.XmlOutput, _2: Option[Throwable])(scales.xml.serializers.XmlOutput, Option[Throwable])" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.serializeMisc.pout" title="scales.xml.serializers.XmlOutput">pout</a>, <a href="#scales.xml.serializers;XmlPrinter.serializeMisc.opt" title="Option[Throwable]">opt</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(pout: scales.xml.serializers.XmlOutput, doc: scales.xml.DocLike)(serializerf: (scales.xml.serializers.XmlOutput, scales.xml.serializers.Serializer) =&gt; (scales.xml.serializers.XmlOutput, Option[Throwable]))scales.xml.serializers.Serializer =&gt; Option[Throwable]" id="scales.xml.serializers;XmlPrinter.headerAndFooter">headerAndFooter</a><span class="delimiter">(</span><a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.headerAndFooter.pout">pout</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="scales.xml.serializers.XmlOutput">XmlOutput</a>, <a title="scales.xml.DocLike" id="scales.xml.serializers;XmlPrinter.headerAndFooter.doc">doc</a>: <a href="../XmlTypes.scala.html#scales.xml;DocLike" title="scales.xml.DocLike">DocLike</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="(scales.xml.serializers.XmlOutput, scales.xml.serializers.Serializer) =&gt; (scales.xml.serializers.XmlOutput, Option[Throwable])" id="scales.xml.serializers;XmlPrinter.headerAndFooter.serializerf">serializerf</a>: <span class="delimiter">(</span>XmlOutput, Serializer<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>XmlOutput, Option<span class="delimiter">[</span>Throwable<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>: Serializer =&gt; Option<span class="delimiter">[</span>Throwable<span class="delimiter">]</span> = <span class="delimiter">{</span> <a title="scales.xml.serializers.Serializer" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.serializer">serializer</a> =&gt;

    <span class="keyword">var</span> <a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.out">out</a> = <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.pout" title="scales.xml.serializers.XmlOutput">pout</a>
    <span class="comment">// TODO DTD</span>
    <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.serializer" title="scales.xml.serializers.Serializer">serializer</a>.<a href="Serializers.scala.html#scales.xml.serializers;Serializer.xmlDeclaration" title="(encoding: java.nio.charset.Charset, version: scales.xml.XmlVersion)Option[Throwable]">xmlDeclaration</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.pout" title="scales.xml.serializers.XmlOutput">pout</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput.data" title="=&gt; scales.xml.serializers.SerializerData">data</a>.<a href="Serializers.scala.html#scales.xml.serializers;SerializerData.encoding" title="=&gt; java.nio.charset.Charset">encoding</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.pout" title="scales.xml.serializers.XmlOutput">pout</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput.data" title="=&gt; scales.xml.serializers.SerializerData">data</a>.<a href="Serializers.scala.html#scales.xml.serializers;SerializerData.version" title="=&gt; scales.xml.XmlVersion">version</a><span class="delimiter">)</span>.<span title="(alternative: =&gt; Option[Throwable])Option[Throwable]">orElse</span> <span class="delimiter">{</span>
      <span class="comment">// DTD</span>
      <span title="None.type">None</span>
    <span class="delimiter">}</span>.<span title="(alternative: =&gt; Option[Throwable])Option[Throwable]">orElse</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$3.pout" title="(scales.xml.serializers.XmlOutput, Option[Throwable])" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$3" title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$3.pout">pout</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$3" title="Option[Throwable]" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$3.opt">opt</a><span class="delimiter">)</span> = <a href="#scales.xml.serializers;XmlPrinter.serializeMisc" title="(pout: scales.xml.serializers.XmlOutput, misc: Iterable[scales.xml.Misc], serializer: scales.xml.serializers.Serializer)(scales.xml.serializers.XmlOutput, Option[Throwable])">serializeMisc</a><span title="(scales.xml.serializers.XmlOutput, Option[Throwable]) @unchecked" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.out" title="scales.xml.serializers.XmlOutput">out</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.doc" title="scales.xml.DocLike">doc</a>.<a href="../XmlTypes.scala.html#scales.xml;DocLike.prolog" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#scales.xml;Prolog.misc" title="=&gt; scales.xml.Miscs">misc</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.serializer" title="scales.xml.serializers.Serializer">serializer</a><span class="delimiter">)</span>
      <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.out" title="scales.xml.serializers.XmlOutput">out</a> = <span title="scales.xml.serializers.XmlOutput">pout</span>
      <span title="Option[Throwable]">opt</span>
    <span class="delimiter">}</span>.<span title="(alternative: =&gt; Option[Throwable])Option[Throwable]">orElse</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$4.pout" title="(scales.xml.serializers.XmlOutput, Option[Throwable])" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$4" title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$4.pout">pout</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$4" title="Option[Throwable]" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$4.opt">opt</a><span class="delimiter">)</span> = <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.serializerf" title="(v1: scales.xml.serializers.XmlOutput, v2: scales.xml.serializers.Serializer)(scales.xml.serializers.XmlOutput, Option[Throwable])">serializerf</a><span title="(scales.xml.serializers.XmlOutput, Option[Throwable]) @unchecked" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.out" title="scales.xml.serializers.XmlOutput">out</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.serializer" title="scales.xml.serializers.Serializer">serializer</a><span class="delimiter">)</span>
      <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.out" title="scales.xml.serializers.XmlOutput">out</a> = <span title="scales.xml.serializers.XmlOutput">pout</span>
      <span title="Option[Throwable]">opt</span>
    <span class="delimiter">}</span>.<span title="(alternative: =&gt; Option[Throwable])Option[Throwable]">orElse</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$5.pout" title="(scales.xml.serializers.XmlOutput, Option[Throwable])" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$5" title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$5.pout">pout</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$5" title="Option[Throwable]" id="scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.x$5.opt">opt</a><span class="delimiter">)</span> = <a href="#scales.xml.serializers;XmlPrinter.serializeMisc" title="(pout: scales.xml.serializers.XmlOutput, misc: Iterable[scales.xml.Misc], serializer: scales.xml.serializers.Serializer)(scales.xml.serializers.XmlOutput, Option[Throwable])">serializeMisc</a><span title="(scales.xml.serializers.XmlOutput, Option[Throwable]) @unchecked" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.out" title="scales.xml.serializers.XmlOutput">out</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.doc" title="scales.xml.DocLike">doc</a>.<a href="../XmlTypes.scala.html#scales.xml;DocLike.end" title="=&gt; scales.xml.EndMisc">end</a>.<a href="../XmlTypes.scala.html#scales.xml;EndMisc.misc" title="=&gt; scales.xml.Miscs">misc</a>, <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.serializer" title="scales.xml.serializers.Serializer">serializer</a><span class="delimiter">)</span>
      <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter.$anonfun.out" title="scales.xml.serializers.XmlOutput">out</a> = <span title="scales.xml.serializers.XmlOutput">pout</span>
      <span title="Option[Throwable]">opt</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">type</span> <a title="XmlPrinter extends scales.xml.XmlPull with java.io.Closeable with scales.utils.resources.IsClosed" id="scales.xml.serializers;XmlPrinter;CloseablePull">CloseablePull</a> = <a href="#scales.xml.serializers;XmlPrinter;<refinement>" title="XmlPrinter extends scales.xml.XmlPull with java.io.Closeable with scales.utils.resources.IsClosed">XmlPull</a> <span class="keyword">with</span> java.io.Closeable <span class="keyword">with</span> IsClosed

  <span class="comment">/**
   * Placeholder - prefer serialize instead
   */</span>
  <span class="keyword">def</span> <a title="[T](pout: scales.xml.serializers.XmlOutput)(it: T)(implicit evidence$2: scales.xml.serializers.SerializeableXml[T])Option[Throwable]" id="scales.xml.serializers;XmlPrinter.foldPrint">foldPrint</a><span class="delimiter">[</span><a title="" id="scales.xml.serializers;XmlPrinter.foldPrint;T">T</a>: SerializeableXml<span class="delimiter">]</span><span class="delimiter">(</span><a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.foldPrint.pout">pout</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="scales.xml.serializers.XmlOutput">XmlOutput</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="scales.xml.serializers;XmlPrinter.foldPrint.it">it</a>: <a href="#scales.xml.serializers;XmlPrinter.foldPrint;T" title="T">T</a><span class="delimiter">)</span> =
    <a href="#scales.xml.serializers;XmlPrinter.serialize" title="(pout: scales.xml.serializers.XmlOutput)(it: T)(implicit evidence$3: scales.xml.serializers.SerializeableXml[T])Option[Throwable]">serialize</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.foldPrint.pout" title="scales.xml.serializers.XmlOutput">pout</a><span class="delimiter">)</span><a href="#scales.xml.serializers;XmlPrinter.foldPrint.evidence$2" title="scales.xml.serializers.SerializeableXml[T]" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.foldPrint.it" title="T">it</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Serializes items which can behave like xml.
   */</span>
  <span class="keyword">def</span> <a title="[T](pout: scales.xml.serializers.XmlOutput)(it: T)(implicit evidence$3: scales.xml.serializers.SerializeableXml[T])Option[Throwable]" id="scales.xml.serializers;XmlPrinter.serialize">serialize</a><span class="delimiter">[</span><a title="" id="scales.xml.serializers;XmlPrinter.serialize;T">T</a>: SerializeableXml<span class="delimiter">]</span><span class="delimiter">(</span><a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.serialize.pout">pout</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="scales.xml.serializers.XmlOutput">XmlOutput</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="scales.xml.serializers;XmlPrinter.serialize.it">it</a>: <a href="#scales.xml.serializers;XmlPrinter.serialize;T" title="T">T</a><span class="delimiter">)</span> =
    <a href="#scales.xml.serializers;XmlPrinter.serialize.pout" title="scales.xml.serializers.XmlOutput">pout</a>.<a href="Serializers.scala.html#scales.xml.serializers;SerializerFactory.apply" title="(thunk: scales.xml.serializers.Serializer =&gt; Option[Throwable])(data: scales.xml.serializers.SerializerData)Option[Throwable]">serializerF</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scales.xml.serializers.SerializeableXml[T]" id="scales.xml.serializers;XmlPrinter.serialize.sxml">sxml</a> = <span title="[T](implicit e: T)T">implicitly</span><a href="#scales.xml.serializers;XmlPrinter.serialize.evidence$3" title="(implicit e: scales.xml.serializers.SerializeableXml[T])scales.xml.serializers.SerializeableXml[T]" class="delimiter">[</a><a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml" title="scales.xml.serializers.SerializeableXml[T]">SerializeableXml</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
      <a href="#scales.xml.serializers;XmlPrinter.headerAndFooter" title="(pout: scales.xml.serializers.XmlOutput, doc: scales.xml.DocLike)(serializerf: (scales.xml.serializers.XmlOutput, scales.xml.serializers.Serializer) =&gt; (scales.xml.serializers.XmlOutput, Option[Throwable]))scales.xml.serializers.Serializer =&gt; Option[Throwable]">headerAndFooter</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.serialize.pout" title="scales.xml.serializers.XmlOutput">pout</a>, <a href="#scales.xml.serializers;XmlPrinter.serialize.sxml" title="scales.xml.serializers.SerializeableXml[T]">sxml</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml.doc" title="(it: T)scales.xml.DocLike">doc</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.serialize.it" title="T">it</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>
        <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml.apply" title="(it: T)(out: scales.xml.serializers.XmlOutput, serializer: scales.xml.serializers.Serializer)(scales.xml.serializers.XmlOutput, Option[Throwable])">sxml</a><a href="#scales.xml.serializers;XmlPrinter.serialize.$anonfun.out" title="scales.xml.serializers.XmlOutput" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.serialize.it" title="T">it</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.serialize.pout" title="scales.xml.serializers.XmlOutput">pout</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput.data" title="=&gt; scales.xml.serializers.SerializerData">data</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Writes the xml to a given Writer with defaults provided for .
   */</span> 
  <span class="keyword">def</span> <a title="[T](it: T, output: java.io.Writer, version: Option[scales.xml.XmlVersion], encoding: Option[java.nio.charset.Charset])(implicit serializerFI: scales.xml.serializers.SerializerFactory, implicit sxml: scales.xml.serializers.SerializeableXml[T])Option[Throwable]" id="scales.xml.serializers;XmlPrinter.writeTo">writeTo</a><span class="delimiter">[</span><a title="" id="scales.xml.serializers;XmlPrinter.writeTo$default$4;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="scales.xml.serializers;XmlPrinter.writeTo.it">it</a>: <a href="#scales.xml.serializers;XmlPrinter.writeTo$default$4;T" title="T">T</a>, <a title="java.io.Writer" id="scales.xml.serializers;XmlPrinter.writeTo.output">output</a> : <span title="java.io.Writer">Writer</span>, <a title="Option[scales.xml.XmlVersion]" id="scales.xml.serializers;XmlPrinter.writeTo$default$3">version</a>: <span title="Option[scales.xml.XmlVersion]">Option</span><span class="delimiter">[</span>XmlVersion<span class="delimiter">]</span> = <span title="None.type">None</span>, <a title="Option[java.nio.charset.Charset]" id="scales.xml.serializers;XmlPrinter.writeTo$default$4">encoding</a>: <span title="Option[java.nio.charset.Charset]">Option</span><span class="delimiter">[</span>Charset<span class="delimiter">]</span> = <span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.serializers.SerializerFactory" id="scales.xml.serializers;XmlPrinter.writeTo.serializerFI">serializerFI</a>: <a href="Serializers.scala.html#scales.xml.serializers;SerializerFactory" title="scales.xml.serializers.SerializerFactory">SerializerFactory</a>, <a title="scales.xml.serializers.SerializeableXml[T]" id="scales.xml.serializers;XmlPrinter.writeTo.sxml">sxml</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml" title="scales.xml.serializers.SerializeableXml[T]">SerializeableXml</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Option[Throwable]">Option</span><span class="delimiter">[</span>Throwable<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scales.xml.Declaration" id="scales.xml.serializers;XmlPrinter.writeTo.decl">decl</a> = <a href="#scales.xml.serializers;XmlPrinter.writeTo.sxml" title="scales.xml.serializers.SerializeableXml[T]">sxml</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml.doc" title="(it: T)scales.xml.DocLike">doc</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.writeTo.it" title="T">it</a><span class="delimiter">)</span>.<a href="../XmlTypes.scala.html#scales.xml;DocLike.prolog" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#scales.xml;Prolog.decl" title="=&gt; scales.xml.Declaration">decl</a>
    <span class="keyword">val</span> <a title="scales.xml.serializers.SerializerData" id="scales.xml.serializers;XmlPrinter.writeTo.sd">sd</a> = <a href="Serializers.scala.html#scales.xml.serializers;SerializerData" title="(out: java.io.Writer, version: scales.xml.XmlVersion, encoding: java.nio.charset.Charset)scales.xml.serializers.SerializerData">SerializerData</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.writeTo.output" title="java.io.Writer">output</a>, 
      <a href="#scales.xml.serializers;XmlPrinter.writeTo$default$3" title="Option[scales.xml.XmlVersion]">version</a>.<span title="(default: =&gt; scales.xml.XmlVersion)scales.xml.XmlVersion">getOrElse</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.writeTo.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.version" title="=&gt; scales.xml.XmlVersion">version</a><span class="delimiter">)</span>, 
      <a href="#scales.xml.serializers;XmlPrinter.writeTo$default$4" title="Option[java.nio.charset.Charset]">encoding</a>.<span title="(default: =&gt; java.nio.charset.Charset)java.nio.charset.Charset">getOrElse</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.writeTo.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.encoding" title="=&gt; java.nio.charset.Charset">encoding</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.writeTo.xo">xo</a> = <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="(data: scales.xml.serializers.SerializerData, currentMappings: scala.collection.immutable.Stack[scala.collection.immutable.Map[String,String]], path: List[scales.xml.QName])(implicit serializerFI: scales.xml.serializers.SerializerFactory)scales.xml.serializers.XmlOutput">XmlOutput</a><a href="#scales.xml.serializers;XmlPrinter.writeTo.serializerFI" title="scales.xml.serializers.SerializerFactory" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.writeTo.sd" title="scales.xml.serializers.SerializerData">sd</a><span class="delimiter">)</span>
<span class="comment">//    println(xo.serializerF.getClass.getName)</span>
<span class="comment">//    println(implicitly[SerializerFactory].getClass.getName)</span>
    <a href="#scales.xml.serializers;XmlPrinter.serialize" title="(pout: scales.xml.serializers.XmlOutput)(it: T)(implicit evidence$3: scales.xml.serializers.SerializeableXml[T])Option[Throwable]">serialize</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.writeTo.xo" title="scales.xml.serializers.XmlOutput">xo</a><span class="delimiter">)</span><a href="#scales.xml.serializers;XmlPrinter.writeTo.sxml" title="scales.xml.serializers.SerializeableXml[T]" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.writeTo.it" title="T">it</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="comment">/**
   * Prints to stdout, useful for testing etc  Will dump an error if one is found.
   *
   * Note it outputs to the vmDefaultCharset so it should always be C+P able
   */</span>
  <span class="keyword">def</span> <a title="[T](xml: T)(implicit serf: scales.xml.serializers.SerializerFactory, implicit sxml: scales.xml.serializers.SerializeableXml[T])Unit" id="scales.xml.serializers;XmlPrinter.printTree">printTree</a><span class="delimiter">[</span><a title="" id="scales.xml.serializers;XmlPrinter.printTree;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="scales.xml.serializers;XmlPrinter.printTree.xml">xml</a>: <a href="#scales.xml.serializers;XmlPrinter.printTree;T" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.serializers.SerializerFactory" id="scales.xml.serializers;XmlPrinter.printTree.serf">serf</a>: <a href="Serializers.scala.html#scales.xml.serializers;SerializerFactory" title="scales.xml.serializers.SerializerFactory">SerializerFactory</a>, <a title="scales.xml.serializers.SerializeableXml[T]" id="scales.xml.serializers;XmlPrinter.printTree.sxml">sxml</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml" title="scales.xml.serializers.SerializeableXml[T]">SerializeableXml</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.PrintWriter" id="scales.xml.serializers;XmlPrinter.printTree.out">out</a> = <span title="(x$1: java.io.OutputStream)java.io.PrintWriter" class="keyword">new</span> java.io.<span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="java.io.PrintStream">out</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scales.xml.Declaration" id="scales.xml.serializers;XmlPrinter.printTree.decl">decl</a> = <a href="#scales.xml.serializers;XmlPrinter.printTree.sxml" title="scales.xml.serializers.SerializeableXml[T]">sxml</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml.doc" title="(it: T)scales.xml.DocLike">doc</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.printTree.xml" title="T">xml</a><span class="delimiter">)</span>.<a href="../XmlTypes.scala.html#scales.xml;DocLike.prolog" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#scales.xml;Prolog.decl" title="=&gt; scales.xml.Declaration">decl</a>
    <a href="#scales.xml.serializers;XmlPrinter.serialize" title="(pout: scales.xml.serializers.XmlOutput)(it: T)(implicit evidence$3: scales.xml.serializers.SerializeableXml[T])Option[Throwable]">serialize</a><span class="delimiter">(</span><a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="(data: scales.xml.serializers.SerializerData, currentMappings: scala.collection.immutable.Stack[scala.collection.immutable.Map[String,String]], path: List[scales.xml.QName])(implicit serializerFI: scales.xml.serializers.SerializerFactory)scales.xml.serializers.XmlOutput">XmlOutput</a><a href="#scales.xml.serializers;XmlPrinter.printTree.serf" title="scales.xml.serializers.SerializerFactory" class="delimiter">(</a><a href="Serializers.scala.html#scales.xml.serializers;SerializerData" title="(out: java.io.Writer, version: scales.xml.XmlVersion, encoding: java.nio.charset.Charset)scales.xml.serializers.SerializerData">SerializerData</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.printTree.out" title="java.io.PrintWriter">out</a>, <a href="#scales.xml.serializers;XmlPrinter.printTree.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.version" title="=&gt; scales.xml.XmlVersion">version</a>, <a href="#scales.xml.serializers;XmlPrinter.printTree.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.encoding" title="=&gt; java.nio.charset.Charset">encoding</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><a href="#scales.xml.serializers;XmlPrinter.printTree.sxml" title="scales.xml.serializers.SerializeableXml[T]" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.printTree.xml" title="T">xml</a><span class="delimiter">)</span> <span title="(f: Throwable =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="Throwable" id="scales.xml.serializers;XmlPrinter.printTree.$anonfun.e">e</a> =&gt;
      <a href="#scales.xml.serializers;XmlPrinter.printTree.out" title="java.io.PrintWriter">out</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;Could not serialize got the following exception &quot;)" class="string">&quot;Could not serialize got the following exception &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scales.xml.serializers;XmlPrinter.printTree.$anonfun.e" title="Throwable">e</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; - &quot;)" class="string">&quot; - &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scales.xml.serializers;XmlPrinter.printTree.$anonfun.e" title="Throwable">e</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
      <a href="#scales.xml.serializers;XmlPrinter.printTree.$anonfun.e" title="Throwable">e</a>.<span title="(x$1: java.io.PrintWriter)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.printTree.out" title="java.io.PrintWriter">out</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#scales.xml.serializers;XmlPrinter.printTree.out" title="java.io.PrintWriter">out</a>.<span title="()Unit">flush</span>
    <span class="comment">//out.close, v bad to close stdout :-)</span>
    <span title="()Unit">println</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a string version of the tree or throws
   */</span>
  <span class="keyword">def</span> <a title="[T](xml: T)(implicit serf: scales.xml.serializers.SerializerFactory, implicit sxml: scales.xml.serializers.SerializeableXml[T])String" id="scales.xml.serializers;XmlPrinter.asString">asString</a><span class="delimiter">[</span><a title="" id="scales.xml.serializers;XmlPrinter.asString;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="scales.xml.serializers;XmlPrinter.asString.xml">xml</a>: <a href="#scales.xml.serializers;XmlPrinter.asString;T" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.serializers.SerializerFactory" id="scales.xml.serializers;XmlPrinter.asString.serf">serf</a>: <a href="Serializers.scala.html#scales.xml.serializers;SerializerFactory" title="scales.xml.serializers.SerializerFactory">SerializerFactory</a>, <a title="scales.xml.serializers.SerializeableXml[T]" id="scales.xml.serializers;XmlPrinter.asString.sxml">sxml</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml" title="scales.xml.serializers.SerializeableXml[T]">SerializeableXml</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.StringWriter" id="scales.xml.serializers;XmlPrinter.asString.builder">builder</a> = <span title="java.io.StringWriter" class="keyword">new</span> java.io.<span title="java.io.StringWriter">StringWriter</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scales.xml.Declaration" id="scales.xml.serializers;XmlPrinter.asString.decl">decl</a> = <a href="#scales.xml.serializers;XmlPrinter.asString.sxml" title="scales.xml.serializers.SerializeableXml[T]">sxml</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;SerializeableXml.doc" title="(it: T)scales.xml.DocLike">doc</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.asString.xml" title="T">xml</a><span class="delimiter">)</span>.<a href="../XmlTypes.scala.html#scales.xml;DocLike.prolog" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#scales.xml;Prolog.decl" title="=&gt; scales.xml.Declaration">decl</a>
    <a href="#scales.xml.serializers;XmlPrinter.foldPrint" title="(pout: scales.xml.serializers.XmlOutput)(it: T)(implicit evidence$2: scales.xml.serializers.SerializeableXml[T])Option[Throwable]">foldPrint</a><span class="delimiter">(</span><a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="(data: scales.xml.serializers.SerializerData, currentMappings: scala.collection.immutable.Stack[scala.collection.immutable.Map[String,String]], path: List[scales.xml.QName])(implicit serializerFI: scales.xml.serializers.SerializerFactory)scales.xml.serializers.XmlOutput">XmlOutput</a><a href="#scales.xml.serializers;XmlPrinter.asString.serf" title="scales.xml.serializers.SerializerFactory" class="delimiter">(</a><a href="Serializers.scala.html#scales.xml.serializers;SerializerData" title="(out: java.io.Writer, version: scales.xml.XmlVersion, encoding: java.nio.charset.Charset)scales.xml.serializers.SerializerData">SerializerData</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.asString.builder" title="java.io.StringWriter">builder</a>, <a href="#scales.xml.serializers;XmlPrinter.asString.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.version" title="=&gt; scales.xml.XmlVersion">version</a>, <a href="#scales.xml.serializers;XmlPrinter.asString.decl" title="scales.xml.Declaration">decl</a>.<a href="../XmlTypes.scala.html#scales.xml;Declaration.encoding" title="=&gt; java.nio.charset.Charset">encoding</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><a href="#scales.xml.serializers;XmlPrinter.asString.sxml" title="scales.xml.serializers.SerializeableXml[T]" class="delimiter">(</a><a href="#scales.xml.serializers;XmlPrinter.asString.xml" title="T">xml</a><span class="delimiter">)</span> <span title="(f: Throwable =&gt; Nothing)Unit">foreach</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <a href="#scales.xml.serializers;XmlPrinter.asString.$anonfun.x$6" title="Throwable">_</a>
    <span class="delimiter">}</span>
    <a href="#scales.xml.serializers;XmlPrinter.asString.builder" title="java.io.StringWriter">builder</a>.<span title="()String">toString</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Just for items, given we don't want to generally serialize them directly but as part of a tree.  Useful for debugging only
   */</span> 
  <span class="keyword">def</span> <a title="(xmlItem: scales.xml.XmlItem)(implicit serf: scales.xml.serializers.SerializerFactory)String" id="scales.xml.serializers;XmlPrinter.itemAsString">itemAsString</a><span class="delimiter">(</span><a title="scales.xml.XmlItem" id="scales.xml.serializers;XmlPrinter.itemAsString.xmlItem">xmlItem</a>: <a href="../XmlTypes.scala.html#scales.xml;XmlItem" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.serializers.SerializerFactory" id="scales.xml.serializers;XmlPrinter.itemAsString.serf">serf</a>: <a href="Serializers.scala.html#scales.xml.serializers;SerializerFactory" title="scales.xml.serializers.SerializerFactory">SerializerFactory</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="items extends AnyRef with scales.xml.serializers.SerializeableXml[scales.xml.XmlItem]" id="scales.xml.serializers;XmlPrinter.itemAsString.items">items</a> = <a href="#scales.xml.serializers;XmlPrinter.itemAsString.items;$anon" title="scales.xml.serializers.SerializeableXml[scales.xml.XmlItem]" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with scales.xml.serializers.SerializeableXml[scales.xml.XmlItem]" id="scales.xml.serializers;XmlPrinter.itemAsString.items;$anon">SerializeableXml</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(it: scales.xml.XmlItem)scales.xml.EmptyDoc" id="scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.doc">doc</a><span class="delimiter">(</span><a title="scales.xml.XmlItem" id="scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.doc.it">it</a>: <a href="../XmlTypes.scala.html#scales.xml;XmlItem" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span> = <a href="../XmlTypes.scala.html#scales.xml;EmptyDoc" title="(prolog: scales.xml.Prolog, end: scales.xml.EndMisc)scales.xml.EmptyDoc">EmptyDoc</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(it: scales.xml.XmlItem)(out: scales.xml.serializers.XmlOutput, serializer: scales.xml.serializers.Serializer)(scales.xml.serializers.XmlOutput, Option[Throwable])" id="scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply">apply</a><span class="delimiter">(</span><a title="scales.xml.XmlItem" id="scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply.it">it</a>: <a href="../XmlTypes.scala.html#scales.xml;XmlItem" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply.out">out</a>: <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="scales.xml.serializers.XmlOutput">XmlOutput</a>, <a title="scales.xml.serializers.Serializer" id="scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply.serializer">serializer</a>: <a href="Serializers.scala.html#scales.xml.serializers;Serializer" title="scales.xml.serializers.Serializer">Serializer</a><span class="delimiter">)</span>: <span title="(scales.xml.serializers.XmlOutput, Option[Throwable])" class="delimiter">(</span>XmlOutput, Option<span class="delimiter">[</span>Throwable<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="(_1: scales.xml.serializers.XmlOutput, _2: Option[Throwable])(scales.xml.serializers.XmlOutput, Option[Throwable])" class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply.out" title="scales.xml.serializers.XmlOutput">out</a>, <a href="#scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply.serializer" title="scales.xml.serializers.Serializer">serializer</a>.<a href="Serializers.scala.html#scales.xml.serializers;Serializer.item" title="(item: scales.xml.XmlItem, path: List[scales.xml.QName])Option[Throwable]">item</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply.it" title="scales.xml.XmlItem">it</a>, <a href="#scales.xml.serializers;XmlPrinter.itemAsString.items;$anon.apply.out" title="scales.xml.serializers.XmlOutput">out</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput.path" title="=&gt; List[scales.xml.QName]">path</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">val</span> <a title="java.io.StringWriter" id="scales.xml.serializers;XmlPrinter.itemAsString.builder">builder</a> = <span title="java.io.StringWriter" class="keyword">new</span> java.io.<span title="java.io.StringWriter">StringWriter</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scales.xml.serializers.XmlOutput" id="scales.xml.serializers;XmlPrinter.itemAsString.o">o</a> = <a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput" title="(data: scales.xml.serializers.SerializerData, currentMappings: scala.collection.immutable.Stack[scala.collection.immutable.Map[String,String]], path: List[scales.xml.QName])(implicit serializerFI: scales.xml.serializers.SerializerFactory)scales.xml.serializers.XmlOutput">XmlOutput</a><a href="#scales.xml.serializers;XmlPrinter.itemAsString.serf" title="scales.xml.serializers.SerializerFactory" class="delimiter">(</a><a href="Serializers.scala.html#scales.xml.serializers;SerializerData" title="(out: java.io.Writer, version: scales.xml.XmlVersion, encoding: java.nio.charset.Charset)scales.xml.serializers.SerializerData">SerializerData</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.itemAsString.builder" title="java.io.StringWriter">builder</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="Serializers.scala.html#scales.xml.serializers;SerializerFactory.apply" title="(thunk: scales.xml.serializers.Serializer =&gt; Option[Throwable])(data: scales.xml.serializers.SerializerData)Option[Throwable]">serf</a><span class="delimiter">{</span> <a title="scales.xml.serializers.Serializer" id="scales.xml.serializers;XmlPrinter.itemAsString.$anonfun.s">s</a> =&gt;
      <a href="#scales.xml.serializers;XmlPrinter.itemAsString.$anonfun.s" title="scales.xml.serializers.Serializer">s</a>.<a href="Serializers.scala.html#scales.xml.serializers;Serializer.item" title="(item: scales.xml.XmlItem, path: List[scales.xml.QName])Option[Throwable]">item</a><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.itemAsString.xmlItem" title="scales.xml.XmlItem">xmlItem</a>, <a href="#scales.xml.serializers;XmlPrinter.itemAsString.o" title="scales.xml.serializers.XmlOutput">o</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput.path" title="=&gt; List[scales.xml.QName]">path</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">(</span><a href="#scales.xml.serializers;XmlPrinter.itemAsString.o" title="scales.xml.serializers.XmlOutput">o</a>.<a href="XmlPrinterTypes.scala.html#scales.xml.serializers;XmlOutput.data" title="=&gt; scales.xml.serializers.SerializerData">data</a><span class="delimiter">)</span>
<span class="comment">//    foldPrint(XmlOutput(SerializerData(builder)))(xml) foreach {</span>
  <span class="comment">//    throw _</span>
    <span class="comment">//}</span>
    <a href="#scales.xml.serializers;XmlPrinter.itemAsString.builder" title="java.io.StringWriter">builder</a>.<span title="()String">toString</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
