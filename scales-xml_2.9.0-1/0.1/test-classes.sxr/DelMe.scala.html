<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>DelMe.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    
<style id="linesStyle">
.lineHighlight {
  background-color: #a5a5a5;
}
</style>
<script type="text/javascript">
function selectedLine() {
    var loca = /^.*#l(.*)/.exec(location.href);
    return loca ? loca[1] : '0';
}

function highlightLine(ln){
  $('#l'+ln).toggleClass('lineHighlight');
}

function gotoLine(ln){
  $('#l'+ln).focus();
}

$(function(){
  var line = selectedLine();
  if (line != '0') highlightLine(line)
});
</script></head>
    <body>
        <pre>
<!-- SXR_LINES --><a href="l1"></a><span id="l1"><span class="keyword">package</span> delme</span>
<a href="l2"></a><span id="l2"></span>
<a href="l3"></a><span id="l3"><span class="keyword">object</span> <a title="object delme.ReplaceStuff" id="8872">ReplaceStuff</a> <span title="ScalaObject" class="delimiter">{</span></span>
<a href="l4"></a><span id="l4"></span>
<a href="l5"></a><span id="l5">  <span class="keyword">val</span> <a title="() =&gt; java.lang.String" id="13215">userF</a> = <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span class="delimiter">{</span> </span>
<a href="l6"></a><span id="l6">    <span class="keyword">var</span> <a title="java.lang.String" id="13230">env</a> = <span title="object java.lang.System">System</span>.<span title="(x$1: java.lang.String)java.lang.String">getenv</span><span class="delimiter">(</span><span title="java.lang.String(&quot;USERNAME&quot;)" class="string">&quot;USERNAME&quot;</span><span class="delimiter">)</span></span>
<a href="l7"></a><span id="l7">    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#13230" title="java.lang.String">env</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span></span>
<a href="l8"></a><span id="l8">      <a href="#13230" title="java.lang.String">env</a> = <span title="object java.lang.System">System</span>.<span title="(x$1: java.lang.String)java.lang.String">getenv</span><span class="delimiter">(</span><span title="java.lang.String(&quot;USER&quot;)" class="string">&quot;USER&quot;</span><span class="delimiter">)</span></span>
<a href="l9"></a><span id="l9">    <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#13230" title="java.lang.String">env</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span></span>
<a href="l10"></a><span id="l10">      <span title="java.lang.String(&quot;Unknown User&quot;)" class="string">&quot;Unknown User&quot;</span></span>
<a href="l11"></a><span id="l11">    <span class="keyword">else</span></span>
<a href="l12"></a><span id="l12">      <a href="#13230" title="java.lang.String">env</a></span>
<a href="l13"></a><span id="l13">  <span class="delimiter">}</span></span>
<a href="l14"></a><span id="l14"></span>
<a href="l15"></a><span id="l15">  <span class="keyword">val</span> <a title="scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]" id="13217">sysEnv</a> = <span class="delimiter">{</span></span>
<a href="l16"></a><span id="l16"><span class="comment">//    import scala.collection.jcl.Conversions._</span></span>
<a href="l17"></a><span id="l17">    <span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._</span>
<a href="l18"></a><span id="l18">    <span title="object java.lang.System">System</span>.<span title="()java.util.Map[java.lang.String,java.lang.String]">getenv</span><span title="(m: java.util.Map[java.lang.String,java.lang.String])scala.collection.mutable.Map[java.lang.String,java.lang.String]" class="delimiter">(</span><span class="delimiter">)</span>.<span title="(f: ((java.lang.String, java.lang.String)) =&gt; (java.lang.String, () =&gt; java.lang.String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[java.lang.String,java.lang.String],(java.lang.String, () =&gt; java.lang.String),scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]])scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map.Coll,(java.lang.String, () =&gt; java.lang.String),scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]]" class="delimiter">{</span><span class="delimiter">(</span><a title="(java.lang.String, java.lang.String)" id="27769">x</a><span class="delimiter">)</span> =&gt; <span title="(_1: java.lang.String, _2: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)" class="delimiter">(</span><a href="#27769" title="(java.lang.String, java.lang.String)">x</a>.<span title="=&gt; java.lang.String">_1</span>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#27769" title="(java.lang.String, java.lang.String)">x</a>.<span title="=&gt; java.lang.String">_2</span><span class="delimiter">)</span><span class="delimiter">}</span></span>
<a href="l19"></a><span id="l19">  <span class="delimiter">}</span></span>
<a href="l20"></a><span id="l20">  <span class="keyword">val</span> <a title="scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]" id="13219">sysProperties</a> = <span class="delimiter">{</span></span>
<a href="l21"></a><span id="l21"><span class="comment">//    import scala.collection.jcl.Conversions._</span></span>
<a href="l22"></a><span id="l22">    <span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._</span>
<a href="l23"></a><span id="l23">    <span title="object java.lang.System">System</span>.<span title="()java.util.Properties">getProperties</span><span title="implicit scala.collection.JavaConversions.propertiesAsScalaMap : (p: java.util.Properties)scala.collection.mutable.Map[String,String]" class="delimiter">(</span><span class="delimiter">)</span>.<span title="(f: ((String, String)) =&gt; (java.lang.String, () =&gt; java.lang.String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[String,String],(java.lang.String, () =&gt; java.lang.String),scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]])scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map.Coll,(java.lang.String, () =&gt; java.lang.String),scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]]" class="delimiter">{</span><span class="delimiter">(</span><a title="(String, String)" id="29896">x</a><span class="delimiter">)</span> =&gt; <span title="(_1: java.lang.String, _2: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)" class="delimiter">(</span><a href="#29896" title="(String, String)">x</a>.<span title="=&gt; String">_1</span>.<span title="()java.lang.String">toString</span>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#29896" title="(String, String)">x</a>.<span title="=&gt; String">_2</span>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">}</span></span>
<a href="l24"></a><span id="l24">  <span class="delimiter">}</span></span>
<a href="l25"></a><span id="l25"></span>
<a href="l26"></a><span id="l26">  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]" id="13221">siteTokens</a> = <span title="(elems: (java.lang.String, () =&gt; java.lang.String)*)scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">Map</span><span class="delimiter">(</span> <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;User&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <a href="#13215" title="=&gt; () =&gt; java.lang.String">userF</a>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;timestamp&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">{</span> <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span><span title="java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span><span class="delimiter">}</span><span class="delimiter">}</span>, </span>
<a href="l27"></a><span id="l27">		   <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;datetime&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">{</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>java.text.<span title="object java.text.DateFormat">DateFormat</span>.<span title="()java.text.DateFormat">getDateTimeInstance</span>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><span title="java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">}</span>,</span>
<a href="l28"></a><span id="l28">		   <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;artifactID&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">{</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="java.lang.String(&quot;ffff&quot;)" class="string">&quot;ffff&quot;</span><span class="delimiter">}</span> <span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(java.lang.String, () =&gt; java.lang.String)])scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">++</span> <a href="#13217" title="=&gt; scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]">sysEnv</a> <span title="(xs: scala.collection.GenTraversableOnce[(java.lang.String, () =&gt; java.lang.String)])scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">++</span> <a href="#13219" title="=&gt; scala.collection.mutable.Map[java.lang.String,() =&gt; java.lang.String]">sysProperties</a></span>
<a href="l29"></a><span id="l29"></span>
<a href="l30"></a><span id="l30">  </span>
<a href="l31"></a><span id="l31">  <span class="keyword">def</span> <a title="(in: String, pos: Int)(Int, Boolean)" id="13222">hasStart</a><span class="delimiter">(</span><a title="String" id="31470">in</a> : <span title="String">String</span>, <a title="Int" id="31471">pos</a> : <span title="Int">Int</span> <span class="delimiter">)</span> : <span title="(Int, Boolean)" class="delimiter">(</span>Int, Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span></span>
<a href="l32"></a><span id="l32">    <span class="keyword">val</span> <a title="Int" id="31473">npos</a> = <a href="#31470" title="String">in</a>.<span title="(x$1: java.lang.String, x$2: Int)Int">indexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;${&quot;)" class="string">&quot;${&quot;</span>, <a href="#31471" title="Int">pos</a><span class="delimiter">)</span></span>
<a href="l33"></a><span id="l33">      <span title="(Int, Boolean)" class="keyword">if</span> <span class="delimiter">(</span><a href="#31473" title="Int">npos</a> <span title="(x: Int)Boolean">&gt;</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span></span>
<a href="l34"></a><span id="l34">	<span class="comment">// was it escaped?</span></span>
<a href="l35"></a><span id="l35">	<span title="(Int, Boolean)" class="keyword">if</span> <span class="delimiter">(</span><a href="#31473" title="Int">npos</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span> <a href="#31473" title="Int">npos</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#31470" title="String">in</a>.<span title="(x$1: Int)Char">charAt</span><span class="delimiter">(</span><a href="#31473" title="Int">npos</a> <span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">!=</span> <span title="Char(\'\\\\\')" class="char">'\\'</span><span class="delimiter">)</span> <span class="delimiter">)</span><span class="delimiter">{</span></span>
<a href="l36"></a><span id="l36">	  <span title="(_1: Int, _2: Boolean)(Int, Boolean)" class="delimiter">(</span><a href="#31473" title="Int">npos</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span></span>
<a href="l37"></a><span id="l37">	<span class="delimiter">}</span> <span class="keyword">else</span> <span title="(_1: Int, _2: Boolean)(Int, Boolean)" class="delimiter">(</span><a href="#31473" title="Int">npos</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span></span>
<a href="l38"></a><span id="l38">      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="(_1: Int, _2: Boolean)(Int, Boolean)" class="delimiter">(</span>-<span title="Int(-1)" class="int">1</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span></span>
<a href="l39"></a><span id="l39">  <span class="delimiter">}</span></span>
<a href="l40"></a><span id="l40"></span>
<a href="l41"></a><span id="l41">  <span class="comment">/**</span>
<a href="l42"></a><span id="l42">   * Like the Ant properties system the tokens may have tokens within their values, this expands them</span>
<a href="l43"></a><span id="l43">   * allowing for all kinds of crazy meta-property action.</span>
<a href="l44"></a><span id="l44">   */</span> </span>
<a href="l45"></a><span id="l45">  <span class="keyword">def</span> <a title="(tokens: Map[String,String])Map[String,String]" id="13223">expand</a><span class="delimiter">(</span> <a title="Map[String,String]" id="31670">tokens</a> : <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> = <span class="delimiter">{</span></span>
<a href="l46"></a><span id="l46">    @scala.annotation.tailrec</span>
<a href="l47"></a><span id="l47">    <span class="keyword">def</span> <a title="(tokens: Map[String,String])Map[String,String]" id="31672">iExpand</a><span class="delimiter">(</span> <a title="Map[String,String]" id="31673">tokens</a> : <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> = <span class="delimiter">{</span></span>
<a href="l48"></a><span id="l48">      <span class="keyword">var</span> <a title="Boolean" id="31676">hasFound</a> = <span title="Boolean(false)" class="keyword">false</span></span>
<a href="l49"></a><span id="l49">      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,String]" id="31677">res</a> = <a href="#31673" title="Map[String,String]">tokens</a>.<span title="(f: ((String, String)) =&gt; (String, String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,String],(String, String),scala.collection.immutable.Map[String,String]])scala.collection.immutable.Map[String,String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map.Coll,(String, String),scala.collection.immutable.Map[String,String]]" class="delimiter">{</span> <a title="(String, String)" id="31694">x</a> =&gt; </span>
<a href="l50"></a><span id="l50">	<span class="keyword">val</span> <a href="#31696" title="(Int, Boolean)" class="delimiter">(</a><a href="#31695" title="Int" id="31696">npos</a>, <a href="#31695" title="Boolean" id="31697">hasEnd</a><span class="delimiter">)</span> = <a href="#13222" title="(in: String, pos: Int)(Int, Boolean)">hasStart</a><span title="(Int, Boolean) @unchecked" class="delimiter">(</span><a href="#31694" title="(String, String)">x</a>.<span title="=&gt; String">_2</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span></span>
<a href="l51"></a><span id="l51">	<span title="(String, String)" class="keyword">if</span> <span class="delimiter">(</span><a href="#31697" title="Boolean">hasEnd</a><span class="delimiter">)</span> <span class="delimiter">{</span></span>
<a href="l52"></a><span id="l52">	  <a href="#31676" title="Boolean">hasFound</a> = <span title="Boolean(true)" class="keyword">true</span></span>
<a href="l53"></a><span id="l53">	  <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#31694" title="(String, String)">x</a>.<span title="=&gt; String">_1</span>, <a href="#13225" title="(in: String, tokens: Map[String,String], shouldExpand: Boolean)String">replaceTokens</a><span class="delimiter">(</span><a href="#31694" title="(String, String)">x</a>.<span title="=&gt; String">_2</span>, <a href="#31673" title="Map[String,String]">tokens</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l54"></a><span id="l54">	<span class="delimiter">}</span> <span class="keyword">else</span> <a href="#31694" title="(String, String)">x</a></span>
<a href="l55"></a><span id="l55">      <span class="delimiter">}</span></span>
<a href="l56"></a><span id="l56">      <span title="Map[String,String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#31676" title="Boolean">hasFound</a><span class="delimiter">)</span> <span class="delimiter">{</span></span>
<a href="l57"></a><span id="l57">	<a href="#31672" title="(tokens: Map[String,String])Map[String,String]">iExpand</a><span class="delimiter">(</span><span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, String)*)scala.collection.immutable.Map[String,String]" class="delimiter">[</span><span title="String">String</span>, <span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, String)])scala.collection.immutable.Map[String,String]">++</span> <a href="#31677" title="scala.collection.immutable.Map[String,String]">res</a><span class="delimiter">)</span></span>
<a href="l58"></a><span id="l58">      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, String)*)scala.collection.immutable.Map[String,String]" class="delimiter">[</span><span title="String">String</span>, <span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, String)])scala.collection.immutable.Map[String,String]">++</span> <a href="#31677" title="scala.collection.immutable.Map[String,String]">res</a></span>
<a href="l59"></a><span id="l59">    <span class="delimiter">}</span></span>
<a href="l60"></a><span id="l60">    <a href="#31672" title="(tokens: Map[String,String])Map[String,String]">iExpand</a><span class="delimiter">(</span><a href="#31670" title="Map[String,String]">tokens</a><span class="delimiter">)</span></span>
<a href="l61"></a><span id="l61">  <span class="delimiter">}</span></span>
<a href="l62"></a><span id="l62"></span>
<a href="l63"></a><span id="l63">  <span class="keyword">def</span> <a title="(in: String, tokens: Map[String,String])String" id="13224">replaceTokens</a><span class="delimiter">(</span> <a title="String" id="31725">in</a> : <span title="String">String</span>, <a title="Map[String,String]" id="31726">tokens</a> : <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="String">String</span> = </span>
<a href="l64"></a><span id="l64">    <a href="#13225" title="(in: String, tokens: Map[String,String], shouldExpand: Boolean)String">replaceTokens</a><span class="delimiter">(</span> <a href="#31725" title="String">in</a>, <a href="#31726" title="Map[String,String]">tokens</a>, <span title="Boolean(true)" class="keyword">true</span> <span class="delimiter">)</span></span>
<a href="l65"></a><span id="l65"></span>
<a href="l66"></a><span id="l66">  <span class="keyword">def</span> <a title="(in: String, tokens: Map[String,String], shouldExpand: Boolean)String" id="13225">replaceTokens</a><span class="delimiter">(</span> <a title="String" id="31721">in</a> : <span title="String">String</span>, <a title="Map[String,String]" id="31722">tokens</a> : <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>, <a title="Boolean" id="31723">shouldExpand</a> : <span title="Boolean">Boolean</span> <span class="delimiter">)</span> : <span title="String">String</span> = <span class="delimiter">{</span></span>
<a href="l67"></a><span id="l67">    <span class="keyword">val</span> <a title="java.lang.StringBuffer" id="32196">buf</a> = <span title="java.lang.StringBuffer" class="keyword">new</span> <span title="java.lang.StringBuffer">StringBuffer</span></span>
<a href="l68"></a><span id="l68"></span>
<a href="l69"></a><span id="l69">    <span class="keyword">val</span> <a title="Map[String,String]" id="32197">itokens</a> = <span title="Map[String,String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#31723" title="Boolean">shouldExpand</a><span class="delimiter">)</span> <a href="#13223" title="(tokens: Map[String,String])Map[String,String]">expand</a><span class="delimiter">(</span><a href="#31722" title="Map[String,String]">tokens</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#31722" title="Map[String,String]">tokens</a></span>
<a href="l70"></a><span id="l70"></span>
<a href="l71"></a><span id="l71">    <span class="keyword">def</span> <a title="(pos: Int)String" id="32198">iReplace</a><span class="delimiter">(</span> <a title="Int" id="32361">pos</a> : <span title="Int">Int</span> <span class="delimiter">)</span> : <span title="String">String</span> = <span class="delimiter">{</span></span>
<a href="l72"></a><span id="l72"><span class="comment">/*     val npos = in.indexOf(&quot;${&quot;, pos)</span>
<a href="l73"></a><span id="l73">      if (npos &gt; -1) {</span>
<a href="l74"></a><span id="l74">	// was it escaped?</span>
<a href="l75"></a><span id="l75">	if (npos == 0 || ( npos &gt; 0 &amp;&amp; in.charAt(npos -1) != '\\') ){</span>
<a href="l76"></a><span id="l76">*/</span></span>
<a href="l77"></a><span id="l77">      <span class="keyword">val</span> <a href="#32363" title="(Int, Boolean)" class="delimiter">(</a><a href="#32362" title="Int" id="32363">npos</a>, <a href="#32362" title="Boolean" id="32364">hasEnd</a><span class="delimiter">)</span> = <a href="#13222" title="(in: String, pos: Int)(Int, Boolean)">hasStart</a><span title="(Int, Boolean) @unchecked" class="delimiter">(</span><a href="#31721" title="String">in</a>, <a href="#32361" title="Int">pos</a><span class="delimiter">)</span></span>
<a href="l78"></a><span id="l78">      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#32363" title="Int">npos</a> <span title="(x: Int)Boolean">&gt;</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span></span>
<a href="l79"></a><span id="l79">	<span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#32364" title="Boolean">hasEnd</a><span class="delimiter">)</span> <span class="delimiter">{</span></span>
<a href="l80"></a><span id="l80">	  <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#32361" title="Int">pos</a> <span title="(x: Int)Boolean">!=</span> <a href="#32363" title="Int">npos</a><span class="delimiter">)</span></span>
<a href="l81"></a><span id="l81">	    <a href="#32196" title="java.lang.StringBuffer">buf</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><a href="#31721" title="String">in</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#32361" title="Int">pos</a>, <a href="#32363" title="Int">npos</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l82"></a><span id="l82">	</span>
<a href="l83"></a><span id="l83">	  <span class="keyword">val</span> <a title="Int" id="32384">epos</a> = <a href="#31721" title="String">in</a>.<span title="(x$1: java.lang.String, x$2: Int)Int">indexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;}&quot;)" class="string">&quot;}&quot;</span>, <a href="#32363" title="Int">npos</a><span class="delimiter">)</span></span>
<a href="l84"></a><span id="l84">	  <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#32384" title="Int">epos</a> <span title="(x: Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#32196" title="java.lang.StringBuffer">buf</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><a href="#31721" title="String">in</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#32363" title="Int">npos</a><span title="(x: Int)Int">+</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span></span>
<a href="l85"></a><span id="l85">	  <span class="keyword">else</span> <span class="delimiter">{</span></span>
<a href="l86"></a><span id="l86">	    <span class="keyword">val</span> <a title="java.lang.String" id="32429">name</a> = <a href="#31721" title="String">in</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span> <a href="#32363" title="Int">npos</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span>, <a href="#32384" title="Int">epos</a> <span class="delimiter">)</span></span>
<a href="l87"></a><span id="l87">	    <a href="#32196" title="java.lang.StringBuffer">buf</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span> <a href="#32197" title="Map[String,String]">itokens</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#32429" title="java.lang.String">name</a><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown&quot;)" class="string">&quot;Unknown&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l88"></a><span id="l88">	    <a href="#32198" title="(pos: Int)String">iReplace</a><span class="delimiter">(</span><a href="#32384" title="Int">epos</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span></span>
<a href="l89"></a><span id="l89">	  <span class="delimiter">}</span></span>
<a href="l90"></a><span id="l90">	<span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span></span>
<a href="l91"></a><span id="l91">	  <a href="#32196" title="java.lang.StringBuffer">buf</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><a href="#31721" title="String">in</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#32361" title="Int">pos</a>, <a href="#32363" title="Int">npos</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// remove the backslash</span></span>
<a href="l92"></a><span id="l92">	  <a href="#32196" title="java.lang.StringBuffer">buf</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><span title="java.lang.String(&quot;${&quot;)" class="string">&quot;${&quot;</span><span class="delimiter">)</span></span>
<a href="l93"></a><span id="l93">	  <a href="#32198" title="(pos: Int)String">iReplace</a><span class="delimiter">(</span><a href="#32363" title="Int">npos</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <span class="comment">// jump past the ${</span></span>
<a href="l94"></a><span id="l94">	<span class="delimiter">}</span></span>
<a href="l95"></a><span id="l95">      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span></span>
<a href="l96"></a><span id="l96">	<a href="#32196" title="java.lang.StringBuffer">buf</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><a href="#31721" title="String">in</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#32361" title="Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l97"></a><span id="l97">	<a href="#32196" title="java.lang.StringBuffer">buf</a>.<span title="()java.lang.String">toString</span></span>
<a href="l98"></a><span id="l98">      <span class="delimiter">}</span></span>
<a href="l99"></a><span id="l99">    <span class="delimiter">}</span></span>
<a href="l100"></a><span id="l100">    <a href="#32198" title="(pos: Int)String">iReplace</a><span class="delimiter">(</span> <span title="Int(0)" class="int">0</span> <span class="delimiter">)</span></span>
<a href="l101"></a><span id="l101">  <span class="delimiter">}</span></span>
<a href="l102"></a><span id="l102"></span>
<a href="l103"></a><span id="l103"><span class="comment">/*</span>
<a href="l104"></a><span id="l104">  def replaceTokens( in : String, tokens : Map[String, String] ) : String = {</span>
<a href="l105"></a><span id="l105">    val buf = new StringBuffer</span>
<a href="l106"></a><span id="l106">    @scala.annotation.tailrec</span>
<a href="l107"></a><span id="l107">    def iReplace( pos : Int ) : String = {</span>
<a href="l108"></a><span id="l108">      val npos = in.indexOf(&quot;${&quot;, pos)</span>
<a href="l109"></a><span id="l109">      if (npos &gt; -1) {</span>
<a href="l110"></a><span id="l110">	// was it escaped?</span>
<a href="l111"></a><span id="l111">	if (npos == 0 || ( npos &gt; 0 &amp;&amp; in.charAt(npos -1) != '\\') ){</span>
<a href="l112"></a><span id="l112">//	  println(&quot;npos &quot;+npos+&quot; pos &quot;+ pos)</span>
<a href="l113"></a><span id="l113">	  if (pos != npos)</span>
<a href="l114"></a><span id="l114">	    buf.append(in.substring(pos, npos))</span>
<a href="l115"></a><span id="l115">	  // skip it  </span>
<a href="l116"></a><span id="l116">	  //iReplace(npos + 2, true)</span>
<a href="l117"></a><span id="l117">	</span>
<a href="l118"></a><span id="l118">	  val epos = in.indexOf(&quot;}&quot;, npos)</span>
<a href="l119"></a><span id="l119">	  if (epos == -1) buf.append(in.substring(npos+2)).toString</span>
<a href="l120"></a><span id="l120">	  else {	    </span>
<a href="l121"></a><span id="l121">	    val name = in.substring( npos + 2, epos )</span>
<a href="l122"></a><span id="l122">//	    println(&quot;found name &quot; + name)</span>
<a href="l123"></a><span id="l123">	    buf.append( tokens.get(name).getOrElse(&quot;Unknown&quot;))</span>
<a href="l124"></a><span id="l124">	    iReplace(epos + 1)</span>
<a href="l125"></a><span id="l125">	  }</span>
<a href="l126"></a><span id="l126">	} else {</span>
<a href="l127"></a><span id="l127">	  //println(</span>
<a href="l128"></a><span id="l128">	  buf.append(in.substring(pos, npos - 1)) // remove the backslash</span>
<a href="l129"></a><span id="l129">	  buf.append(&quot;${&quot;)</span>
<a href="l130"></a><span id="l130">	  iReplace(npos + 2) // jump past the \${</span>
<a href="l131"></a><span id="l131">	}</span>
<a href="l132"></a><span id="l132">      } else {</span>
<a href="l133"></a><span id="l133">//	println(&quot; npos was -1 pos &quot;+ pos)</span>
<a href="l134"></a><span id="l134">	// annoying special case for beginning of string</span>
<a href="l135"></a><span id="l135">	//if (</span>
<a href="l136"></a><span id="l136">	buf.append(in.substring(pos))</span>
<a href="l137"></a><span id="l137">	buf.toString</span>
<a href="l138"></a><span id="l138">      }</span>
<a href="l139"></a><span id="l139">    }</span>
<a href="l140"></a><span id="l140">    iReplace( 0 )</span>
<a href="l141"></a><span id="l141">  }</span>
<a href="l142"></a><span id="l142">  */</span></span>
<a href="l143"></a><span id="l143">  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]" id="13226">evalVals</a><span class="delimiter">(</span> <a title="Map[String,() =&gt; String]" id="22878">orig</a> : <span title="Map[String,() =&gt; String]">Map</span><span class="delimiter">[</span>String, <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;String<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> = <a href="#22878" title="Map[String,() =&gt; String]">orig</a>.<span title="(f: ((String, () =&gt; String)) =&gt; (String, String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,() =&gt; String],(String, String),Map[String,String]])Map[String,String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map.Coll,(String, String),scala.collection.immutable.Map[String,String]]" class="delimiter">(</span><span class="delimiter">(</span><a title="(String, () =&gt; String)" id="32575">x</a><span class="delimiter">)</span> =&gt; <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#32575" title="(String, () =&gt; String)">x</a>.<span title="=&gt; String">_1</span>,<a href="#32575" title="(String, () =&gt; String)">x</a>.<span title="()String">_2</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l144"></a><span id="l144"><span class="delimiter">}</span></span>
<a href="l145"></a><span id="l145"></span>
<a href="l146"></a><span id="l146"><span class="keyword">class</span> <a title="class ReplaceTokensTest extends junit.framework.TestCase with ScalaObject" id="8892">ReplaceTokensTest</a> <a href="#8892" title="ScalaObject" class="keyword">extends</a> junit.framework.<span title="junit.framework.TestCase">TestCase</span> <span class="delimiter">{</span></span>
<a href="l147"></a><span id="l147">  <span class="keyword">import</span> <a href="#8872" title="object delme.ReplaceStuff">ReplaceStuff</a>._</span>
<a href="l148"></a><span id="l148">  <span class="keyword">import</span> junit.framework.<span title="object junit.framework.Assert">Assert</span>._</span>
<a href="l149"></a><span id="l149">  </span>
<a href="l150"></a><span id="l150">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32699">testSimple</a> = </span>
<a href="l151"></a><span id="l151">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;fred&quot;)" class="string">&quot;fred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;fred&quot;)" class="string">&quot;fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span> </span>
<a href="l152"></a><span id="l152"></span>
<a href="l153"></a><span id="l153">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32700">testEmpty</a> = </span>
<a href="l154"></a><span id="l154">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l155"></a><span id="l155"></span>
<a href="l156"></a><span id="l156">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32701">testStarts</a> = </span>
<a href="l157"></a><span id="l157">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${&quot;)" class="string">&quot;${&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l158"></a><span id="l158"></span>
<a href="l159"></a><span id="l159">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32702">testEmptyUnknown</a> = </span>
<a href="l160"></a><span id="l160">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown&quot;)" class="string">&quot;Unknown&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${}&quot;)" class="string">&quot;${}&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l161"></a><span id="l161"></span>
<a href="l162"></a><span id="l162">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32703">testFilledUnknown</a> = </span>
<a href="l163"></a><span id="l163">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown&quot;)" class="string">&quot;Unknown&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${filled}&quot;)" class="string">&quot;${filled}&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l164"></a><span id="l164"></span>
<a href="l165"></a><span id="l165"></span>
<a href="l166"></a><span id="l166">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32704">testStartsContentAfter</a> = </span>
<a href="l167"></a><span id="l167">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;fred&quot;)" class="string">&quot;fred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${fred&quot;)" class="string">&quot;${fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l168"></a><span id="l168"></span>
<a href="l169"></a><span id="l169">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32705">testEmptyUnknownContentAfter</a> = </span>
<a href="l170"></a><span id="l170">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknownfred&quot;)" class="string">&quot;Unknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${}fred&quot;)" class="string">&quot;${}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l171"></a><span id="l171"></span>
<a href="l172"></a><span id="l172">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32706">testFilledUnknownContentAfter</a> = </span>
<a href="l173"></a><span id="l173">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknownfred&quot;)" class="string">&quot;Unknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${filled}fred&quot;)" class="string">&quot;${filled}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l174"></a><span id="l174"></span>
<a href="l175"></a><span id="l175"></span>
<a href="l176"></a><span id="l176">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32707">testStartsContentBeforeAndAfter</a> = </span>
<a href="l177"></a><span id="l177">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;janefred&quot;)" class="string">&quot;janefred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jane${fred&quot;)" class="string">&quot;jane${fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l178"></a><span id="l178"></span>
<a href="l179"></a><span id="l179">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32708">testEmptyUnknownContentBeforeAndAfter</a> = </span>
<a href="l180"></a><span id="l180">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;janeUnknownfred&quot;)" class="string">&quot;janeUnknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jane${}fred&quot;)" class="string">&quot;jane${}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l181"></a><span id="l181"></span>
<a href="l182"></a><span id="l182">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32709">testFilledUnknownContentBeforeAndAfter</a> = </span>
<a href="l183"></a><span id="l183">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;janeUnknownfred&quot;)" class="string">&quot;janeUnknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jane${filled}fred&quot;)" class="string">&quot;jane${filled}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l184"></a><span id="l184"></span>
<a href="l185"></a><span id="l185"></span>
<a href="l186"></a><span id="l186"></span>
<a href="l187"></a><span id="l187">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32710">testMatchContentBeforeAndAfter</a> = </span>
<a href="l188"></a><span id="l188">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, jane and freddy&quot;)" class="string">&quot;rod, jane and freddy&quot;</span>,</span>
<a href="l189"></a><span id="l189">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, ${rainbow} freddy&quot;)" class="string">&quot;rod, ${rainbow} freddy&quot;</span>,</span>
<a href="l190"></a><span id="l190">			       <a href="#13221" title="=&gt; scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">siteTokens</a> <a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">++</a> <span title="(elems: (java.lang.String, () =&gt; java.lang.String)*)scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span title="java.lang.String(&quot;jane and&quot;)" class="string">&quot;jane and&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l191"></a><span id="l191"></span>
<a href="l192"></a><span id="l192">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32711">testMatchContentBeforeAndAfterExtra</a> = </span>
<a href="l193"></a><span id="l193">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, jane and freddy - with puppets painting&quot;)" class="string">&quot;rod, jane and freddy - with puppets painting&quot;</span>,</span>
<a href="l194"></a><span id="l194">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, ${rainbow} freddy ${with} painting&quot;)" class="string">&quot;rod, ${rainbow} freddy ${with} painting&quot;</span>,</span>
<a href="l195"></a><span id="l195">			       <a href="#13221" title="=&gt; scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">siteTokens</a> <a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">++</a> <span title="(elems: (java.lang.String, () =&gt; java.lang.String)*)scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span title="java.lang.String(&quot;jane and&quot;)" class="string">&quot;jane and&quot;</span><span class="delimiter">)</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;with&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span title="java.lang.String(&quot;- with puppets&quot;)" class="string">&quot;- with puppets&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l196"></a><span id="l196"></span>
<a href="l197"></a><span id="l197">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32712">testSimpleEscape</a> = </span>
<a href="l198"></a><span id="l198">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;fred&quot;)" class="string">&quot;fred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;fred&quot;)" class="string">&quot;fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span> </span>
<a href="l199"></a><span id="l199"></span>
<a href="l200"></a><span id="l200">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32713">testEmptyEscape</a> = </span>
<a href="l201"></a><span id="l201">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l202"></a><span id="l202"></span>
<a href="l203"></a><span id="l203">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32714">testStartsEscape</a> = </span>
<a href="l204"></a><span id="l204">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${&quot;)" class="string">&quot;${&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l205"></a><span id="l205"></span>
<a href="l206"></a><span id="l206">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32715">testEmptyUnknownEscape</a> = </span>
<a href="l207"></a><span id="l207">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown&quot;)" class="string">&quot;Unknown&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${}&quot;)" class="string">&quot;${}&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l208"></a><span id="l208"></span>
<a href="l209"></a><span id="l209">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32716">testFilledUnknownEscape</a> = </span>
<a href="l210"></a><span id="l210">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown&quot;)" class="string">&quot;Unknown&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${filled}&quot;)" class="string">&quot;${filled}&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l211"></a><span id="l211"></span>
<a href="l212"></a><span id="l212"></span>
<a href="l213"></a><span id="l213">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32717">testStartsContentAfterEscape</a> = </span>
<a href="l214"></a><span id="l214">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;fred&quot;)" class="string">&quot;fred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${fred&quot;)" class="string">&quot;${fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l215"></a><span id="l215"></span>
<a href="l216"></a><span id="l216">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32718">testEmptyUnknownContentAfterEscape</a> = </span>
<a href="l217"></a><span id="l217">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknownfred&quot;)" class="string">&quot;Unknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${}fred&quot;)" class="string">&quot;${}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l218"></a><span id="l218"></span>
<a href="l219"></a><span id="l219">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32719">testFilledUnknownContentAfterEscape</a> = </span>
<a href="l220"></a><span id="l220">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknownfred&quot;)" class="string">&quot;Unknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${filled}fred&quot;)" class="string">&quot;${filled}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l221"></a><span id="l221"></span>
<a href="l222"></a><span id="l222"></span>
<a href="l223"></a><span id="l223">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32720">testStartsContentBeforeAndAfterEscape</a> = </span>
<a href="l224"></a><span id="l224">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;janefred&quot;)" class="string">&quot;janefred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jane${fred&quot;)" class="string">&quot;jane${fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l225"></a><span id="l225"></span>
<a href="l226"></a><span id="l226">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32721">testEmptyUnknownContentBeforeAndAfterEscape</a> = </span>
<a href="l227"></a><span id="l227">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;janeUnknownfred&quot;)" class="string">&quot;janeUnknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jane${}fred&quot;)" class="string">&quot;jane${}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l228"></a><span id="l228"></span>
<a href="l229"></a><span id="l229">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32722">testFilledUnknownContentBeforeAndAfterEscape</a> = </span>
<a href="l230"></a><span id="l230">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;janeUnknownfred&quot;)" class="string">&quot;janeUnknownfred&quot;</span>,<a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jane${filled}fred&quot;)" class="string">&quot;jane${filled}fred&quot;</span>,<a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">siteTokens</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l231"></a><span id="l231"></span>
<a href="l232"></a><span id="l232"></span>
<a href="l233"></a><span id="l233"></span>
<a href="l234"></a><span id="l234">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32723">testMatchContentBeforeAndAfterEscape</a> = </span>
<a href="l235"></a><span id="l235">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, jane and freddy&quot;)" class="string">&quot;rod, jane and freddy&quot;</span>,</span>
<a href="l236"></a><span id="l236">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, ${rainbow} freddy&quot;)" class="string">&quot;rod, ${rainbow} freddy&quot;</span>,</span>
<a href="l237"></a><span id="l237">			       <a href="#13221" title="=&gt; scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">siteTokens</a> <a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">++</a> <span title="(elems: (java.lang.String, () =&gt; java.lang.String)*)scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span title="java.lang.String(&quot;jane and&quot;)" class="string">&quot;jane and&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l238"></a><span id="l238"></span>
<a href="l239"></a><span id="l239">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32724">testMatchContentBeforeAndAfterExtraEscape</a> = </span>
<a href="l240"></a><span id="l240">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, ${rainbow} freddy ${with} painting&quot;)" class="string">&quot;rod, ${rainbow} freddy ${with} painting&quot;</span>,</span>
<a href="l241"></a><span id="l241">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, \\${rainbow} freddy \\${with} painting&quot;)" class="string">&quot;rod, \\${rainbow} freddy \\${with} painting&quot;</span>,</span>
<a href="l242"></a><span id="l242">			       <a href="#13221" title="=&gt; scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">siteTokens</a> <a href="#13226" title="implicit delme.ReplaceStuff.evalVals : (orig: Map[String,() =&gt; String])Map[String,String]">++</a> <span title="(elems: (java.lang.String, () =&gt; java.lang.String)*)scala.collection.immutable.Map[java.lang.String,() =&gt; java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span title="java.lang.String(&quot;jane and&quot;)" class="string">&quot;jane and&quot;</span><span class="delimiter">)</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;with&quot;</span> <span title="(y: () =&gt; java.lang.String)(java.lang.String, () =&gt; java.lang.String)">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span title="java.lang.String(&quot;- with puppets&quot;)" class="string">&quot;- with puppets&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l243"></a><span id="l243"></span>
<a href="l244"></a><span id="l244"></span>
<a href="l245"></a><span id="l245"></span>
<a href="l246"></a><span id="l246">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32725">testOneNesting</a> = </span>
<a href="l247"></a><span id="l247">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, jane and freddy&quot;)" class="string">&quot;rod, jane and freddy&quot;</span>, </span>
<a href="l248"></a><span id="l248">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${rainbow}&quot;)" class="string">&quot;${rainbow}&quot;</span>, </span>
<a href="l249"></a><span id="l249">			       <span title="(elems: (java.lang.String, java.lang.String)*)scala.collection.immutable.Map[java.lang.String,java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;rod, ${others}&quot;)" class="string">&quot;rod, ${others}&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;others&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;jane and freddy&quot;)" class="string">&quot;jane and freddy&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l250"></a><span id="l250"></span>
<a href="l251"></a><span id="l251">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32726">testRepatedOneNesting</a> = </span>
<a href="l252"></a><span id="l252">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, jane and freddy&quot;)" class="string">&quot;rod, jane and freddy&quot;</span>, </span>
<a href="l253"></a><span id="l253">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${rainbow}&quot;)" class="string">&quot;${rainbow}&quot;</span>, </span>
<a href="l254"></a><span id="l254">			       <span title="(elems: (java.lang.String, java.lang.String)*)scala.collection.immutable.Map[java.lang.String,java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;${rod}, ${others}&quot;)" class="string">&quot;${rod}, ${others}&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rod&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;rod&quot;)" class="string">&quot;rod&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;others&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;jane and freddy&quot;)" class="string">&quot;jane and freddy&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l255"></a><span id="l255"></span>
<a href="l256"></a><span id="l256">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32727">testTwoNesting</a> = </span>
<a href="l257"></a><span id="l257">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, jane and freddy&quot;)" class="string">&quot;rod, jane and freddy&quot;</span>, </span>
<a href="l258"></a><span id="l258">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${rainbow}&quot;)" class="string">&quot;${rainbow}&quot;</span>, </span>
<a href="l259"></a><span id="l259">			       <span title="(elems: (java.lang.String, java.lang.String)*)scala.collection.immutable.Map[java.lang.String,java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;${all}&quot;)" class="string">&quot;${all}&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;all&quot;</span><span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span><span title="java.lang.String(&quot;${rod}, ${others}&quot;)" class="string">&quot;${rod}, ${others}&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rod&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;rod&quot;)" class="string">&quot;rod&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;others&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;jane and freddy&quot;)" class="string">&quot;jane and freddy&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l260"></a><span id="l260"></span>
<a href="l261"></a><span id="l261">  <span class="keyword">def</span> <a title="=&gt; Unit" id="32728">testThreeNesting</a> = </span>
<a href="l262"></a><span id="l262">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;rod, jane and freddy&quot;)" class="string">&quot;rod, jane and freddy&quot;</span>, </span>
<a href="l263"></a><span id="l263">		 <a href="#13224" title="(in: String, tokens: Map[String,String])String">replaceTokens</a><span class="delimiter">(</span><span title="java.lang.String(&quot;${rainbow}&quot;)" class="string">&quot;${rainbow}&quot;</span>, </span>
<a href="l264"></a><span id="l264">			       <span title="(elems: (java.lang.String, java.lang.String)*)scala.collection.immutable.Map[java.lang.String,java.lang.String]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;lastone&quot;</span><span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span><span title="java.lang.String(&quot;freddy&quot;)" class="string">&quot;freddy&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rainbow&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;${all}&quot;)" class="string">&quot;${all}&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;all&quot;</span><span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span><span title="java.lang.String(&quot;${rod}, ${others}&quot;)" class="string">&quot;${rod}, ${others}&quot;</span>, <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;rod&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;rod&quot;)" class="string">&quot;rod&quot;</span></span>
<a href="l265"></a><span id="l265">				   , <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;others&quot;</span> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;jane and ${lastone}&quot;)" class="string">&quot;jane and ${lastone}&quot;</span> <span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l266"></a><span id="l266"></span>
<a href="l267"></a><span id="l267"><span class="delimiter">}</span></span>
<a href="l268"></a><span id="l268"></span>
<a href="l269"></a><span id="l269">        </span>
</pre>
    </body>
</html>