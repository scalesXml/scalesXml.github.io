<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\BaseFunctionalityTest.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    
<style id="linesStyle">
.lineHighlight {
  background-color: #a5a5a5;
}
</style>
<script type="text/javascript">
function selectedLine() {
    var loca = /^.*#l(.*)/.exec(location.href);
    return loca ? loca[1] : '0';
}

function highlightLine(ln){
  $('#l'+ln).toggleClass('lineHighlight');
}

function gotoLine(ln){
  $('#l'+ln).focus();
}

$(function(){
  var line = selectedLine();
  if (line != '0') highlightLine(line)
});
</script></head>
    <body>
        <pre>
<!-- SXR_LINES --><a href="l1"></a><span id="l1"><span class="keyword">package</span> scales.xml</span>
<a href="l2"></a><span id="l2"></span>
<a href="l3"></a><span id="l3"><span class="keyword">class</span> <a title="class BaseFunctionalityTest extends junit.framework.TestCase with ScalaObject" id="12068">BaseFunctionalityTest</a> <a href="#12068" title="ScalaObject" class="keyword">extends</a> junit.framework.<span title="junit.framework.TestCase">TestCase</span> <span class="delimiter">{</span></span>
<a href="l4"></a><span id="l4"></span>
<a href="l5"></a><span id="l5">  <span class="keyword">import</span> junit.framework.<span title="object junit.framework.Assert">Assert</span>._</span>
<a href="l6"></a><span id="l6">  <span class="keyword">import</span> java.io._</span>
<a href="l7"></a><span id="l7">  <span class="keyword">import</span> scales.utils._</span>
<a href="l8"></a><span id="l8">  <span class="keyword">import</span> <a href="../../../classes.sxr/scales/utils/ScalesUtils.scala.html#9179" title="object scales.utils.ScalesUtils">ScalesUtils</a>._</span>
<a href="l9"></a><span id="l9">  <span class="keyword">import</span> <a href="../../../classes.sxr/scales/xml/ScalesXml.scala.html#10381" title="object scales.xml.ScalesXml">ScalesXml</a>._</span>
<a href="l10"></a><span id="l10"></span>
<a href="l11"></a><span id="l11">  <span class="keyword">val</span> <a title="java.io.File" id="55004">xmlFile</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><span title="java.lang.String(&quot;./src/test/data/BaseXmlTest.xml&quot;)" class="string">&quot;./src/test/data/BaseXmlTest.xml&quot;</span><span class="delimiter">)</span></span>
<a href="l12"></a><span id="l12">  <span class="keyword">val</span> <a title="org.w3c.dom.Document" id="55006">dom</a> = <span class="delimiter">{</span></span>
<a href="l13"></a><span id="l13">    <span class="keyword">val</span> <a title="javax.xml.parsers.DocumentBuilderFactory" id="55252">dbf</a> = javax.xml.parsers.<span title="object javax.xml.parsers.DocumentBuilderFactory">DocumentBuilderFactory</span>.<span title="()javax.xml.parsers.DocumentBuilderFactory">newInstance</span></span>
<a href="l14"></a><span id="l14">    <a href="#55252" title="javax.xml.parsers.DocumentBuilderFactory">dbf</a>.<span title="(x$1: Boolean)Unit">setNamespaceAware</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span></span>
<a href="l15"></a><span id="l15">    <a href="#55252" title="javax.xml.parsers.DocumentBuilderFactory">dbf</a>.<span title="(x$1: Boolean)Unit">setIgnoringComments</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span></span>
<a href="l16"></a><span id="l16">    <a href="#55252" title="javax.xml.parsers.DocumentBuilderFactory">dbf</a>.<span title="(x$1: Boolean)Unit">setIgnoringElementContentWhitespace</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span></span>
<a href="l17"></a><span id="l17">    <span class="keyword">val</span> <a title="javax.xml.parsers.DocumentBuilder" id="55253">db</a> = <a href="#55252" title="javax.xml.parsers.DocumentBuilderFactory">dbf</a>.<span title="()javax.xml.parsers.DocumentBuilder">newDocumentBuilder</span></span>
<a href="l18"></a><span id="l18">    <a href="#55253" title="javax.xml.parsers.DocumentBuilder">db</a>.<span title="(x$1: org.xml.sax.InputSource)org.w3c.dom.Document">parse</span><span class="delimiter">(</span><span title="(x$1: java.io.Reader)org.xml.sax.InputSource" class="keyword">new</span> org.xml.sax.<span title="org.xml.sax.InputSource">InputSource</span><span class="delimiter">(</span><span title="java.io.InputStreamReader" class="keyword">new</span> <span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span><span title="(x$1: java.io.File)java.io.FileInputStream" class="keyword">new</span> <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><a href="#55004" title="=&gt; java.io.File">xmlFile</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l19"></a><span id="l19">  <span class="delimiter">}</span></span>
<a href="l20"></a><span id="l20"></span>
<a href="l21"></a><span id="l21">  <span class="keyword">val</span> <a title="scales.xml.Doc" id="55008">testXml</a> = <a href="../../../classes.sxr/scales/xml/XmlParser.scala.html#10967" title="(source: org.xml.sax.InputSource, strategy: scales.xml.PathOptimisationStrategy[scales.xml.ElemToken], parsers: scales.utils.Loaner[javax.xml.parsers.SAXParser])(implicit xmlVer: scales.xml.XmlVersion)scales.xml.Doc">loadXml</a><a href="../../../classes.sxr/scales/xml/QName.scala.html#87950" title="=&gt; scales.xml.XmlVersion" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlParser.scala.html#87948" title="implicit scales.xml.XmlParserImplicits.readerToSource : (source: java.io.Reader)org.xml.sax.InputSource" class="keyword">new</a> <span title="java.io.FileReader">FileReader</span><span class="delimiter">(</span><a href="#55004" title="=&gt; java.io.File">xmlFile</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l22"></a><span id="l22">  <span class="keyword">val</span> <a title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]" id="55010">path</a> = <a href="../../../classes.sxr/scales/utils/Paths.scala.html#10847" title="(tree: scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC])(implicit cbf: scales.utils.package.TreeCBF[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC])scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">top</a><a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87898" title="=&gt; scales.xml.package.XmlCBF" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87897" title="implicit scales.xml.XmlTypesImplicits.docToTree : (doc: scales.xml.Doc)scales.xml.package.XmlTree">testXml</a><span class="delimiter">)</span></span>
<a href="l23"></a><span id="l23"></span>
<a href="l24"></a><span id="l24">  <span class="comment">/* uncomment in times of need</span>
<a href="l25"></a><span id="l25">  def testPrint = {</span>
<a href="l26"></a><span id="l26">	  foldPrint(XmlOutput(System.out))(testXml)</span>
<a href="l27"></a><span id="l27">  }*/</span></span>
<a href="l28"></a><span id="l28"></span>
<a href="l29"></a><span id="l29">  <span class="keyword">val</span> <a title="scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]" id="55012">prefixed</a> = <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90708" title="(qname: scales.xml.QName)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\*</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/QName.scala.html#87944" title="implicit scales.xml.QNameImplicits.stringToNoNamespace : (localOnly: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object with scales.xml.NoNamespaceQName" class="string">&quot;NoNamespace&quot;</a><span class="delimiter">)</span>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90710" title="(pred: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]) =&gt; Boolean)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\*</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102475" title="(v1: String)(scales.xml.package.XmlPath) =&gt; Boolean">localName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;prefixed&quot;)" class="string">&quot;prefixed&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l30"></a><span id="l30"></span>
<a href="l31"></a><span id="l31">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55014">testLocalNamePredicate</a> = <span class="delimiter">{</span></span>
<a href="l32"></a><span id="l32">    <span title="(x$1: Boolean)Unit">assertTrue</span><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">prefixed</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span></span>
<a href="l33"></a><span id="l33">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ns1:{urn:prefix}prefixed&quot;)" class="string">&quot;ns1:{urn:prefix}prefixed&quot;</span>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102485" title="(implicit path: scales.xml.package.XmlPath)String">pqName</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">prefixed</a>.<span title="=&gt; scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">head</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l34"></a><span id="l34">  <span class="delimiter">}</span></span>
<a href="l35"></a><span id="l35"><span class="comment">/* */</span></span>
<a href="l36"></a><span id="l36">  <span class="keyword">def</span> <a title="(res: Iterable[scales.xml.AttributePath])Unit" id="55015">doAttrTest</a><span class="delimiter">(</span><a title="Iterable[scales.xml.AttributePath]" id="63936">res</a>: <span title="Iterable[scales.xml.AttributePath]">Iterable</span><span class="delimiter">[</span>AttributePath<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span></span>
<a href="l37"></a><span id="l37">    <span title="(x$1: java.lang.String, x$2: Boolean)Unit">assertTrue</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Did not find attr&quot;)" class="string">&quot;Did not find attr&quot;</span>, <a href="#63936" title="Iterable[scales.xml.AttributePath]">res</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span></span>
<a href="l38"></a><span id="l38">    <span class="keyword">val</span> <a title="scales.xml.Attribute" id="63938">attrib</a> = <a href="#63936" title="Iterable[scales.xml.AttributePath]">res</a>.<span title="=&gt; scales.xml.AttributePath">head</span>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#110886" title="=&gt; scales.xml.Attribute">attribute</a></span>
<a href="l39"></a><span id="l39">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ns1:{urn:prefix}attr&quot;)" class="string">&quot;ns1:{urn:prefix}attr&quot;</span>, <a href="#63938" title="scales.xml.Attribute">attrib</a>.<a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87895" title="implicit scales.xml.XmlTypesImplicits.toQName : (attribQName: scales.xml.package.AttributeQName)scales.xml.QName">name</a>.<a href="../../../classes.sxr/scales/xml/QName.scala.html#88022" title="=&gt; java.lang.String">pqName</a><span class="delimiter">)</span></span>
<a href="l40"></a><span id="l40">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;namespaced&quot;)" class="string">&quot;namespaced&quot;</span>, <a href="#63938" title="scales.xml.Attribute">attrib</a>.<a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87998" title="=&gt; String">value</a><span class="delimiter">)</span></span>
<a href="l41"></a><span id="l41">  <span class="delimiter">}</span></span>
<a href="l42"></a><span id="l42">  <span class="comment">//  </span></span>
<a href="l43"></a><span id="l43">  <span class="comment">//  def testNSAttributes = {</span></span>
<a href="l44"></a><span id="l44">  <span class="comment">//	doAttrTest(prefixed \@ (&quot;urn:prefix&quot;::&quot;attr&quot;))</span></span>
<a href="l45"></a><span id="l45">  <span class="comment">//  }</span></span>
<a href="l46"></a><span id="l46">  <span class="comment">//  </span></span>
<a href="l47"></a><span id="l47">  <span class="comment">//  def testLocalNamePredicateAttributes = {</span></span>
<a href="l48"></a><span id="l48">  <span class="comment">//	doAttrTest(prefixed \@ Attributes.localName(&quot;attr&quot;))</span></span>
<a href="l49"></a><span id="l49">  <span class="comment">//  }</span></span>
<a href="l50"></a><span id="l50"></span>
<a href="l51"></a><span id="l51">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55016">testNSAttributes</a> = <span class="delimiter">{</span></span>
<a href="l52"></a><span id="l52">    <a href="#55015" title="(res: Iterable[scales.xml.AttributePath])Unit">doAttrTest</a><span class="delimiter">(</span><a href="#55012" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">prefixed</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90700" title="=&gt; scales.xml.XPath[BaseFunctionalityTest.this.prefixed.T]">\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90745" title="(qname: scales.xml.UnprefixedQName)Iterable[scales.xml.AttributePath]">*@</a><span class="delimiter">(</span><span title="java.lang.String(&quot;urn:prefix&quot;)" class="string">&quot;urn:prefix&quot;</span> <span title="(namespace: String)java.lang.Object with scales.xml.UnprefixedQName">::</span> <a href="../../../classes.sxr/scales/xml/QName.scala.html#87945" title="implicit scales.xml.QNameImplicits.localStringToNSBuilder : (local: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object{def ::(namespace: String): java.lang.Object with scales.xml.UnprefixedQName; def l(implicit ver: scales.xml.XmlVersion,implicit fromParser: scales.xml.FromParser): java.lang.Object with scales.xml.NoNamespaceQName}" class="string">&quot;attr&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l53"></a><span id="l53">  <span class="delimiter">}</span></span>
<a href="l54"></a><span id="l54"></span>
<a href="l55"></a><span id="l55">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55017">testPrefixedExactAttributes</a> = <span class="delimiter">{</span></span>
<a href="l56"></a><span id="l56">    <a href="#55015" title="(res: Iterable[scales.xml.AttributePath])Unit">doAttrTest</a><span class="delimiter">(</span><a href="#55012" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">prefixed</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90700" title="=&gt; scales.xml.XPath[BaseFunctionalityTest.this.prefixed.T]">\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90742" title="(attrQname: scales.xml.PrefixedQName)(implicit evidence$1: (scales.xml.PrefixedQName) =&gt; scales.xml.package.AttributeQName)Iterable[scales.xml.AttributePath]">*@</a><span title="&lt;:&lt;[scales.xml.PrefixedQName,scales.xml.PrefixedQName]" class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/QName.scala.html#88416" title="(validUri: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)scales.xml.Namespace">Namespace</a><a href="../../../classes.sxr/scales/xml/QName.scala.html#87950" title="=&gt; scales.xml.XmlVersion" class="delimiter">(</a><span title="java.lang.String(&quot;urn:prefix&quot;)" class="string">&quot;urn:prefix&quot;</span><span class="delimiter">)</span>.<a href="../../../classes.sxr/scales/xml/QName.scala.html#88388" title="(prefix: String, local: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)scales.xml.PrefixedQName">prefixed</a><a href="../../../classes.sxr/scales/xml/QName.scala.html#87950" title="=&gt; scales.xml.XmlVersion" class="delimiter">(</a><span title="java.lang.String(&quot;ns1&quot;)" class="string">&quot;ns1&quot;</span>, <span title="java.lang.String(&quot;attr&quot;)" class="string">&quot;attr&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l57"></a><span id="l57">  <span class="delimiter">}</span></span>
<a href="l58"></a><span id="l58"></span>
<a href="l59"></a><span id="l59">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55018">testLocalOnlyFails</a> = <span class="delimiter">{</span></span>
<a href="l60"></a><span id="l60">    <span title="(x$1: java.lang.String, x$2: Boolean)Unit">assertTrue</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Should not find an attribute, as this should only match for no namespace matches&quot;)" class="string">&quot;Should not find an attribute, as this should only match for no namespace matches&quot;</span>, <a href="#55012" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">prefixed</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90742" title="(attrQname: java.lang.String)(implicit evidence$1: (java.lang.String) =&gt; scales.xml.package.AttributeQName)Iterable[scales.xml.AttributePath]">*@</a><a href="../../../classes.sxr/scales/xml/QName.scala.html#87944" title="implicit scales.xml.QNameImplicits.stringToNoNamespace : (localOnly: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object with scales.xml.NoNamespaceQName" class="delimiter">(</a><span title="java.lang.String(&quot;attr&quot;)" class="string">&quot;attr&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span></span>
<a href="l61"></a><span id="l61">  <span class="delimiter">}</span></span>
<a href="l62"></a><span id="l62"></span>
<a href="l63"></a><span id="l63">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55019">testLocalNamePredicateAttributes</a> = <span class="delimiter">{</span></span>
<a href="l64"></a><span id="l64">    <a href="#55015" title="(res: Iterable[scales.xml.AttributePath])Unit">doAttrTest</a><span class="delimiter">(</span><a href="#55012" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">prefixed</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90700" title="=&gt; scales.xml.XPath[BaseFunctionalityTest.this.prefixed.T]">\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90741" title="(pred: (scales.xml.AttributePath) =&gt; Boolean)Iterable[scales.xml.AttributePath]">*@</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10983" title="object scales.xml.package.Attributes">Attributes</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102562" title="(v1: String)(scales.xml.AttributePath) =&gt; Boolean">localName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;attr&quot;)" class="string">&quot;attr&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l65"></a><span id="l65">  <span class="delimiter">}</span></span>
<a href="l66"></a><span id="l66"></span>
<a href="l67"></a><span id="l67">  <span class="keyword">def</span> <a title="(f: (scales.xml.XPath[_]) =&gt; scales.xml.XPath[_])Unit" id="55020">doExistsTest</a><span class="delimiter">(</span> <a title="(scales.xml.XPath[_]) =&gt; scales.xml.XPath[_]" id="64425">f</a> : <span class="delimiter">(</span>XPath<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; XPath<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span></span>
<a href="l68"></a><span id="l68">    <span class="keyword">val</span> <a title="scales.xml.XPath[_]" id="64428">res</a> = <a href="#64425" title="(v1: scales.xml.XPath[_])scales.xml.XPath[_]">f</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90708" title="(qname: scales.xml.QName)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\*</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/QName.scala.html#87944" title="implicit scales.xml.QNameImplicits.stringToNoNamespace : (localOnly: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object with scales.xml.NoNamespaceQName" class="string">&quot;NoNamespace&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l69"></a><span id="l69">    <span title="(x$1: java.lang.String, x$2: Boolean)Unit">assertTrue</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Did not find the attr in an element&quot;)" class="string">&quot;Did not find the attr in an element&quot;</span>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[_$2])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">res</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span></span>
<a href="l70"></a><span id="l70">    <span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;prefixed&quot;)" class="string">&quot;prefixed&quot;</span>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102482" title="(implicit path: scales.xml.package.XmlPath)String">localName</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[_$2])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">res</a>.<span title="=&gt; scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">head</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l71"></a><span id="l71">  <span class="delimiter">}</span></span>
<a href="l72"></a><span id="l72"></span>
<a href="l73"></a><span id="l73">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55021">testExistsAttributes</a> = <span class="delimiter">{</span></span>
<a href="l74"></a><span id="l74">    <span class="keyword">import</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10983" title="object scales.xml.package.Attributes">Attributes</a>.*@</span>
<a href="l75"></a><span id="l75">    <a href="#55020" title="(f: (scales.xml.XPath[_]) =&gt; scales.xml.XPath[_])Unit">doExistsTest</a><span class="delimiter">{</span> <a href="#64816" title="scales.xml.XPath[_]">_</a> .<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90710" title="(pred: (scales.xml.package.XmlPath) =&gt; Boolean)scales.xml.XPath[Any]">\*</a><span class="delimiter">(</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102560" title="(v1: scales.xml.QName)(scales.xml.package.XmlPath) =&gt; Boolean">*@</a><span class="delimiter">(</span><span title="java.lang.String(&quot;urn:prefix&quot;)" class="string">&quot;urn:prefix&quot;</span> <span title="(namespace: String)java.lang.Object with scales.xml.UnprefixedQName">::</span> <a href="../../../classes.sxr/scales/xml/QName.scala.html#87945" title="implicit scales.xml.QNameImplicits.localStringToNSBuilder : (local: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object{def ::(namespace: String): java.lang.Object with scales.xml.UnprefixedQName; def l(implicit ver: scales.xml.XmlVersion,implicit fromParser: scales.xml.FromParser): java.lang.Object with scales.xml.NoNamespaceQName}" class="string">&quot;attr&quot;</a><span class="delimiter">)</span> <span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l76"></a><span id="l76">  <span class="delimiter">}</span></span>
<a href="l77"></a><span id="l77"></span>
<a href="l78"></a><span id="l78">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55022">testExistsAttributesMethod</a> = <span class="delimiter">{</span></span>
<a href="l79"></a><span id="l79">    <span class="keyword">import</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10983" title="object scales.xml.package.Attributes">Attributes</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102558" title="object scales.xml.package.Attributes.Functions">Functions</a>.*@</span>
<a href="l80"></a><span id="l80">    <a href="#55020" title="(f: (scales.xml.XPath[_]) =&gt; scales.xml.XPath[_])Unit">doExistsTest</a><span class="delimiter">(</span> <a href="#64952" title="scales.xml.XPath[_]">_</a> .<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90710" title="(pred: (scales.xml.package.XmlPath) =&gt; Boolean)scales.xml.XPath[Any]">\*</a><span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102573" title="(qName: scales.xml.QName)(implicit path: scales.xml.package.XmlPath)Boolean">*@</a><span class="delimiter">(</span><span title="java.lang.String(&quot;urn:prefix&quot;)" class="string">&quot;urn:prefix&quot;</span> <span title="(namespace: String)java.lang.Object with scales.xml.UnprefixedQName">::</span> <a href="../../../classes.sxr/scales/xml/QName.scala.html#87945" title="implicit scales.xml.QNameImplicits.localStringToNSBuilder : (local: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object{def ::(namespace: String): java.lang.Object with scales.xml.UnprefixedQName; def l(implicit ver: scales.xml.XmlVersion,implicit fromParser: scales.xml.FromParser): java.lang.Object with scales.xml.NoNamespaceQName}" class="string">&quot;attr&quot;</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#64991" title="scales.xml.package.XmlPath">_</a><span class="delimiter">)</span> <span class="delimiter">}</span> <span class="delimiter">)</span></span>
<a href="l81"></a><span id="l81">  <span class="delimiter">}</span></span>
<a href="l82"></a><span id="l82"> </span>
<a href="l83"></a><span id="l83">  <span class="keyword">import</span> <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#9196" title="object scales.utils.TestUtils">TestUtils</a>._</span>
<a href="l84"></a><span id="l84"></span>
<a href="l85"></a><span id="l85">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55024">testPositionAllKids</a> = <span class="delimiter">{</span></span>
<a href="l86"></a><span id="l86">    <span class="keyword">val</span> <a title="scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]" id="65117">pos</a> = <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90712" title="(pos: Int)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\*</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90714" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\*</a></span>
<a href="l87"></a><span id="l87">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="65118">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;{}DontRedeclare&quot;)" class="string">&quot;{}DontRedeclare&quot;</span>, <span title="java.lang.String(&quot;{}DontRedeclare&quot;)" class="string">&quot;{}DontRedeclare&quot;</span>,</span>
<a href="l88"></a><span id="l88">      <span title="java.lang.String(&quot;{urn:default}ShouldRedeclare&quot;)" class="string">&quot;{urn:default}ShouldRedeclare&quot;</span>, <span title="java.lang.String(&quot;ns1:{urn:prefix}prefixed&quot;)" class="string">&quot;ns1:{urn:prefix}prefixed&quot;</span><span class="delimiter">)</span>;</span>
<a href="l89"></a><span id="l89"></span>
<a href="l90"></a><span id="l90">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#65118" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102485" title="(implicit path: scales.xml.package.XmlPath)String">pqName</a><span class="delimiter">(</span><a href="#65329" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l91"></a><span id="l91">  <span class="delimiter">}</span></span>
<a href="l92"></a><span id="l92"></span>
<a href="l93"></a><span id="l93">  <span class="keyword">val</span> <a title="scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]" id="55025">dontRedeclares</a> = <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90709" title="(pred: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]) =&gt; Boolean)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">*</a><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102475" title="(v1: String)(scales.xml.package.XmlPath) =&gt; Boolean">localName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;DontRedeclare&quot;)" class="string">&quot;DontRedeclare&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l94"></a><span id="l94"></span>
<a href="l95"></a><span id="l95">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55027">testDescendentLocalNamePredicate</a> = <span class="delimiter">{</span></span>
<a href="l96"></a><span id="l96">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="65335">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;{urn:default}DontRedeclare&quot;)" class="string">&quot;{urn:default}DontRedeclare&quot;</span>,</span>
<a href="l97"></a><span id="l97">      <span title="java.lang.String(&quot;{}DontRedeclare&quot;)" class="string">&quot;{}DontRedeclare&quot;</span>, <span title="java.lang.String(&quot;{}DontRedeclare&quot;)" class="string">&quot;{}DontRedeclare&quot;</span><span class="delimiter">)</span>;</span>
<a href="l98"></a><span id="l98"></span>
<a href="l99"></a><span id="l99">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#65335" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">dontRedeclares</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102485" title="(implicit path: scales.xml.package.XmlPath)String">pqName</a><span class="delimiter">(</span><a href="#65377" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l100"></a><span id="l100">  <span class="delimiter">}</span></span>
<a href="l101"></a><span id="l101"></span>
<a href="l102"></a><span id="l102">  <span class="comment">// without the duplicate filter it would have three results</span></span>
<a href="l103"></a><span id="l103">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55028">testParentsDuplicates</a> = <span class="delimiter">{</span></span>
<a href="l104"></a><span id="l104">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="65383">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;{urn:default}Default&quot;)" class="string">&quot;{urn:default}Default&quot;</span>,</span>
<a href="l105"></a><span id="l105">      <span title="java.lang.String(&quot;{}NoNamespace&quot;)" class="string">&quot;{}NoNamespace&quot;</span><span class="delimiter">)</span>;</span>
<a href="l106"></a><span id="l106"></span>
<a href="l107"></a><span id="l107">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#65383" title="List[java.lang.String]">expected</a>, <a href="#55025" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">dontRedeclares</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[BaseFunctionalityTest.this.dontRedeclares.T])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">\^</a> <span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102485" title="(implicit path: scales.xml.package.XmlPath)String">pqName</a><span class="delimiter">(</span><a href="#65425" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l108"></a><span id="l108">  <span class="delimiter">}</span></span>
<a href="l109"></a><span id="l109">    </span>
<a href="l110"></a><span id="l110">  <span class="keyword">val</span> <a title="Iterable[scales.xml.AttributePath]" id="55029">allAttribs</a> = <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90740" title="=&gt; Iterable[scales.xml.AttributePath]">*@</a></span>
<a href="l111"></a><span id="l111">  <span class="comment">//  </span></span>
<a href="l112"></a><span id="l112">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55031">testAllAttributes</a> = <span class="delimiter">{</span></span>
<a href="l113"></a><span id="l113">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="65431">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;justHere:{urn:justHere}attr=only&quot;)" class="string">&quot;justHere:{urn:justHere}attr=only&quot;</span>, <span title="java.lang.String(&quot;{}type=interesting&quot;)" class="string">&quot;{}type=interesting&quot;</span>, </span>
<a href="l114"></a><span id="l114">  			<span title="java.lang.String(&quot;ns1:{urn:prefix}attr=namespaced&quot;)" class="string">&quot;ns1:{urn:prefix}attr=namespaced&quot;</span><span class="delimiter">)</span>;</span>
<a href="l115"></a><span id="l115">    <span class="keyword">import</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10983" title="object scales.xml.package.Attributes">Attributes</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102558" title="object scales.xml.package.Attributes.Functions">Functions</a>._</span>
<a href="l116"></a><span id="l116">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.xml.AttributePath])(convert: (scales.xml.AttributePath) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span> <a href="#65431" title="List[java.lang.String]">expected</a>, <a href="#55029" title="=&gt; Iterable[scales.xml.AttributePath]">allAttribs</a> <span class="delimiter">)</span><span class="delimiter">{</span> <span class="keyword">implicit</span> <a title="scales.xml.AttributePath" id="65465">attr</a> =&gt; <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102570" title="(implicit attribute: scales.xml.AttributePath)String">pqName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;=&quot;)" class="string">&quot;=&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102571" title="(implicit attribute: scales.xml.AttributePath)String">value</a> <span class="delimiter">}</span></span>
<a href="l117"></a><span id="l117">  <span class="delimiter">}</span></span>
<a href="l118"></a><span id="l118">  </span>
<a href="l119"></a><span id="l119">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55032">testAllElementsWithAttributes</a> = <span class="delimiter">{</span></span>
<a href="l120"></a><span id="l120">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="65474">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;{}NoNamespace&quot;)" class="string">&quot;{}NoNamespace&quot;</span>, </span>
<a href="l121"></a><span id="l121">  			<span title="java.lang.String(&quot;ns1:{urn:prefix}prefixed&quot;)" class="string">&quot;ns1:{urn:prefix}prefixed&quot;</span><span class="delimiter">)</span>;</span>
<a href="l122"></a><span id="l122">    </span>
<a href="l123"></a><span id="l123">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.xml.package.XmlPath])(convert: (scales.xml.package.XmlPath) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span> <a href="#65474" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87920" title="implicit scales.xml.XmlPathImplicits.fromAttributePathToAxis : (attrs: Iterable[scales.xml.AttributePath])scales.xml.AttributeParentPath">allAttribs</a> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90814" title="()Iterable[scales.xml.package.XmlPath]">\^</a> <span class="delimiter">)</span><span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102485" title="(implicit path: scales.xml.package.XmlPath)String">pqName</a><span class="delimiter">(</span><a href="#65653" title="scales.xml.package.XmlPath">_</a><span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l124"></a><span id="l124">  <span class="delimiter">}</span></span>
<a href="l125"></a><span id="l125">  </span>
<a href="l126"></a><span id="l126">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55033">testElementText</a> = <span class="delimiter">{</span></span>
<a href="l127"></a><span id="l127">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="65659">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;prefixed text&quot;)" class="string">&quot;prefixed text&quot;</span><span class="delimiter">)</span></span>
<a href="l128"></a><span id="l128">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#65659" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90707" title="(qname: scales.xml.QName)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">*</a><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]" class="delimiter">(</a><span title="java.lang.String(&quot;urn:prefix&quot;)" class="string">&quot;urn:prefix&quot;</span> <span title="(namespace: String)java.lang.Object with scales.xml.UnprefixedQName">::</span> <a href="../../../classes.sxr/scales/xml/QName.scala.html#87945" title="implicit scales.xml.QNameImplicits.localStringToNSBuilder : (local: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object{def ::(namespace: String): java.lang.Object with scales.xml.UnprefixedQName; def l(implicit ver: scales.xml.XmlVersion,implicit fromParser: scales.xml.FromParser): java.lang.Object with scales.xml.NoNamespaceQName}" class="string">&quot;prefixed&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102486" title="(implicit path: scales.xml.package.XmlPath)String">text</a><span class="delimiter">(</span><a href="#65988" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l129"></a><span id="l129">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[BaseFunctionalityTest.this.DomNode])(convert: (BaseFunctionalityTest.this.DomNode) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#65659" title="List[java.lang.String]">expected</a>, <a href="#55050" title="(path: String, in: AnyRef)java.lang.Object with Iterable[BaseFunctionalityTest.this.DomNode]{def iterator(): java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]}">nodeSet</a><span class="delimiter">(</span><span title="java.lang.String(&quot;//*[local-name()=\'prefixed\' and namespace-uri()=\'urn:prefix\']&quot;)" class="string">&quot;//*[local-name()='prefixed' and namespace-uri()='urn:prefix']&quot;</span>, <a href="#55006" title="=&gt; org.w3c.dom.Document">dom</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#66923" title="BaseFunctionalityTest.this.DomNode">_</a>.<span title="()java.lang.String">getTextContent</span>.<span title="()java.lang.String">trim</span> <span class="delimiter">}</span></span>
<a href="l130"></a><span id="l130">  <span class="delimiter">}</span></span>
<a href="l131"></a><span id="l131"></span>
<a href="l132"></a><span id="l132">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55034">testElementPredicate</a> = <span class="delimiter">{</span></span>
<a href="l133"></a><span id="l133">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="66930">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ns1:{urn:prefix}prefixed&quot;)" class="string">&quot;ns1:{urn:prefix}prefixed&quot;</span><span class="delimiter">)</span></span>
<a href="l134"></a><span id="l134">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#66930" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90709" title="(pred: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]) =&gt; Boolean)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">*</a><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87921" title="implicit scales.xml.XmlPathImplicits.fromPathToComparisoms : (path: scales.xml.package.XmlPath)scales.xml.XmlPathComparisoms">_</a> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90798" title="(other: String)Boolean">===</a> <span title="java.lang.String(&quot;prefixed text&quot;)" class="string">&quot;prefixed text&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102485" title="(implicit path: scales.xml.package.XmlPath)String">pqName</a><span class="delimiter">(</span><a href="#67296" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l135"></a><span id="l135">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[BaseFunctionalityTest.this.DomNode])(convert: (BaseFunctionalityTest.this.DomNode) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#66930" title="List[java.lang.String]">expected</a>, <a href="#55050" title="(path: String, in: AnyRef)java.lang.Object with Iterable[BaseFunctionalityTest.this.DomNode]{def iterator(): java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]}">nodeSet</a><span class="delimiter">(</span><span title="java.lang.String(&quot;//*[. = \'prefixed text\']&quot;)" class="string">&quot;//*[. = 'prefixed text']&quot;</span>, <a href="#55006" title="=&gt; org.w3c.dom.Document">dom</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="BaseFunctionalityTest.this.DomNode" id="67324">x</a> =&gt; <a href="#67324" title="BaseFunctionalityTest.this.DomNode">x</a>.<span title="()java.lang.String">getPrefix</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#55035" title="(node: org.w3c.dom.Node)java.lang.String">qname</a><span class="delimiter">(</span><a href="#67324" title="BaseFunctionalityTest.this.DomNode">x</a><span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l136"></a><span id="l136">  <span class="delimiter">}</span></span>
<a href="l137"></a><span id="l137"></span>
<a href="l138"></a><span id="l138">  <span class="keyword">def</span> <a title="(node: org.w3c.dom.Node)java.lang.String" id="55035">qname</a><span class="delimiter">(</span><a title="org.w3c.dom.Node" id="67327">node</a>: org.w3c.dom.<span title="org.w3c.dom.Node">Node</span><span class="delimiter">)</span> = <span class="delimiter">{</span></span>
<a href="l139"></a><span id="l139">    <span class="keyword">val</span> <a title="java.lang.String" id="67330">ns</a> = <a href="#67327" title="org.w3c.dom.Node">node</a>.<span title="()java.lang.String">getNamespaceURI</span></span>
<a href="l140"></a><span id="l140">    <span title="java.lang.String(&quot;{&quot;)" class="string">&quot;{&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#67330" title="java.lang.String">ns</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#67330" title="java.lang.String">ns</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;}&quot;)" class="string">&quot;}&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#67327" title="org.w3c.dom.Node">node</a>.<span title="()java.lang.String">getLocalName</span></span>
<a href="l141"></a><span id="l141">  <span class="delimiter">}</span></span>
<a href="l142"></a><span id="l142"></span>
<a href="l143"></a><span id="l143">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55036">testNormalizePredicate</a> = <span class="delimiter">{</span></span>
<a href="l144"></a><span id="l144">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="67343">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;{}NoNamespace&quot;)" class="string">&quot;{}NoNamespace&quot;</span><span class="delimiter">)</span></span>
<a href="l145"></a><span id="l145">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#67343" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90709" title="(pred: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]) =&gt; Boolean)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">*</a><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102487" title="(implicit path: scales.xml.package.XmlPath)java.lang.String">normalizeSpace</a><span class="delimiter">(</span><a href="#67545" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]">_</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;start mix mode prefixed text end mix mode&quot;)" class="string">&quot;start mix mode prefixed text end mix mode&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10989" title="object scales.xml.package.Elements">Elements</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102471" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#102485" title="(implicit path: scales.xml.package.XmlPath)String">pqName</a><span class="delimiter">(</span><a href="#67583" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l146"></a><span id="l146">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[BaseFunctionalityTest.this.DomNode])(convert: (BaseFunctionalityTest.this.DomNode) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#67343" title="List[java.lang.String]">expected</a>, <a href="#55050" title="(path: String, in: AnyRef)java.lang.Object with Iterable[BaseFunctionalityTest.this.DomNode]{def iterator(): java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]}">nodeSet</a><span class="delimiter">(</span><span title="java.lang.String(&quot;//*[normalize-space(.) = \'start mix mode prefixed text end mix mode\']&quot;)" class="string">&quot;//*[normalize-space(.) = 'start mix mode prefixed text end mix mode']&quot;</span>, <a href="#55006" title="=&gt; org.w3c.dom.Document">dom</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#55035" title="(node: org.w3c.dom.Node)java.lang.String">qname</a><span class="delimiter">(</span><a href="#67611" title="BaseFunctionalityTest.this.DomNode">_</a><span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l147"></a><span id="l147">    <span class="comment">// /*(fn:normalize-space(.) = 'start mix mode prefixed text end mix mode'</span></span>
<a href="l148"></a><span id="l148">  <span class="delimiter">}</span></span>
<a href="l149"></a><span id="l149"></span>
<a href="l150"></a><span id="l150">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55037">testCData</a> = <span class="delimiter">{</span></span>
<a href="l151"></a><span id="l151">    <span class="comment">// we have two nodes before so 3 whitespaces.  Of course we actually should be getting path as well I think...</span></span>
<a href="l152"></a><span id="l152">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="67617">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;should not have to be &amp; &lt; escaped @ all \&quot;\&quot;&amp;&quot;)" class="string">&quot;should not have to be &amp; &lt; escaped @ all \&quot;\&quot;&amp;&quot;</span><span class="delimiter">)</span></span>
<a href="l153"></a><span id="l153">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#67617" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">cdata</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10985" title="object scales.xml.package.TextFunctions">TextFunctions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#103273" title="(implicit xmlpath: scales.xml.package.XmlPath)String">value</a><span class="delimiter">(</span><a href="#67803" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span>.<span title="()java.lang.String">trim</span> <span class="delimiter">}</span></span>
<a href="l154"></a><span id="l154">  <span class="delimiter">}</span></span>
<a href="l155"></a><span id="l155"></span>
<a href="l156"></a><span id="l156">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55038">testComments</a> = <span class="delimiter">{</span></span>
<a href="l157"></a><span id="l157">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="67810">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot; some comments are better than others &quot;)" class="string">&quot; some comments are better than others &quot;</span>,</span>
<a href="l158"></a><span id="l158">      <span title="java.lang.String(&quot; this wouldn\'t be one of them. &quot;)" class="string">&quot; this wouldn't be one of them. &quot;</span><span class="delimiter">)</span></span>
<a href="l159"></a><span id="l159">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#67810" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90701" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\+</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">comment</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10985" title="object scales.xml.package.TextFunctions">TextFunctions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#103273" title="(implicit xmlpath: scales.xml.package.XmlPath)String">value</a><span class="delimiter">(</span><a href="#68000" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span> <span class="delimiter">}</span></span>
<a href="l160"></a><span id="l160">  <span class="delimiter">}</span></span>
<a href="l161"></a><span id="l161"></span>
<a href="l162"></a><span id="l162">  <span class="comment">/**</span>
<a href="l163"></a><span id="l163">   * //a:ShouldRedeclare/../text()[5]/preceding-sibling::text()[1]</span>
<a href="l164"></a><span id="l164">   *</span>
<a href="l165"></a><span id="l165">  def testPreviousSimple = {</span>
<a href="l166"></a><span id="l166">    val expected = List(&quot;start mix mode&quot;)</span>
<a href="l167"></a><span id="l167">    compare(expected, </span>
<a href="l168"></a><span id="l168">      path.\\.*(&quot;urn:default&quot;::&quot;ShouldRedeclare&quot;).\^.\+.text.pos(4).\.preceding_sibling_::.text |&gt; { x =&gt;</span>
<a href="l169"></a><span id="l169">	x.process( x.path.nodes.drop(3).take(1)) </span>
<a href="l170"></a><span id="l170">      }) { TextFunctions.value(_).trim }</span>
<a href="l171"></a><span id="l171">    compare(expected, </span>
<a href="l172"></a><span id="l172">      path.\\.*(&quot;urn:default&quot;::&quot;ShouldRedeclare&quot;).\^.\+.text.pos(4).\.preceding_sibling_::.text.pos(3)</span>
<a href="l173"></a><span id="l173">      ) { TextFunctions.value(_).trim }</span>
<a href="l174"></a><span id="l174">    /*compare(expected, </span>
<a href="l175"></a><span id="l175">      path.\\.*(&quot;urn:default&quot;::&quot;ShouldRedeclare&quot;).\^.\.text.pos(4).\.preceding_sibling_::.text.\.previous</span>
<a href="l176"></a><span id="l176">      ) { TextFunctions.value(_).trim }*/</span>
<a href="l177"></a><span id="l177">  } */</span></span>
<a href="l178"></a><span id="l178"></span>
<a href="l179"></a><span id="l179">  <span class="comment">/**</span>
<a href="l180"></a><span id="l180">   * //a:ShouldRedeclare/../text()[5]/preceding-sibling::text()[1]</span>
<a href="l181"></a><span id="l181">   */</span> </span>
<a href="l182"></a><span id="l182">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55039">testPreviousSimpleRepeats</a> = <span class="delimiter">{</span></span>
<a href="l183"></a><span id="l183">    <span class="keyword">val</span> <a title="scales.xml.Doc" id="68006">testXml</a> = <a href="../../../classes.sxr/scales/xml/XmlParser.scala.html#10967" title="(source: org.xml.sax.InputSource, strategy: scales.xml.PathOptimisationStrategy[scales.xml.ElemToken], parsers: scales.utils.Loaner[javax.xml.parsers.SAXParser])(implicit xmlVer: scales.xml.XmlVersion)scales.xml.Doc">loadXml</a><a href="../../../classes.sxr/scales/xml/QName.scala.html#87950" title="=&gt; scales.xml.XmlVersion" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlParser.scala.html#87948" title="implicit scales.xml.XmlParserImplicits.readerToSource : (source: java.io.Reader)org.xml.sax.InputSource" class="keyword">new</a> <span title="java.io.FileReader">FileReader</span><span class="delimiter">(</span><span title="java.lang.String(&quot;./src/test/data/BaseXmlTestRepeats.xml&quot;)" class="string">&quot;./src/test/data/BaseXmlTestRepeats.xml&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l184"></a><span id="l184">    <span class="keyword">val</span> <a title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]" id="68007">path</a> = <a href="../../../classes.sxr/scales/utils/Paths.scala.html#10847" title="(tree: scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC])(implicit cbf: scales.utils.package.TreeCBF[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC])scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">top</a><a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87898" title="=&gt; scales.xml.package.XmlCBF" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87897" title="implicit scales.xml.XmlTypesImplicits.docToTree : (doc: scales.xml.Doc)scales.xml.package.XmlTree">testXml</a><span class="delimiter">)</span></span>
<a href="l185"></a><span id="l185">    </span>
<a href="l186"></a><span id="l186">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="68008">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;start mix mode&quot;)" class="string">&quot;start mix mode&quot;</span>, <span title="java.lang.String(&quot;start mix mode&quot;)" class="string">&quot;start mix mode&quot;</span><span class="delimiter">)</span></span>
<a href="l187"></a><span id="l187"><span class="comment">/*    compare(expected, </span>
<a href="l188"></a><span id="l188">      path.\\.*(&quot;urn:default&quot;::&quot;ShouldRedeclare&quot;).\^.\+.text.pos(4).\.preceding_sibling_::.text |&gt; { x =&gt;</span>
<a href="l189"></a><span id="l189">	x.process( x.path.nodes.drop(3).take(1)) </span>
<a href="l190"></a><span id="l190">      }) { TextFunctions.value(_).trim } */</span></span>
<a href="l191"></a><span id="l191">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#68008" title="List[java.lang.String]">expected</a>, </span>
<a href="l192"></a><span id="l192">      <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90707" title="(qname: scales.xml.QName)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">*</a><span class="delimiter">(</span><span title="java.lang.String(&quot;urn:default&quot;)" class="string">&quot;urn:default&quot;</span><span title="(namespace: String)java.lang.Object with scales.xml.UnprefixedQName">::</span><a href="../../../classes.sxr/scales/xml/QName.scala.html#87945" title="implicit scales.xml.QNameImplicits.localStringToNSBuilder : (local: String)(implicit ver: scales.xml.XmlVersion, implicit fromParser: scales.xml.FromParser)java.lang.Object{def ::(namespace: String): java.lang.Object with scales.xml.UnprefixedQName; def l(implicit ver: scales.xml.XmlVersion,implicit fromParser: scales.xml.FromParser): java.lang.Object with scales.xml.NoNamespaceQName}" class="string">&quot;ShouldRedeclare&quot;</a><span class="delimiter">)</span>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90699" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\^</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90701" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\+</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90735" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">text</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90698" title="(pos: =&gt; Int)scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">pos</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">|&gt;</a> <span class="delimiter">{</span> <a title="scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]" id="68362">x</a> =&gt; <span title="(x$1: java.lang.String, x$2: Int, x$3: Int)Unit">assertEquals</span><span class="delimiter">(</span><span title="java.lang.String(&quot;was not size 2fdsa&quot;)" class="string">&quot;was not size 2fdsa&quot;</span>, <span title="Int(2)" class="int">2</span>, <a href="#68362" title="scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">x</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90842" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90858" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>;<a href="#68362" title="scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">x</a><span class="delimiter">}</span>  <span class="comment">//.pos(5)//.\.preceding_sibling_::.text.pos(3)</span></span>
<a href="l193"></a><span id="l193">      <span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10985" title="object scales.xml.package.TextFunctions">TextFunctions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#103273" title="(implicit xmlpath: scales.xml.package.XmlPath)String">value</a><span class="delimiter">(</span><a href="#68444" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span>.<span title="()java.lang.String">trim</span> <span class="delimiter">}</span></span>
<a href="l194"></a><span id="l194">    <span class="comment">/* compare(expected, </span>
<a href="l195"></a><span id="l195">      path.\\.*(&quot;urn:default&quot;::&quot;ShouldRedeclare&quot;).\^.\.text.pos(4).\.preceding_sibling_::.text.\.previous</span>
<a href="l196"></a><span id="l196">      ) { TextFunctions.value(_).trim }*/</span></span>
<a href="l197"></a><span id="l197">  <span class="delimiter">}</span></span>
<a href="l198"></a><span id="l198"></span>
<a href="l199"></a><span id="l199"></span>
<a href="l200"></a><span id="l200">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55040">testPreviousThenSibling</a> = <span title="Unit" class="delimiter">{</span></span>
<a href="l201"></a><span id="l201"><span class="comment">//    val res = path.\*(&quot;NoNamespace&quot;l).\*.\.preceding_sibling_::.*.\.following_sibling_::.*</span></span>
<a href="l202"></a><span id="l202">    <span class="comment">//res foreach println</span></span>
<a href="l203"></a><span id="l203">  <span class="delimiter">}</span></span>
<a href="l204"></a><span id="l204"></span>
<a href="l205"></a><span id="l205">  <span class="keyword">val</span> <a title="java.lang.String" id="55041">utf8</a> = <span class="delimiter">{</span></span>
<a href="l206"></a><span id="l206">    <span class="keyword">val</span> <a title="java.io.InputStreamReader" id="60287">reader</a> = <span title="(x$1: java.io.InputStream, x$2: java.lang.String)java.io.InputStreamReader" class="keyword">new</span> java.io.<span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span><span title="java.io.FileInputStream" class="keyword">new</span> java.io.<span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><span title="java.lang.String(&quot;./src/test/data/BaseFunctionalityTestEntityTest.utf8&quot;)" class="string">&quot;./src/test/data/BaseFunctionalityTestEntityTest.utf8&quot;</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span><span class="delimiter">)</span></span>
<a href="l207"></a><span id="l207">    <span class="keyword">val</span> <a title="java.io.BufferedReader" id="60288">buffered</a> = <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> java.io.<span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><a href="#60287" title="java.io.InputStreamReader">reader</a><span class="delimiter">)</span></span>
<a href="l208"></a><span id="l208">    <span class="keyword">val</span> <a title="java.lang.String" id="60289">rutf8</a> = <a href="#60288" title="java.io.BufferedReader">buffered</a>.<span title="()java.lang.String">readLine</span><span class="delimiter">(</span><span class="delimiter">)</span></span>
<a href="l209"></a><span id="l209">    <a href="#60288" title="java.io.BufferedReader">buffered</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span></span>
<a href="l210"></a><span id="l210">    <a href="#60289" title="java.lang.String">rutf8</a></span>
<a href="l211"></a><span id="l211">  <span class="delimiter">}</span> </span>
<a href="l212"></a><span id="l212"></span>
<a href="l213"></a><span id="l213"></span>
<a href="l214"></a><span id="l214">  <span class="comment">/** Can't do in normal xpath, as it needs to filter out the cdatas */</span></span>
<a href="l215"></a><span id="l215">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55043">testTextOnly</a> : <span title="Unit">Unit</span> = <span class="delimiter">{</span></span>
<a href="l216"></a><span id="l216">    <span class="keyword">val</span> <a title="tnj extends java.lang.Object with scales.xml.TextNodeJoiner[scales.xml.QNameToken] with scales.xml.QNameTokenF" id="68453">tnj</a> = <a href="#68457" title="java.lang.Object with scales.xml.TextNodeJoiner[scales.xml.QNameToken] with scales.xml.QNameTokenF" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scales.xml.TextNodeJoiner[scales.xml.QNameToken] with scales.xml.QNameTokenF" id="68457">TextNodeJoiner</a><span class="delimiter">[</span>QNameToken<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../../../classes.sxr/scales/xml/OptimisingStrategies.scala.html#9248" title="scales.xml.QNameTokenF">QNameTokenF</a> <span class="delimiter">{</span><span class="delimiter">}</span> </span>
<a href="l217"></a><span id="l217">    <span class="comment">// or indeed mixed in.</span></span>
<a href="l218"></a><span id="l218">    <span class="comment">//new MutableVectorLikeStrategy with ElemQNameOptimisationT with TextNodeJoiner {}</span></span>
<a href="l219"></a><span id="l219">    <span class="comment">// join up the text nodes</span></span>
<a href="l220"></a><span id="l220">    <span class="keyword">val</span> <a title="scales.xml.Doc" id="68454">testXml2</a> = <a href="../../../classes.sxr/scales/xml/XmlParser.scala.html#10967" title="(source: org.xml.sax.InputSource, strategy: scales.xml.PathOptimisationStrategy[scales.xml.QNameToken], parsers: scales.utils.Loaner[javax.xml.parsers.SAXParser])(implicit xmlVer: scales.xml.XmlVersion)scales.xml.Doc">loadXml</a><a href="../../../classes.sxr/scales/xml/QName.scala.html#87950" title="=&gt; scales.xml.XmlVersion" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlParser.scala.html#87948" title="implicit scales.xml.XmlParserImplicits.readerToSource : (source: java.io.Reader)org.xml.sax.InputSource" class="keyword">new</a> <span title="java.io.FileReader">FileReader</span><span class="delimiter">(</span><a href="#55004" title="=&gt; java.io.File">xmlFile</a><span class="delimiter">)</span>, strategy = <a href="#68453" title="tnj extends java.lang.Object with scales.xml.TextNodeJoiner[scales.xml.QNameToken] with scales.xml.QNameTokenF">tnj</a><span class="delimiter">)</span></span>
<a href="l221"></a><span id="l221">    <span class="keyword">val</span> <a title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]" id="68455">path</a> = <a href="../../../classes.sxr/scales/utils/Paths.scala.html#10847" title="(tree: scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC])(implicit cbf: scales.utils.package.TreeCBF[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC])scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">top</a><a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87898" title="=&gt; scales.xml.package.XmlCBF" class="delimiter">(</a><a href="../../../classes.sxr/scales/xml/XmlTypes.scala.html#87897" title="implicit scales.xml.XmlTypesImplicits.docToTree : (doc: scales.xml.Doc)scales.xml.package.XmlTree">testXml2</a><span class="delimiter">)</span></span>
<a href="l222"></a><span id="l222"></span>
<a href="l223"></a><span id="l223">    <span class="comment">// we have two nodes before so 3 whitespaces.  Of course we actually should be getting path as well I think...</span></span>
<a href="l224"></a><span id="l224">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="68456">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;start mix mode&quot;)" class="string">&quot;start mix mode&quot;</span>, <span title="java.lang.String(&quot;prefixed text&quot;)" class="string">&quot;prefixed text&quot;</span>, <span title="java.lang.String(&quot;end mix mode&quot;)" class="string">&quot;end mix mode&quot;</span>,</span>
<a href="l225"></a><span id="l225">      <span title="java.lang.String(&quot;\&quot;\012\011&quot;)" class="string">&quot;\&quot;\n\t&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#55041" title="=&gt; java.lang.String">utf8</a>,</span>
<a href="l226"></a><span id="l226">      <span title="java.lang.String(&quot;mix it up some more&quot;)" class="string">&quot;mix it up some more&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span></span>
<a href="l227"></a><span id="l227">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])(convert: (scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#68456" title="List[java.lang.String]">expected</a>, <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87916" title="implicit scales.xml.XmlPathImplicits.fromXmlPathToXPath : (xmlPath: scales.xml.package.XmlPath)(implicit cbf: scala.collection.generic.CanBuildFrom[List[scales.xml.package.XmlPath],scales.xml.package.XmlPath,List[scales.xml.package.XmlPath]])scales.xml.XPath[List[scales.xml.package.XmlPath]]">path</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#90702" title="=&gt; scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]]">\\</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#87917" title="(xpath: scales.xml.XPath[List[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]]])scales.utils.DuplicateFilter[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">textOnly</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#10985" title="object scales.xml.package.TextFunctions">TextFunctions</a>.<a href="../../../classes.sxr/scales/xml/XmlPaths.scala.html#103273" title="(implicit xmlpath: scales.xml.package.XmlPath)String">value</a><span class="delimiter">(</span><a href="#68722" title="scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">_</a><span class="delimiter">)</span>.<span title="()java.lang.String">trim</span> <span class="delimiter">}</span></span>
<a href="l228"></a><span id="l228">  <span class="delimiter">}</span></span>
<a href="l229"></a><span id="l229"></span>
<a href="l230"></a><span id="l230">  <span class="keyword">def</span> <a title="=&gt; Unit" id="55044">testText</a> = <span class="delimiter">{</span></span>
<a href="l231"></a><span id="l231">    <span class="comment">// we have two nodes before so 3 whitespaces.  Of course we actually should be getting path as well I think...</span></span>
<a href="l232"></a><span id="l232">    <span class="keyword">val</span> <a title="List[java.lang.String]" id="68729">expected</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;start mix mode&quot;)" class="string">&quot;start mix mode&quot;</span>, <span title="java.lang.String(&quot;prefixed text&quot;)" class="string">&quot;prefixed text&quot;</span>, <span title="java.lang.String(&quot;end mix mode&quot;)" class="string">&quot;end mix mode&quot;</span>,</span>
<a href="l233"></a><span id="l233">      <span title="java.lang.String(&quot;\&quot;\012\011&quot;)" class="string">&quot;\&quot;\n\t&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#55041" title="=&gt; java.lang.String">utf8</a>,</span>
<a href="l234"></a><span id="l234">      <span class="comment">//&quot;should not have to be &amp; &lt; escaped @ all \&quot;\&quot;&amp;&quot;,</span></span>
<a href="l235"></a><span id="l235">      <span class="comment">//&quot;mix it up some more&quot;,</span></span>
<a href="l236"></a><span id="l236">      <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span></span>
<a href="l237"></a><span id="l237">    <span class="comment">// can't use our version as it identifies two more text nodes</span></span>
<a href="l238"></a><span id="l238"><span class="comment">//     compare( expected, path .\\.text){ TextFunctions.value(_).trim }</span></span>
<a href="l239"></a><span id="l239">    <a href="../../../classes.sxr/scales/utils/TestUtils.scala.html#85797" title="(expectVals: Iterable[java.lang.String], gotVals: Iterable[BaseFunctionalityTest.this.DomNode])(convert: (BaseFunctionalityTest.this.DomNode) =&gt; java.lang.String)Unit">compare</a><span class="delimiter">(</span><a href="#68729" title="List[java.lang.String]">expected</a>, <a href="#55050" title="(path: String, in: AnyRef)java.lang.Object with Iterable[BaseFunctionalityTest.this.DomNode]{def iterator(): java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]}">nodeSet</a><span class="delimiter">(</span><span title="java.lang.String(&quot;//text()&quot;)" class="string">&quot;//text()&quot;</span>, </span>
<a href="l240"></a><span id="l240">			      <span title="(x$1: java.io.InputStream)org.xml.sax.InputSource" class="keyword">new</span> org.xml.sax.<span title="org.xml.sax.InputSource">InputSource</span><span class="delimiter">(</span> <span title="(x$1: java.io.File)java.io.FileInputStream" class="keyword">new</span> <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><a href="#55004" title="=&gt; java.io.File">xmlFile</a><span class="delimiter">)</span><span class="delimiter">)</span></span>
<a href="l241"></a><span id="l241"><span class="comment">//			      dom //  both stream and dom are incorrect :&lt;</span></span>
<a href="l242"></a><span id="l242">			    <span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#68774" title="BaseFunctionalityTest.this.DomNode">_</a>.<span title="()java.lang.String">getTextContent</span>.<span title="()java.lang.String">trim</span> <span class="delimiter">}</span></span>
<a href="l243"></a><span id="l243">  <span class="delimiter">}</span></span>
<a href="l244"></a><span id="l244"></span>
<a href="l245"></a><span id="l245">  <span class="keyword">val</span> <a title="net.sf.saxon.xpath.XPathFactoryImpl" id="55045">xfact</a> = <span title="net.sf.saxon.xpath.XPathFactoryImpl" class="keyword">new</span> net.sf.saxon.xpath.<span title="net.sf.saxon.xpath.XPathFactoryImpl">XPathFactoryImpl</span><span class="delimiter">(</span><span class="delimiter">)</span>;</span>
<a href="l246"></a><span id="l246"></span>
<a href="l247"></a><span id="l247">  <span class="keyword">type</span> <a title="org.w3c.dom.Node" id="55047">DomNode</a> = org.w3c.dom.<span title="org.w3c.dom.Node">Node</span></span>
<a href="l248"></a><span id="l248"></span>
<a href="l249"></a><span id="l249">  <span class="keyword">def</span> <a title="(path: String, in: AnyRef)java.lang.String" id="55048">xstring</a><span class="delimiter">(</span><a title="String" id="68778">path</a>: <span title="String">String</span>, <a title="AnyRef" id="68779">in</a>: <span title="AnyRef">AnyRef</span><span class="comment">/*org.w3c.dom.Document*/</span><span class="delimiter">)</span> = <span class="delimiter">{</span></span>
<a href="l250"></a><span id="l250">    <span class="keyword">val</span> <a title="javax.xml.xpath.XPath" id="68782">xpath</a> = <a href="#55045" title="=&gt; net.sf.saxon.xpath.XPathFactoryImpl">xfact</a>.<span title="()javax.xml.xpath.XPath">newXPath</span></span>
<a href="l251"></a><span id="l251"></span>
<a href="l252"></a><span id="l252">    <span class="keyword">val</span> <a title="javax.xml.xpath.XPathExpression" id="68783">texts</a> = <a href="#68782" title="javax.xml.xpath.XPath">xpath</a>.<span title="(x$1: java.lang.String)javax.xml.xpath.XPathExpression">compile</span><span class="delimiter">(</span><a href="#68778" title="String">path</a><span class="delimiter">)</span></span>
<a href="l253"></a><span id="l253"></span>
<a href="l254"></a><span id="l254">    <a href="#68783" title="javax.xml.xpath.XPathExpression">texts</a>.<span title="(x$1: Any, x$2: javax.xml.namespace.QName)java.lang.Object">evaluate</span><span class="delimiter">(</span></span>
<a href="l255"></a><span id="l255">      <a href="#68779" title="AnyRef">in</a>,</span>
<a href="l256"></a><span id="l256">      javax.xml.xpath.<span title="object javax.xml.xpath.XPathConstants">XPathConstants</span>.<span title="javax.xml.namespace.QName">STRING</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.String" class="delimiter">[</span>java.lang.<span title="java.lang.String">String</span><span class="delimiter">]</span>;</span>
<a href="l257"></a><span id="l257">  <span class="delimiter">}</span></span>
<a href="l258"></a><span id="l258"></span>
<a href="l259"></a><span id="l259">  <span class="keyword">def</span> <a title="(path: String, in: AnyRef)org.w3c.dom.Node" id="55049">node</a><span class="delimiter">(</span><a title="String" id="68795">path</a>: <span title="String">String</span>, <a title="AnyRef" id="68796">in</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <span class="delimiter">{</span></span>
<a href="l260"></a><span id="l260">    <span class="keyword">val</span> <a title="javax.xml.xpath.XPath" id="68799">xpath</a> = <a href="#55045" title="=&gt; net.sf.saxon.xpath.XPathFactoryImpl">xfact</a>.<span title="()javax.xml.xpath.XPath">newXPath</span></span>
<a href="l261"></a><span id="l261"></span>
<a href="l262"></a><span id="l262">    <span class="keyword">val</span> <a title="javax.xml.xpath.XPathExpression" id="68800">texts</a> = <a href="#68799" title="javax.xml.xpath.XPath">xpath</a>.<span title="(x$1: java.lang.String)javax.xml.xpath.XPathExpression">compile</span><span class="delimiter">(</span><a href="#68795" title="String">path</a><span class="delimiter">)</span></span>
<a href="l263"></a><span id="l263"></span>
<a href="l264"></a><span id="l264">    <a href="#68800" title="javax.xml.xpath.XPathExpression">texts</a>.<span title="(x$1: Any, x$2: javax.xml.namespace.QName)java.lang.Object">evaluate</span><span class="delimiter">(</span></span>
<a href="l265"></a><span id="l265">      <a href="#55006" title="=&gt; org.w3c.dom.Document">dom</a>,</span>
<a href="l266"></a><span id="l266">      javax.xml.xpath.<span title="object javax.xml.xpath.XPathConstants">XPathConstants</span>.<span title="javax.xml.namespace.QName">NODE</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.w3c.dom.Node" class="delimiter">[</span>org.w3c.dom.<span title="org.w3c.dom.Node">Node</span><span class="delimiter">]</span>;</span>
<a href="l267"></a><span id="l267">  <span class="delimiter">}</span></span>
<a href="l268"></a><span id="l268"></span>
<a href="l269"></a><span id="l269">  <span class="keyword">def</span> <a title="(path: String, in: AnyRef)java.lang.Object with Iterable[BaseFunctionalityTest.this.DomNode]{def iterator(): java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]}" id="55050">nodeSet</a><span class="delimiter">(</span><a title="String" id="65997">path</a>: <span title="String">String</span>, <a title="AnyRef" id="65998">in</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <span class="delimiter">{</span></span>
<a href="l270"></a><span id="l270">    <span class="keyword">val</span> <a title="javax.xml.xpath.XPath" id="66001">xpath</a> = <a href="#55045" title="=&gt; net.sf.saxon.xpath.XPathFactoryImpl">xfact</a>.<span title="()javax.xml.xpath.XPath">newXPath</span></span>
<a href="l271"></a><span id="l271"></span>
<a href="l272"></a><span id="l272">    <span class="keyword">val</span> <a title="javax.xml.xpath.XPathExpression" id="66002">texts</a> = <a href="#66001" title="javax.xml.xpath.XPath">xpath</a>.<span title="(x$1: java.lang.String)javax.xml.xpath.XPathExpression">compile</span><span class="delimiter">(</span><a href="#65997" title="String">path</a><span class="delimiter">)</span></span>
<a href="l273"></a><span id="l273"></span>
<a href="l274"></a><span id="l274">    <span class="keyword">val</span> <a title="org.w3c.dom.NodeList" id="66003">nodeList</a> = <a href="#66002" title="javax.xml.xpath.XPathExpression">texts</a>.<span title="(x$1: Any, x$2: javax.xml.namespace.QName)java.lang.Object">evaluate</span><span class="delimiter">(</span></span>
<a href="l275"></a><span id="l275">      <a href="#55006" title="=&gt; org.w3c.dom.Document">dom</a>,</span>
<a href="l276"></a><span id="l276">      javax.xml.xpath.<span title="object javax.xml.xpath.XPathConstants">XPathConstants</span>.<span title="javax.xml.namespace.QName">NODESET</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.w3c.dom.NodeList" class="delimiter">[</span>org.w3c.dom.<span title="org.w3c.dom.NodeList">NodeList</span><span class="delimiter">]</span>;</span>
<a href="l277"></a><span id="l277"></span>
<a href="l278"></a><span id="l278">    <a href="#66176" title="java.lang.Object with Iterable[BaseFunctionalityTest.this.DomNode]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterable[BaseFunctionalityTest.this.DomNode]" id="66176">Iterable</a><span class="delimiter">[</span>DomNode<span class="delimiter">]</span> <span class="delimiter">{</span></span>
<a href="l279"></a><span id="l279">      <span class="keyword">def</span> <a title="()java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]" id="66178">iterator</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#66193" title="java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[BaseFunctionalityTest.this.DomNode]" id="66193">Iterator</a><span class="delimiter">[</span>DomNode<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span></span>
<a href="l280"></a><span id="l280">        <span class="keyword">var</span> <a title="Int" id="66753">index</a> = <span title="Int(0)" class="int">0</span></span>
<a href="l281"></a><span id="l281">        <span class="keyword">override</span> <span class="keyword">val</span> <a title="Int" id="66755">size</a> = <a href="#66003" title="org.w3c.dom.NodeList">nodeList</a>.<span title="()Int">getLength</span></span>
<a href="l282"></a><span id="l282"></span>
<a href="l283"></a><span id="l283">        <span class="keyword">def</span> <a title="=&gt; Boolean" id="66757">hasNext</a> = <a href="#66753" title="=&gt; Int">index</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#66755" title="=&gt; Int">size</a></span>
<a href="l284"></a><span id="l284">        <span class="keyword">def</span> <a title="()BaseFunctionalityTest.this.DomNode" id="66758">next</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="BaseFunctionalityTest.this.DomNode">DomNode</span> = <span class="delimiter">{</span></span>
<a href="l285"></a><span id="l285">          <span class="keyword">val</span> <a title="org.w3c.dom.Node" id="66773">res</a> = <a href="#66003" title="org.w3c.dom.NodeList">nodeList</a>.<span title="(x$1: Int)org.w3c.dom.Node">item</span><span class="delimiter">(</span><a href="#66753" title="=&gt; Int">index</a><span class="delimiter">)</span></span>
<a href="l286"></a><span id="l286">          <a href="#66753" title="(x$1: Int)Unit">index</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;</span>
<a href="l287"></a><span id="l287">          <a href="#66773" title="org.w3c.dom.Node">res</a></span>
<a href="l288"></a><span id="l288">        <span class="delimiter">}</span></span>
<a href="l289"></a><span id="l289">      <span class="delimiter">}</span></span>
<a href="l290"></a><span id="l290"></span>
<a href="l291"></a><span id="l291">    <span class="delimiter">}</span></span>
<a href="l292"></a><span id="l292">  <span class="delimiter">}</span></span>
<a href="l293"></a><span id="l293"></span>
<a href="l294"></a><span id="l294"><span class="delimiter">}</span></span>
<a href="l295"></a><span id="l295"></span>
<a href="l296"></a><span id="l296">        </span>
</pre>
    </body>
</html>