<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\XPathTypes.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml

<span class="keyword">import</span> scales.utils._
<span class="keyword">import</span> scala.collection.generic.CanBuildFrom
<span class="keyword">import</span> scales.utils.one

<span class="comment">/** Simple container for keeping relationship between the parent and attribute */</span>
case <span class="keyword">class</span> <a title="class AttributePath extends java.lang.Object with ScalaObject with Product with Serializable" id="101816">AttributePath</a><a href="#101816" title="ScalaObject" class="delimiter">(</a><a title="scales.xml.Attribute" id="101811">attribute</a>: <a href="XmlTypes.scala.html#12126" title="scales.xml.Attribute">Attribute</a>, <a title="scales.xml.package.XmlPath" id="101812">parent</a>: <a href="../utils/Paths.scala.html#11083" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span>

case <span class="keyword">class</span> <a title="class XmlPathComparisoms extends java.lang.Object with ScalaObject with Product with Serializable" id="101796">XmlPathComparisoms</a><a href="#101796" title="ScalaObject" class="delimiter">(</a><a title="scales.xml.package.XmlPath" id="96381">path</a>: <a href="../utils/Paths.scala.html#11083" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(other: String)Boolean" id="96378">===</a><span class="delimiter">(</span><a title="String" id="99443">other</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="package.scala.html#15242" title="=&gt; scales.xml.xpath.Elements.type">Elements</a>.<a href="xpath/OldFunctions.scala.html#99447" title="object scales.xml.package.Elements.Functions">Functions</a>.<a href="xpath/OldFunctions.scala.html#99462" title="(implicit path: scales.xml.package.XmlPath)String">text</a><span class="delimiter">(</span><a href="#96381" title="=&gt; scales.xml.package.XmlPath">path</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#99443" title="String">other</a>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class AttributePathComparisoms extends java.lang.Object with ScalaObject with Product with Serializable" id="101807">AttributePathComparisoms</a><a href="#101807" title="ScalaObject" class="delimiter">(</a><a title="scales.xml.AttributePath" id="96364">path</a>: <a href="#101816" title="scales.xml.AttributePath">AttributePath</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(other: String)Boolean" id="96361">===</a><span class="delimiter">(</span><a title="String" id="99515">other</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="package.scala.html#15240" title="=&gt; scales.xml.xpath.Attributes.type">Attributes</a>.<a href="xpath/OldFunctions.scala.html#99519" title="object scales.xml.package.Attributes.Functions">Functions</a>.<a href="xpath/OldFunctions.scala.html#99533" title="(implicit attribute: scales.xml.AttributePath)String">text</a><span class="delimiter">(</span><a href="#96364" title="=&gt; scales.xml.AttributePath">path</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#99515" title="String">other</a>
<span class="delimiter">}</span>

<span class="comment">/** Attributes that have been selected */</span>
case <span class="keyword">class</span> <a title="class AttributePaths[PT &lt;: Iterable[scales.xml.package.XmlPath]] extends java.lang.Object with ScalaObject with Product with Serializable" id="101803">AttributePaths</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="99717">PT</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span><a href="#101803" title="ScalaObject" class="delimiter">(</a><a title="Iterable[scales.xml.AttributePath]" id="99721">attributes</a>: <span title="Iterable[scales.xml.AttributePath]">Iterable</span><span class="delimiter">[</span>AttributePath<span class="delimiter">]</span>, <a title="scales.xml.XPathInfo" id="99722">path</a>: <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a>, <a title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]" id="99723">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">CanBuildFrom</span><span class="delimiter">[</span>PT, XmlPath, PT<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="ScalesXml.scala.html#12784" title="object scales.xml.ScalesXml">ScalesXml</a>._
  <span class="comment">/** Parents of the attributepaths */</span>
  <span class="keyword">def</span> <a title="()scales.xml.XPath[PT]" id="96225">\^</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[PT]">XPath</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> = <span title="scales.xml.XPath[PT]" class="keyword">new</span> <a href="#13149" title="scales.xml.XPath[PT]">XPath</a><span class="delimiter">[</span>PT<span class="delimiter">]</span><span class="delimiter">(</span><a href="#99722" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#101792" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.XPathInfo">copy</a><span class="delimiter">(</span>nodes = <span title="(xs: Iterable[scales.xml.package.XmlPath]*)List[Iterable[scales.xml.package.XmlPath]]">List</span><span class="delimiter">(</span><a href="#99721" title="=&gt; Iterable[scales.xml.AttributePath]">attributes</a>.<span title="(f: scales.xml.AttributePath =&gt; scales.xml.package.XmlPath)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.AttributePath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">(</span><a href="#99682" title="scales.xml.AttributePath">_</a>.<a href="#101812" title="=&gt; scales.xml.package.XmlPath">parent</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#99723" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>

  <span class="comment">// the following are to provide similar chained predicates as expected by me and the spec</span>

  <span class="keyword">def</span> <a title="(pred: scales.xml.AttributePath =&gt; Boolean)scales.xml.AttributePaths[PT]" id="96226">*@</a><span class="delimiter">(</span><a title="scales.xml.AttributePath =&gt; Boolean" id="99711">pred</a> : AttributePath =&gt; Boolean<span class="delimiter">)</span> : <a href="#101803" title="scales.xml.AttributePaths[PT]">AttributePaths</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> =
    <a href="#101803" title="(attributes: Iterable[scales.xml.AttributePath], path: scales.xml.XPathInfo, cbf: scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT])scales.xml.AttributePaths[PT]">AttributePaths</a><span class="delimiter">(</span><a href="#99721" title="=&gt; Iterable[scales.xml.AttributePath]">attributes</a>.<span title="(p: scales.xml.AttributePath =&gt; Boolean)Iterable[scales.xml.AttributePath]">filter</span> <span class="delimiter">{</span> <a href="#99711" title="(v1: scales.xml.AttributePath)Boolean">pred</a><span class="delimiter">(</span><a href="#99735" title="scales.xml.AttributePath">_</a><span class="delimiter">)</span> <span class="delimiter">}</span>, <a href="#99722" title="=&gt; scales.xml.XPathInfo">path</a>, <a href="#99723" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>

  <span class="comment">/** Special case for AttributeQNames, only local and namespace match */</span>
  <span class="keyword">def</span> <a title="(attrQName: scales.xml.package.AttributeQName)scales.xml.AttributePaths[PT]" id="96227">*@</a><span class="delimiter">(</span><a title="scales.xml.package.AttributeQName" id="99747">attrQName</a> : <a href="../utils/EitherLike.scala.html#10426" title="scales.xml.package.AttributeQName">AttributeQName</a><span class="delimiter">)</span> : <a href="#101803" title="scales.xml.AttributePaths[PT]">AttributePaths</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> =
    <a href="#96226" title="(pred: scales.xml.AttributePath =&gt; Boolean)scales.xml.AttributePaths[PT]">*@</a><span class="delimiter">(</span><span class="delimiter">{</span> attributePath : <a href="#101816" title="scales.xml.AttributePath">AttributePath</a> =&gt; <a href="XmlTypesDefaults.scala.html#92287" title="implicit scales.xml.XmlTypesImplicits.toQName : (attribQName: scales.xml.package.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#99768" title="scales.xml.AttributePath">attributePath</a>.<a href="#101811" title="=&gt; scales.xml.Attribute">attribute</a>.<a href="XmlTypes.scala.html#92168" title="=&gt; scales.xml.package.AttributeQName">name</a><span class="delimiter">)</span> <a href="QName.scala.html#91880" title="(other: scales.xml.QName)Boolean">=:=</a> <a href="XmlTypesDefaults.scala.html#92287" title="implicit scales.xml.XmlTypesImplicits.toQName : (attribQName: scales.xml.package.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#99747" title="scales.xml.package.AttributeQName">attrQName</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="comment">/** Loose match for UnprefixedQNames only, only matches local and namespace */</span>
  <span class="keyword">def</span> <a title="(qname: scales.xml.UnprefixedQName)scales.xml.AttributePaths[PT]" id="96228">*@</a><span class="delimiter">(</span><a title="scales.xml.UnprefixedQName" id="99753">qname</a> : <a href="QName.scala.html#12843" title="scales.xml.UnprefixedQName">UnprefixedQName</a><span class="delimiter">)</span> : <a href="#101803" title="scales.xml.AttributePaths[PT]">AttributePaths</a><span class="delimiter">[</span>PT<span class="delimiter">]</span> =
    <a href="#96226" title="(pred: scales.xml.AttributePath =&gt; Boolean)scales.xml.AttributePaths[PT]">*@</a><span class="delimiter">(</span><span class="delimiter">{</span> attributePath : <a href="#101816" title="scales.xml.AttributePath">AttributePath</a> =&gt; <a href="XmlTypesDefaults.scala.html#92287" title="implicit scales.xml.XmlTypesImplicits.toQName : (attribQName: scales.xml.package.AttributeQName)scales.xml.QName">toQName</a><span class="delimiter">(</span><a href="#99786" title="scales.xml.AttributePath">attributePath</a>.<a href="#101811" title="=&gt; scales.xml.Attribute">attribute</a>.<a href="XmlTypes.scala.html#92168" title="=&gt; scales.xml.package.AttributeQName">name</a><span class="delimiter">)</span> <a href="QName.scala.html#91880" title="(other: scales.xml.QName)Boolean">=:=</a> <a href="#99753" title="scales.xml.UnprefixedQName">qname</a> <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Some if there is one, else none
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.AttributePath]" id="96229">one</a>: <span title="Iterable[scales.xml.AttributePath]">Iterable</span><span class="delimiter">[</span>AttributePath<span class="delimiter">]</span> = <span title="Iterable[scales.xml.AttributePath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#99721" title="=&gt; Iterable[scales.xml.AttributePath]">attributes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="object Nil">Nil</span> <span class="keyword">else</span> <a href="../utils/package.scala.html#11072" title="object scales.utils.package">scales</a>.utils.<a href="../utils/package.scala.html#14842" title="(i: scales.xml.AttributePath)List[scales.xml.AttributePath]">one</a><span class="delimiter">(</span><a href="#99721" title="=&gt; Iterable[scales.xml.AttributePath]">attributes</a>.<span title="=&gt; scales.xml.AttributePath">head</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Some if there is one, else calls handler (allows decisions based on more than one etc.
   */</span>
  <span class="keyword">def</span> <a title="(handler: Iterable[scales.xml.AttributePath] =&gt; Iterable[scales.xml.AttributePath])Iterable[scales.xml.AttributePath]" id="96230">oneOr</a><span class="delimiter">(</span><a title="Iterable[scales.xml.AttributePath] =&gt; Iterable[scales.xml.AttributePath]" id="99797">handler</a>: Iterable<span class="delimiter">[</span>AttributePath<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>AttributePath<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="Iterable[scales.xml.AttributePath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#99721" title="=&gt; Iterable[scales.xml.AttributePath]">attributes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../utils/package.scala.html#11072" title="object scales.utils.package">scales</a>.utils.<a href="../utils/package.scala.html#14842" title="(i: scales.xml.AttributePath)List[scales.xml.AttributePath]">one</a><span class="delimiter">(</span><a href="#99721" title="=&gt; Iterable[scales.xml.AttributePath]">attributes</a>.<span title="=&gt; scales.xml.AttributePath">head</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#99797" title="(v1: Iterable[scales.xml.AttributePath])Iterable[scales.xml.AttributePath]">handler</a><span class="delimiter">(</span><a href="#99721" title="=&gt; Iterable[scales.xml.AttributePath]">attributes</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * XPaths need sorting upon unions etc, and duplicate filtering on \^ parents
 */</span>
case <span class="keyword">class</span> <a title="class XPathInfo extends java.lang.Object with ScalaObject with Product with Serializable" id="101792">XPathInfo</a><a href="#101792" title="ScalaObject" class="delimiter">(</a><a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="100230">nodes</a>: <span title="Iterable[Iterable[scales.xml.package.XmlPath]]">Iterable</span><span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Boolean" id="100231">mustBeSorted</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="100232">filterDuplicates</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="100233">initialNode</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="100234">eager</a> : <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="100235">direct</a> : <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

<span class="keyword">import</span> xpath._

<span class="comment">/**
 * In contrast to the specs reverse axis are not supported.  This puts
 * an extra effort on the user for translating, but I don't agree with
 * the design anyway.  It adds both ambiguity for an embedded dsl:
 *
 * //a:ShouldRedeclare/../text()[5]/preceding-sibling::text()[1]
 *
 * is in reverse order (above is previousSibling in Path), whereas
 *
 * (//a:ShouldRedeclare/../text()[5]/preceding-sibling::text())[1]
 *
 * is in doc order (the first text child of the parent).  Such an arbritary decision does nothing but irritate.  A simpler design as found in this implementation is that the user can simply use full scala data functions to reverse as needed.
 *
 * (Temptation is to provide the base type as SeqLike instead of Iterable as it should be in a sequence with a defined order, also then providing .reverse and friends)
 */</span>
<span class="keyword">class</span> <a title="class XPath[PT &lt;: Iterable[scales.xml.package.XmlPath]] extends java.lang.Object with scales.xml.xpath.ElementStep with scales.xml.xpath.OtherNodeTypes with scales.xml.xpath.AttributeAxis with scales.xml.xpath.SiblingsAxis with scales.xml.xpath.DocumentSplitters with ScalaObject" id="13149">XPath</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="13654">PT</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span><a href="#13149" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="scales.xml.XPathInfo" id="99596">path</a>: <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a>, <span class="keyword">val</span> <a title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]" id="99597">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">CanBuildFrom</span><span class="delimiter">[</span>PT, XmlPath, PT<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="xpath/Axe.scala.html#14413" title="scales.xml.xpath.ElementStep">ElementStep</a> <span class="keyword">with</span> <a href="xpath/Axe.scala.html#14512" title="scales.xml.xpath.OtherNodeTypes">OtherNodeTypes</a> <span class="keyword">with</span> <a href="xpath/Axe.scala.html#14242" title="scales.xml.xpath.AttributeAxis">AttributeAxis</a> <span class="keyword">with</span> <a href="xpath/Axe.scala.html#14554" title="scales.xml.xpath.SiblingsAxis">SiblingsAxis</a> <span class="keyword">with</span> <a href="xpath/Axe.scala.html#14350" title="scales.xml.xpath.DocumentSplitters">DocumentSplitters</a> <span class="delimiter">{</span>

  <span class="keyword">type</span> <a title="PT" id="96286">T</a> = <a href="#13654" title="PT">PT</a>

  <span class="keyword">def</span> <a title="(xpathInfo: scales.xml.XPathInfo)scales.xml.XPath[XPath.this.T]" id="96287">newThis</a><span class="delimiter">(</span><a title="scales.xml.XPathInfo" id="99999">xpathInfo</a>: <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a><span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <span title="scales.xml.XPath[XPath.this.T]" class="keyword">new</span> <a href="#13149" title="scales.xml.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#99999" title="scales.xml.XPathInfo">xpathInfo</a>, <a href="#99597" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.package.XmlPath]" id="96288">empty</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <a href="#99597" title="()scala.collection.mutable.Builder[scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()PT">result</span>
  <span class="keyword">def</span> <a title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]" id="96289">just</a><span class="delimiter">(</span><a title="scales.xml.package.XmlPath" id="100084">only</a>: <a href="../utils/Paths.scala.html#11083" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#99597" title="()scala.collection.mutable.Builder[scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(elem: scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]])scala.collection.mutable.Builder[scales.xml.package.XmlPath,PT]">+=</span> <a href="#100084" title="scales.xml.package.XmlPath">only</a><span class="delimiter">)</span>.<span title="()PT">result</span>

  <span class="comment">/**
   * Allow working within the XPath, easily extend and test
   */</span>
  <span class="keyword">def</span> <a title="(f: scales.xml.XPath[XPath.this.T] =&gt; scales.xml.XPath[XPath.this.T])scales.xml.XPath[XPath.this.T]" id="96290">in</a><span class="delimiter">(</span><a title="scales.xml.XPath[XPath.this.T] =&gt; scales.xml.XPath[XPath.this.T]" id="100184">f</a>: <span class="delimiter">(</span>XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#100184" title="(v1: scales.xml.XPath[XPath.this.T])scales.xml.XPath[XPath.this.T]">f</a><span class="delimiter">(</span><a href="#13149" title="scales.xml.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Allow working within the XPath, easily extend and test
   */</span>
  <span class="keyword">def</span> <a title="(f: scales.xml.XPath[XPath.this.T] =&gt; scales.xml.XPath[XPath.this.T])scales.xml.XPath[XPath.this.T]" id="96291">|&gt;</a><span class="delimiter">(</span><a title="scales.xml.XPath[XPath.this.T] =&gt; scales.xml.XPath[XPath.this.T]" id="100187">f</a>: <span class="delimiter">(</span>XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; XPath<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#96290" title="(f: scales.xml.XPath[XPath.this.T] =&gt; scales.xml.XPath[XPath.this.T])scales.xml.XPath[XPath.this.T]">in</a><span class="delimiter">(</span><a href="#100187" title="scales.xml.XPath[XPath.this.T] =&gt; scales.xml.XPath[XPath.this.T]">f</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Some when its only one in the result set
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.package.XmlPath]" id="96292">one</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100192">nodes</a> = <a href="ScalesXml.scala.html#12784" title="object scales.xml.ScalesXml">ScalesXml</a>.<a href="XmlPaths.scala.html#92312" title="implicit scales.xml.XmlPathImplicits.fromXPathToIterable : (xpath: scales.xml.XPath[_])Iterable[scales.xml.package.XmlPath]">fromXPathToIterable</a><span class="delimiter">(</span><a href="#13149" title="scales.xml.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100192" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="object Nil">Nil</span>
    <span class="keyword">else</span> <a href="../utils/package.scala.html#11072" title="object scales.utils.package">scales</a>.utils.<a href="../utils/package.scala.html#14842" title="(i: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">one</a><span class="delimiter">(</span><a href="#100192" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; scales.xml.package.XmlPath">head</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(handler: scales.xml.XPath[XPath.this.T] =&gt; Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]" id="96293">oneOr</a><span class="delimiter">(</span><a title="scales.xml.XPath[XPath.this.T] =&gt; Iterable[scales.xml.package.XmlPath]" id="100202">handler</a>: XPath<span class="delimiter">[</span>T<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100205">nodes</a> = <a href="ScalesXml.scala.html#12784" title="object scales.xml.ScalesXml">ScalesXml</a>.<a href="XmlPaths.scala.html#92312" title="implicit scales.xml.XmlPathImplicits.fromXPathToIterable : (xpath: scales.xml.XPath[_])Iterable[scales.xml.package.XmlPath]">fromXPathToIterable</a><span class="delimiter">(</span><a href="#13149" title="scales.xml.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100205" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../utils/package.scala.html#11072" title="object scales.utils.package">scales</a>.utils.<a href="../utils/package.scala.html#14842" title="(i: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">one</a><span class="delimiter">(</span><a href="#100205" title="Iterable[scales.xml.package.XmlPath]">nodes</a>.<span title="=&gt; scales.xml.package.XmlPath">head</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#100202" title="(v1: scales.xml.XPath[XPath.this.T])Iterable[scales.xml.package.XmlPath]">handler</a><span class="delimiter">(</span><a href="#13149" title="scales.xml.XPath[PT]" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Union of the two paths, they must use the same type however
   *
   * x | x === x but only when apply fromXPathToIterable (default behaviour anyway)
   *
   * For attribute paths only ++ on an iterable is supported.
   */</span>
  <span class="keyword">def</span> <a title="(other: scales.xml.XPath[XPath.this.T])scales.xml.XPath[XPath.this.T]" id="96294">|</a><span class="delimiter">(</span> <a title="scales.xml.XPath[XPath.this.T]" id="100225">other</a> : <a href="#13149" title="scales.xml.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">)</span> : <a href="#13149" title="scales.xml.XPath[XPath.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = 
    <span title="scales.xml.XPath[PT]" class="keyword">new</span> <a href="#13149" title="scales.xml.XPath[PT]">XPath</a><span class="delimiter">(</span><a href="#101792" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.XPathInfo">XPathInfo</a><span class="delimiter">(</span> 
      nodes = <a href="#99596" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a> <span title="(that: scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">++</span> <a href="#100225" title="scales.xml.XPath[XPath.this.T]">other</a>.<a href="#99596" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>, 
      mustBeSorted = <span title="Boolean(true)" class="keyword">true</span>, filterDuplicates = <span title="Boolean(true)" class="keyword">true</span>, initialNode = <span title="Boolean(false)" class="keyword">false</span>, eager = <a href="#99596" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100234" title="=&gt; Boolean">eager</a> <span title="(x: Boolean)Boolean">|</span> <a href="#100225" title="scales.xml.XPath[XPath.this.T]">other</a>.<a href="#99596" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100234" title="=&gt; Boolean">eager</a><span class="delimiter">)</span>, <a href="#99597" title="=&gt; scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span>
  
  <span class="comment">// TODO figure out unions of other paths (namespaces / attributes)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Pos and filter for a direct access does not flatmap.  The next / breaks the chain
 */</span>
<span class="keyword">class</span> <a title="class DirectXPath[PT &lt;: Iterable[scales.xml.package.XmlPath]] extends scales.xml.XPath[PT] with ScalaObject" id="12303">DirectXPath</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="13655">PT</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span><a href="#12303" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scales.xml.XPathInfo" id="100308">path</a>: <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a>, <span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]" id="100309">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">CanBuildFrom</span><span class="delimiter">[</span>PT, XmlPath, PT<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#13149" title="scales.xml.XPath[PT]">XPath</a><span class="delimiter">[</span>PT<span class="delimiter">]</span><span class="delimiter">(</span><a href="#100308" title="scales.xml.XPathInfo">path</a>, <a href="#100309" title="scala.collection.generic.CanBuildFrom[PT,scales.xml.package.XmlPath,PT]">cbf</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[DirectXPath.this.T]" id="100304">process</a><span class="delimiter">(</span><a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="100312">newNodes</a>: <span title="Iterable[Iterable[scales.xml.package.XmlPath]]">Iterable</span><span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span>,  <a title="scales.xml.XPathInfo" id="100335">info</a> : <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a> = <a href="#100308" title="=&gt; scales.xml.XPathInfo">path</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#96287" title="(xpathInfo: scales.xml.XPathInfo)scales.xml.XPath[DirectXPath.this.T]">newThis</a><span class="delimiter">(</span><a href="#100335" title="scales.xml.XPathInfo">info</a>.<a href="#101792" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.XPathInfo">copy</a><span class="delimiter">(</span> nodes = <a href="#100312" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a> <span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scales.xml.Axis" id="12226">Axis</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/**
   * eager recursive unpack, better performance when its eager
   */</span> 
  <span class="keyword">def</span> <a title="(xmlPath: Iterable[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]" id="96329">eager_recUnpack</a><span class="delimiter">(</span><a title="Iterable[scales.xml.package.XmlPath]" id="100341">xmlPath</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[scales.xml.package.XmlPath]">List</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="List[scales.xml.package.XmlPath]" id="100343">res</a> : <span title="List[scales.xml.package.XmlPath]">List</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

    <span class="keyword">val</span> <a title="Iterator[scales.xml.package.XmlPath]" id="100344">i</a> = <a href="#100341" title="Iterable[scales.xml.package.XmlPath]">xmlPath</a>.<span title="=&gt; Iterator[scales.xml.package.XmlPath]">iterator</span>
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#100344" title="Iterator[scales.xml.package.XmlPath]">i</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scales.xml.package.XmlPath" id="100346">child</a> = <a href="#100344" title="Iterator[scales.xml.package.XmlPath]">i</a>.<span title="()scales.xml.package.XmlPath">next</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#100346" title="scales.xml.package.XmlPath">child</a>.<a href="../utils/Paths.scala.html#43428" title="=&gt; Boolean">isItem</a><span class="delimiter">)</span> 
	<a href="#100343" title="List[scales.xml.package.XmlPath]">res</a> = <a href="#100346" title="scales.xml.package.XmlPath">child</a> <a href="#100347" title="(x: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">::</a> <a href="#100343" title="List[scales.xml.package.XmlPath]">res</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
	<span class="comment">// child first then its kids</span>
	<a href="#100343" title="List[scales.xml.package.XmlPath]">res</a> = <span class="delimiter">(</span><a href="#100346" title="scales.xml.package.XmlPath">child</a> <a href="#100353" title="(x: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">::</a> <a href="#100343" title="List[scales.xml.package.XmlPath]">res</a> <span class="delimiter">)</span>.<span title="(prefix: List[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]">reverse_:::</span> <span class="delimiter">(</span>
	  <a href="#96329" title="(xmlPath: Iterable[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]">eager_recUnpack</a><span class="delimiter">(</span><a href="#100346" title="scales.xml.package.XmlPath">child</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#100343" title="List[scales.xml.package.XmlPath]">res</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Possibly lazy recursive unpack, used by l_\\ and descendant
   */</span> 
  <span class="keyword">def</span> <a title="(axis: scales.xml.Axis)(xmlPath: Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]" id="96330">lazy_recUnpack</a><span class="delimiter">(</span><a title="scales.xml.Axis" id="100365">axis</a> : <a href="#12225" title="scales.xml.Axis">Axis</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterable[scales.xml.package.XmlPath]" id="100366">xmlPath</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =
    <a href="#100366" title="Iterable[scales.xml.package.XmlPath]">xmlPath</a>.<span title="(f: scales.xml.package.XmlPath =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span> <a title="scales.xml.package.XmlPath" id="100384">child</a> =&gt;
      <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100384" title="scales.xml.package.XmlPath">child</a>.<a href="../utils/Paths.scala.html#43428" title="=&gt; Boolean">isItem</a><span class="delimiter">)</span> <a href="#100365" title="scales.xml.Axis">axis</a>.<a href="#96247" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#100384" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span> 
      <span class="keyword">else</span> <span class="delimiter">{</span>
	<span class="comment">// child first then its kids</span>
	<a href="#100365" title="scales.xml.Axis">axis</a>.<a href="#96247" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#100384" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">++</span>
	<a href="#96330" title="(axis: scales.xml.Axis)(xmlPath: Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]">lazy_recUnpack</a><span class="delimiter">(</span><a href="#100365" title="scales.xml.Axis">axis</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#100384" title="scales.xml.package.XmlPath">child</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>		       
    <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Base trait for XPath Axis, also provides common functionality
 */</span> 
  <span class="keyword">trait</span> <a title="trait Axis extends java.lang.Object with ScalaObject" id="12225">Axis</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#12226" title="object scales.xml.Axis">Axis</a>._

    <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: Iterable[scales.xml.package.XmlPath]" id="96241">T</a> &lt;: Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="=&gt; scala.collection.generic.CanBuildFrom[Axis.this.T,scales.xml.package.XmlPath,Axis.this.T]" id="96242">cbf</a>: <span title="scala.collection.generic.CanBuildFrom[Axis.this.T,scales.xml.package.XmlPath,Axis.this.T]">CanBuildFrom</span><span class="delimiter">[</span>T, XmlPath, T<span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="=&gt; scales.xml.XPathInfo" id="96243">path</a>: <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a>

    <span class="keyword">def</span> <a title="(xpathInfo: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]" id="96244">newThis</a><span class="delimiter">(</span><a title="scales.xml.XPathInfo" id="100001">xpathInfo</a>: <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a><span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span>

    <span class="keyword">def</span> <a title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]" id="96245">process</a><span class="delimiter">(</span><a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="100315">newNodes</a>: <span title="Iterable[Iterable[scales.xml.package.XmlPath]]">Iterable</span><span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="scales.xml.XPathInfo" id="100319">info</a> : <a href="#101792" title="scales.xml.XPathInfo">XPathInfo</a> = <a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="100320">nn</a> =
	<span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100234" title="=&gt; Boolean">eager</a><span class="delimiter">)</span> <span class="delimiter">{</span>
	  <span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100315" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#100326" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// look first</span>
	    <a href="#100315" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Iterable[Iterable[scales.xml.package.XmlPath]]">filter</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#100330" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> 
	  <span class="keyword">else</span>
	    <a href="#100315" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>
	<span class="delimiter">}</span> <span class="keyword">else</span> <a href="#100315" title="Iterable[Iterable[scales.xml.package.XmlPath]]">newNodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Iterable[Iterable[scales.xml.package.XmlPath]]">filter</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#100333" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="comment">// do it anyway</span>

      <a href="#96244" title="(xpathInfo: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">newThis</a><span class="delimiter">(</span><a href="#100319" title="scales.xml.XPathInfo">info</a>.<a href="#101792" title="(nodes: Iterable[Iterable[scales.xml.package.XmlPath]], mustBeSorted: Boolean, filterDuplicates: Boolean, initialNode: Boolean, eager: Boolean, direct: Boolean)scales.xml.XPathInfo">copy</a><span class="delimiter">(</span> nodes = <a href="#100320" title="Iterable[Iterable[scales.xml.package.XmlPath]]">nn</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Iterable[scales.xml.package.XmlPath]" id="96246">empty</a>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span>
    <span class="keyword">def</span> <a title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]" id="96247">just</a><span class="delimiter">(</span><a title="scales.xml.package.XmlPath" id="100086">only</a>: <a href="../utils/Paths.scala.html#11083" title="scales.xml.package.XmlPath">XmlPath</a><span class="delimiter">)</span>: <span title="Iterable[scales.xml.package.XmlPath]">Iterable</span><span class="delimiter">[</span>XmlPath<span class="delimiter">]</span>

    <span class="comment">/**
     * x prefixed to avoid disturbing the use of an xpath as an iterable
     */</span> 
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.XPath[Axis.this.T]" id="96248">xflatMap</a><span class="delimiter">(</span><a title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]]" id="100456">f</a> : Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">)</span> =
      <a href="#96245" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">process</a><span class="delimiter">(</span> <a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">(</span> <a href="#100456" title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">f</a> <span class="delimiter">)</span> <span class="delimiter">)</span>

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)scales.xml.XPath[Axis.this.T]" id="96249">xfilter</a><span class="delimiter">(</span> <a title="Iterable[scales.xml.package.XmlPath] =&gt; Boolean" id="100498">f</a> : Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =&gt; Boolean <span class="delimiter">)</span> = 
      <a href="#96245" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(p: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)Iterable[Iterable[scales.xml.package.XmlPath]]">filter</span><span class="delimiter">(</span> <a href="#100498" title="Iterable[scales.xml.package.XmlPath] =&gt; Boolean">f</a> <span class="delimiter">)</span> <span class="delimiter">)</span>

    <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(onN: Int =&gt; Boolean)scales.xml.XPath[Axis.this.T]" id="96250">xlast</a><span class="delimiter">(</span> <a title="Int =&gt; Boolean" id="100503">onN</a> : Int =&gt; Boolean <span class="delimiter">)</span> : <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96249" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Boolean)scales.xml.XPath[Axis.this.T]">xfilter</a><span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100506">x</a> =&gt; <a href="#100503" title="(v1: Int)Boolean">onN</a><span class="delimiter">(</span> <a href="#100506" title="Iterable[scales.xml.package.XmlPath]">x</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> <span class="delimiter">}</span>

    <span class="comment">/**
     * Equivalent to [last() &gt; n]
     */</span> 
    <span class="keyword">def</span> <a title="(n: =&gt; Int)scales.xml.XPath[Axis.this.T]" id="96251">last_&gt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="100508">n</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96250" title="(onN: Int =&gt; Boolean)scales.xml.XPath[Axis.this.T]">xlast</a><span class="delimiter">(</span> <a href="#100511" title="Int">_</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#100508" title="=&gt; Int">n</a> <span class="delimiter">)</span>

    <span class="comment">/**
     * Equivalent to [last() &lt; n]
     */</span> 
    <span class="keyword">def</span> <a title="(n: =&gt; Int)scales.xml.XPath[Axis.this.T]" id="96252">last_&lt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="100516">n</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96250" title="(onN: Int =&gt; Boolean)scales.xml.XPath[Axis.this.T]">xlast</a><span class="delimiter">(</span> <a href="#100519" title="Int">_</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#100516" title="=&gt; Int">n</a> <span class="delimiter">)</span>

    <span class="comment">/**
     * Equivalent to [last() = n]
     */</span> 
    <span class="keyword">def</span> <a title="(n: =&gt; Int)scales.xml.XPath[Axis.this.T]" id="96253">last_==</a><span class="delimiter">(</span><a title="=&gt; Int" id="100524">n</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96250" title="(onN: Int =&gt; Boolean)scales.xml.XPath[Axis.this.T]">xlast</a><span class="delimiter">(</span> <a href="#100527" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <a href="#100524" title="=&gt; Int">n</a> <span class="delimiter">)</span>

    <span class="comment">/**
     * Equivalent to position() = last()
     */</span> 
    <span class="keyword">def</span> <a title="=&gt; scales.xml.XPath[Axis.this.T]" id="96254">pos_eq_last</a> : <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96263" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])scales.xml.XPath[Axis.this.T]">xmap</a> <span class="delimiter">{</span> <a href="#100575" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="(xo: Option[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]">lastOption</span> <span class="delimiter">}</span>

    <span class="comment">/**
     * Equivalent to [position() &gt; pos]
     */</span> 
    <span class="keyword">def</span> <a title="(pos: =&gt; Int)scales.xml.XPath[Axis.this.T]" id="96255">pos_&gt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="100581">pos</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96248" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.XPath[Axis.this.T]">xflatMap</a> <span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100584">path</a> =&gt;
	<span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100585">n</a> = <a href="#100584" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(n: Int)Iterable[scales.xml.package.XmlPath]">drop</span><span class="delimiter">(</span><a href="#100581" title="=&gt; Int">pos</a><span class="delimiter">)</span>
	<span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100585" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
	  <a href="#96246" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
	<span class="keyword">else</span>
	  <a href="../utils/package.scala.html#14842" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#100585" title="Iterable[scales.xml.package.XmlPath]">n</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/**
     * Equivalent to [position() &lt; pos]
     */</span> 
    <span class="keyword">def</span> <a title="(pos: =&gt; Int)scales.xml.XPath[Axis.this.T]" id="96256">pos_&lt;</a><span class="delimiter">(</span><a title="=&gt; Int" id="100589">pos</a> : =&gt; Int<span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96248" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.XPath[Axis.this.T]">xflatMap</a> <span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100592">path</a> =&gt;
	<span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100593">n</a> = <a href="#100592" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(n: Int)Iterable[scales.xml.package.XmlPath]">take</span><span class="delimiter">(</span><a href="#100589" title="=&gt; Int">pos</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100593" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
	  <a href="#96246" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
	<span class="keyword">else</span>
	  <a href="../utils/package.scala.html#14842" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#100593" title="Iterable[scales.xml.package.XmlPath]">n</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(p: =&gt; Int)scales.xml.XPath[Axis.this.T]" id="96257">pos_==</a><span class="delimiter">(</span><a title="=&gt; Int" id="100601">p</a>: =&gt; Int<span class="delimiter">)</span> = <a href="#96258" title="(pos: =&gt; Int)scales.xml.XPath[Axis.this.T]">pos</a><span class="delimiter">(</span><a href="#100601" title="=&gt; Int">p</a><span class="delimiter">)</span>

    <span class="comment">/**
     * 1 index based, per spec, but unsure if it should be
     */</span>
    <span class="keyword">def</span> <a title="(pos: =&gt; Int)scales.xml.XPath[Axis.this.T]" id="96258">pos</a><span class="delimiter">(</span><a title="=&gt; Int" id="100604">pos</a>: =&gt; Int<span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = 
      <a href="#96248" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[Iterable[scales.xml.package.XmlPath]])scales.xml.XPath[Axis.this.T]">xflatMap</a> <span class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100607">path</a> =&gt;
	<span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100608">n</a> = <a href="#100607" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(n: Int)Iterable[scales.xml.package.XmlPath]">take</span><span class="delimiter">(</span><a href="#100604" title="=&gt; Int">pos</a><span class="delimiter">)</span>
		 
	<span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100608" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <a href="#100604" title="=&gt; Int">pos</a><span class="delimiter">)</span> 
	  <a href="#96246" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
	<span class="keyword">else</span> 
	  <a href="../utils/package.scala.html#14842" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#96247" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#100608" title="Iterable[scales.xml.package.XmlPath]">n</a>.<span title="=&gt; scales.xml.package.XmlPath">last</span><span class="delimiter">)</span><span class="delimiter">)</span>               
      <span class="delimiter">}</span>

    <span class="comment">/** Parents of these paths */</span>
    <span class="keyword">def</span> <a title="=&gt; scales.xml.XPath[Axis.this.T]" id="96259">\^</a> : <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <span class="comment">/* must process dups
       * flatten, only each elem should get through anyway
       */</span>
      <a href="#96245" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">{</span> <a title="Iterable[scales.xml.package.XmlPath]" id="100629">path</a> =&gt;
	<a href="#100629" title="Iterable[scales.xml.package.XmlPath]">path</a>.<span title="(f: scales.xml.package.XmlPath =&gt; scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">{</span> <a title="scales.xml.package.XmlPath" id="100646">x</a> =&gt;
          <span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#100646" title="scales.xml.package.XmlPath">x</a>.<a href="../utils/Paths.scala.html#43418" title="=&gt; scales.utils.EitherLike[scales.utils.Top[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC],scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">top</a>.<a href="../utils/EitherLike.scala.html#43461" title="=&gt; Boolean">isLeft</a><span class="delimiter">)</span> <a href="#96246" title="=&gt; Iterable[scales.xml.package.XmlPath]">empty</a>
          <span class="keyword">else</span> <a href="../utils/package.scala.html#14842" title="(i: Iterable[scales.xml.package.XmlPath])List[Iterable[scales.xml.package.XmlPath]]">one</a><span class="delimiter">(</span><a href="#96247" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#100646" title="scales.xml.package.XmlPath">x</a>.<a href="../utils/Paths.scala.html#43418" title="=&gt; scales.utils.EitherLike[scales.utils.Top[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC],scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">top</a>.<a href="../utils/EitherLike.scala.html#43468" title="=&gt; scales.utils.RightLikeProjection[scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]]">right</a>.<a href="../utils/EitherLike.scala.html#43448" title="=&gt; scales.utils.Path[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">get</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>, <a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="101565">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="101560" class="keyword">false</a>, direct = <a title="Boolean(false)" id="101561" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/** simply forwards the current context, element\item specific versions exist that step downwards in document order */</span>
    <span class="keyword">def</span> <a title="=&gt; scales.xml.XPath[Axis.this.T]" id="96260">\</a> : <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96244" title="(xpathInfo: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">newThis</a><span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="101573">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="101568" class="keyword">false</a>, direct = <a title="Boolean(false)" id="101569" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * all children unpacked, normal xpath requires the context in E1/E2, which hugely complicates things, so \ is this, \+ is \ in the case where unpacking is needed
     * which just leaves \* varieties for elements.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; scales.xml.XPath[Axis.this.T]" id="96261">\+</a> : <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96245" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],scales.xml.package.XmlPath,Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span>
        <a href="#101592" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="(f: scales.xml.package.XmlPath =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scales.xml.package.XmlPath],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span> <a title="scales.xml.package.XmlPath" id="101609">child</a> =&gt;
          <span title="Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#101609" title="scales.xml.package.XmlPath">child</a>.<a href="../utils/Paths.scala.html#43428" title="=&gt; Boolean">isItem</a><span class="delimiter">)</span> <a href="#96247" title="(only: scales.xml.package.XmlPath)Iterable[scales.xml.package.XmlPath]">just</a><span class="delimiter">(</span><a href="#101609" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="../utils/package.scala.html#14842" title="(i: scales.xml.package.XmlPath)List[scales.xml.package.XmlPath]">one</a><span class="delimiter">(</span><a href="#101609" title="scales.xml.package.XmlPath">child</a><span class="delimiter">)</span> <span class="comment">//: Iterable[XmlPath] </span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>, <a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="101662">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="101657" class="keyword">false</a>, direct = <a title="Boolean(false)" id="101658" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * All descendants, uses XPathInfo eager to choose an implementation
     */</span> 
    <span class="keyword">def</span> <a title="=&gt; scales.xml.XPath[Axis.this.T]" id="96262">\\</a> : <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]" id="101665">f</a> = 
	<span title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]" class="keyword">if</span> <span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100234" title="=&gt; Boolean">eager</a><span class="delimiter">)</span> <a href="#96329" title="(xmlPath: Iterable[scales.xml.package.XmlPath])List[scales.xml.package.XmlPath]">eager_recUnpack</a> _
	<span class="keyword">else</span> <a href="#96330" title="(axis: scales.xml.Axis)(xmlPath: Iterable[scales.xml.package.XmlPath])Iterable[scales.xml.package.XmlPath]">lazy_recUnpack</a><a href="#101669" title="Iterable[scales.xml.package.XmlPath]" class="delimiter">(</a><a href="#12225" title="scales.xml.Axis" class="keyword">this</a><span class="delimiter">)</span> _

      <a href="#96245" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">process</a><span class="delimiter">(</span>
        <span class="delimiter">(</span><span title="Iterable[Iterable[scales.xml.package.XmlPath]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100233" title="=&gt; Boolean">initialNode</a><span class="delimiter">)</span> <a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a> <span class="comment">// crazy initial expression thing 3.2 in http://www.w3.org/TR/xpath20/#id-path-expressions</span>
        <span class="keyword">else</span> List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="(that: scala.collection.GenTraversableOnce[Iterable[scales.xml.package.XmlPath]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">++</span> <a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; scala.collection.GenTraversableOnce[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]])Iterable[scales.xml.package.XmlPath]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,scales.xml.package.XmlPath,Iterable[scales.xml.package.XmlPath]]" class="delimiter">{</span> <a href="#101665" title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]">f</a> <span class="delimiter">}</span>,
	 <a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="Iterable[Iterable[scales.xml.package.XmlPath]]" id="101764">copy</a><span class="delimiter">(</span>initialNode = <a title="Boolean(false)" id="101759" class="keyword">false</a>, direct = <a title="Boolean(false)" id="101760" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])scales.xml.XPath[Axis.this.T]" id="96263">xmap</a><span class="delimiter">(</span> <a title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]" id="100534">f</a> : Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> =&gt; Iterable<span class="delimiter">[</span>XmlPath<span class="delimiter">]</span> <span class="delimiter">)</span> =
      <a href="#96245" title="(newNodes: Iterable[Iterable[scales.xml.package.XmlPath]], info: scales.xml.XPathInfo)scales.xml.XPath[Axis.this.T]">process</a><span class="delimiter">(</span><a href="#96243" title="=&gt; scales.xml.XPathInfo">path</a>.<a href="#100230" title="=&gt; Iterable[Iterable[scales.xml.package.XmlPath]]">nodes</a>.<span title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Iterable[scales.xml.package.XmlPath]],Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]])Iterable[Iterable[scales.xml.package.XmlPath]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Iterable[scales.xml.package.XmlPath],Iterable[Iterable[scales.xml.package.XmlPath]]]" class="delimiter">{</span> <a href="#100534" title="Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath]">f</a> <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="comment">/** filter through the current matches */</span>
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(pred: scales.xml.package.XmlPath =&gt; Boolean)scales.xml.XPath[Axis.this.T]" id="96264">filter</a><span class="delimiter">(</span><a title="scales.xml.package.XmlPath =&gt; Boolean" id="101765">pred</a>: XmlPath =&gt; Boolean<span class="delimiter">)</span>: <a href="#13149" title="scales.xml.XPath[Axis.this.T]">XPath</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#96263" title="(f: Iterable[scales.xml.package.XmlPath] =&gt; Iterable[scales.xml.package.XmlPath])scales.xml.XPath[Axis.this.T]">xmap</a><span class="delimiter">{</span> <a href="#101768" title="Iterable[scales.xml.package.XmlPath]">_</a>.<span title="(p: scales.xml.package.XmlPath =&gt; Boolean)Iterable[scales.xml.package.XmlPath]">filter</span><span class="delimiter">(</span><a href="#101765" title="scales.xml.package.XmlPath =&gt; Boolean">pred</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="delimiter">}</span>

        </pre>
    </body>
</html>