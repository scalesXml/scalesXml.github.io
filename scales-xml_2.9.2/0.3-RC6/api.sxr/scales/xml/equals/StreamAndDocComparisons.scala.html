<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\equals\StreamAndDocComparisons.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml.equals

<span class="keyword">import</span> scales.xml.<span class="delimiter">{</span>QName, Elem, Attribs, Attributes, Attribute, XmlItem, Text, PI, CData, Comment, PullType, EqualsHelpers, EndElem, Misc, Miscs, DocLike<span class="delimiter">}</span>

<span class="keyword">import</span> <a href="XmlEquals.scala.html#13713" title="object scales.xml.equals.XmlEquals">XmlEquals</a>._

<span class="keyword">import</span> scalaz._
<span class="keyword">import</span> <span title="object scalaz.Scalaz">Scalaz</span>._

<span class="keyword">import</span> <a href="XmlDifference.scala.html#13617" title="object scales.xml.equals.SomeDifference">SomeDifference</a>.noCalculation

<span class="comment">/**
 * This interface allows for non xml matching, for example a forward Iterator from a Text child.  This would be impossible to model as an xml document, but could be useful for comparison.
 *
 * This trait boxes a given conversion, stopping accidental serialize calls on the resulting streams.
 */</span> 
<span class="keyword">class</span> <a title="class StreamComparable[T] extends java.lang.Object with ScalaObject" id="13619">StreamComparable</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14298">T</a> &lt;% Iterator<span class="delimiter">[</span>PullType<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span> <span class="keyword">val</span> <a title="T" id="115139">t</a> : <a href="#14298" title="T">T</a> <span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[scales.xml.package.PullType]" id="96157">underlyingIterator</a> : <span title="Iterator[scales.xml.package.PullType]">Iterator</span><span class="delimiter">[</span>PullType<span class="delimiter">]</span> = <a href="#96155" title="(v1: T)Iterator[scales.xml.package.PullType]">t</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Compares based on streams.  Requires comparisons for XmlItem, Elem and a QName Equal instance for testing EndElems.
 */</span> 
<span class="keyword">class</span> <a title="class StreamComparison extends java.lang.Object with scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]] with ScalaObject" id="13668">StreamComparison</a><a href="#13668" title="ScalaObject" class="delimiter">(</a> <a title="Iterator[scales.xml.package.PullType] =&gt; Iterator[scales.xml.package.PullType]" id="115201">filter</a> : Iterator<span class="delimiter">[</span>PullType<span class="delimiter">]</span> =&gt; Iterator<span class="delimiter">[</span>PullType<span class="delimiter">]</span> = <a href="#115207" title="(x: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">identity</a><span class="delimiter">)</span><span class="delimiter">(</span> <span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="115196">ic</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="115197">ec</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="115198">endElemQNameEqual</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="115199">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]">XmlComparison</a><span class="delimiter">[</span>StreamComparable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, ocontext: scales.xml.equals.ComparisonContext, lefti: scales.xml.equals.StreamComparable[_], righti: scales.xml.equals.StreamComparable[_])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="115185">compare</a><span class="delimiter">(</span> <a title="Boolean" id="115209">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="115210">ocontext</a> : <a href="ComparisonContext.scala.html#13313" title="scales.xml.equals.ComparisonContext">ComparisonContext</a> , <a title="scales.xml.equals.StreamComparable[_]" id="115211">lefti</a> : <a href="#13619" title="scales.xml.equals.StreamComparable[_]">StreamComparable</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="scales.xml.equals.StreamComparable[_]" id="115212">righti</a> : <a href="#13619" title="scales.xml.equals.StreamComparable[_]">StreamComparable</a><span class="delimiter">[</span>_<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">var</span> <a title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="115228">res</a> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="object None">None</span>
    <span class="keyword">val</span> <a title="zip extends java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]" id="115229">joined</a> = <a href="#115201" title="(v1: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">filter</a><span class="delimiter">(</span><a href="#115211" title="scales.xml.equals.StreamComparable[_]">lefti</a>.<a href="#96157" title="=&gt; Iterator[scales.xml.package.PullType]">underlyingIterator</a><span class="delimiter">)</span>.<span title="(that: Iterator[scales.xml.package.PullType])java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]">zip</span><span class="delimiter">(</span><a href="#115201" title="(v1: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">filter</a><span class="delimiter">(</span><a href="#115212" title="scales.xml.equals.StreamComparable[_]">righti</a>.<a href="#96157" title="=&gt; Iterator[scales.xml.package.PullType]">underlyingIterator</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="scales.xml.equals.ComparisonContext" id="115230">context</a> = <a href="#115210" title="scales.xml.equals.ComparisonContext">ocontext</a>

    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span> <a href="#115228" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#115229" title="zip extends java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]">joined</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#115229" title="zip extends java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]">joined</a>.<span title="()(scales.xml.package.PullType, scales.xml.package.PullType)">next</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="scales.xml.Elem" id="115248">x</a> : <a href="../XmlTypes.scala.html#12439" title="scales.xml.Elem">Elem</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="scales.xml.Elem" id="115250">y</a> : <a href="../XmlTypes.scala.html#12439" title="scales.xml.Elem">Elem</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
	  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#115209" title="Boolean">calculate</a> <span title="(x: Boolean)Boolean">||</span> <a href="#115199" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// also needed for qname handling</span>
	    <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a> = <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a>.<a href="ComparisonContext.scala.html#114331" title="(leftElem: scales.xml.Elem, rightElem: scales.xml.Elem)scales.xml.equals.ComparisonContext">startElems</a><span class="delimiter">(</span><a href="#115248" title="scales.xml.Elem">x</a>, <a href="#115250" title="scales.xml.Elem">y</a><span class="delimiter">)</span>
	  <span class="delimiter">}</span>
	  <a href="#115228" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = <a href="#115197" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">ec</a>.<a href="XmlComparisons.scala.html#96088" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.Elem, right: scales.xml.Elem)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#115209" title="Boolean">calculate</a>, <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#115248" title="scales.xml.Elem">x</a>, <a href="#115250" title="scales.xml.Elem">y</a><span class="delimiter">)</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="scales.xml.XmlItem" id="115260">x</a> : <a href="../XmlTypes.scala.html#12949" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="scales.xml.XmlItem" id="115262">y</a> : <a href="../XmlTypes.scala.html#12949" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
	  <a href="#115228" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = <a href="#115196" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>.<a href="XmlComparisons.scala.html#96088" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.XmlItem, right: scales.xml.XmlItem)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#115209" title="Boolean">calculate</a>, <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#115260" title="scales.xml.XmlItem">x</a>, <a href="#115262" title="scales.xml.XmlItem">y</a><span class="delimiter">)</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="scales.xml.EndElem" id="115272">x</a> : <a href="../XmlPull.scala.html#12460" title="scales.xml.EndElem">EndElem</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="scales.xml.EndElem" id="115274">y</a>  : <a href="../XmlPull.scala.html#12460" title="scales.xml.EndElem">EndElem</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
	  <a href="#115228" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = 
	    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#115198" title="scalaz.Equal[scales.xml.QName]">endElemQNameEqual</a>.<span title="(a1: scales.xml.QName, a2: scales.xml.QName)Boolean">equal</span><span class="delimiter">(</span><a href="#115272" title="scales.xml.EndElem">x</a>.<a href="../XmlPull.scala.html#92430" title="=&gt; scales.xml.QName">name</a>, <a href="#115274" title="scales.xml.EndElem">y</a>.<a href="../XmlPull.scala.html#92430" title="=&gt; scales.xml.QName">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#115209" title="Boolean">calculate</a><span class="delimiter">)</span>
		<span title="(x: (scales.xml.equals.EndElemNameDifference, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.EndElemNameDifference, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.EndElemNameDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.EndElemNameDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#115285" title="(left: scales.xml.EndElem, right: scales.xml.EndElem)scales.xml.equals.EndElemNameDifference">EndElemNameDifference</a><span class="delimiter">(</span><a href="#115272" title="scales.xml.EndElem">x</a>, <a href="#115274" title="scales.xml.EndElem">y</a><span class="delimiter">)</span>, <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
	      <span class="keyword">else</span> 
		<a href="XmlDifference.scala.html#114698" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
	    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="object None">None</span>
	  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#115209" title="Boolean">calculate</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// also needed for qname handling</span>
	    <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a> = <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a>.<a href="ComparisonContext.scala.html#114333" title="=&gt; scales.xml.equals.ComparisonContext">endElem</a>
	  <span class="delimiter">}</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="scales.xml.package.PullType" id="115314">left</a>, <a title="scales.xml.package.PullType" id="115315">right</a><span class="delimiter">)</span> =&gt; 
	  <a href="#115228" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = 
	    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#115209" title="Boolean">calculate</a> <span title="(x: Boolean)Boolean">||</span> <a href="#115199" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
	      <span title="(x: (scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.DifferentTypes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#115324" title="(left: scales.xml.package.PullType, right: scales.xml.package.PullType)scales.xml.equals.DifferentTypes">DifferentTypes</a><span class="delimiter">(</span><a href="#115314" title="scales.xml.package.PullType">left</a>, <a href="#115315" title="scales.xml.package.PullType">right</a><span class="delimiter">)</span>, <a href="#115230" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span> 
	    <span class="keyword">else</span>
	      <a href="XmlDifference.scala.html#114698" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#115228" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Wraps a given T with a conversion from T to an xml stream
 */</span> 
<span class="keyword">class</span> <a title="class StreamComparisonWrapper[T] extends java.lang.Object with scales.xml.equals.XmlComparison[T] with ScalaObject" id="13670">StreamComparisonWrapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14299">T</a> &lt;% StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span> <span class="keyword">val</span> <a title="scales.xml.equals.StreamComparison" id="115365">str</a> : <a href="#13668" title="scales.xml.equals.StreamComparison">StreamComparison</a> <span class="delimiter">)</span> <span class="keyword">extends</span> <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, lt: T, rt: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="115361">compare</a><span class="delimiter">(</span> <a title="Boolean" id="115367">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="115368">context</a> : <a href="ComparisonContext.scala.html#13313" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="T" id="115369">lt</a> : <a href="#14299" title="T">T</a>, <a title="T" id="115370">rt</a> : <a href="#14299" title="T">T</a><span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = 
    <a href="#115365" title="=&gt; scales.xml.equals.StreamComparison">str</a>.<a href="#115185" title="(calculate: Boolean, ocontext: scales.xml.equals.ComparisonContext, lefti: scales.xml.equals.StreamComparable[_], righti: scales.xml.equals.StreamComparable[_])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#115367" title="Boolean">calculate</a>, <a href="#115368" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#115359" title="(v1: T)scales.xml.equals.StreamComparable[T]">lt</a>, <a href="#115359" title="(v1: T)scales.xml.equals.StreamComparable[T]">rt</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait StreamEquals extends java.lang.Object" id="13673">StreamEquals</a> <span title="java.lang.Object" class="delimiter">{</span>
  
  <span class="comment">/**
   * Conversions
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tv: T =&gt; scales.xml.equals.StreamComparable[T], implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit ec: scales.xml.equals.XmlComparison[scales.xml.Elem], implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[T]" id="93132">toDefaultStreamComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="93134">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="T =&gt; scales.xml.equals.StreamComparable[T]" id="96083">tv</a> : T =&gt; StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="96084">ic</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="96085">ec</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="96086">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="96087">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait ExactStreamEquals extends java.lang.Object with scales.xml.equals.StreamEquals with ScalaObject" id="13520">ExactStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13673" title="scales.xml.equals.StreamEquals">StreamEquals</a> <span class="delimiter">{</span>
  <span class="comment">/**
   * Conversions
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tv: T =&gt; scales.xml.equals.StreamComparable[T], implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit ec: scales.xml.equals.XmlComparison[scales.xml.Elem], implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[T]" id="115755">toDefaultStreamComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="115757">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="T =&gt; scales.xml.equals.StreamComparable[T]" id="115760">tv</a> : T =&gt; StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="115761">ic</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="115762">ec</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="115763">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="115764">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#115760" title="scales.xml.equals.StreamComparisonWrapper[T]" class="keyword">new</a> <a href="#13670" title="scales.xml.equals.StreamComparisonWrapper[T]">StreamComparisonWrapper</a><span class="delimiter">(</span><a href="#115201" title="scales.xml.equals.StreamComparison" class="keyword">new</a> <a href="#13668" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span> <a href="#115761" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>, <a href="#115762" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">ec</a>, <a href="#115763" title="scalaz.Equal[scales.xml.QName]">qe</a>, <a href="#115764" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scales.xml.equals.ExactStreamEquals" id="13521">ExactStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13520" title="scales.xml.equals.ExactStreamEquals">ExactStreamEquals</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13611" title="object scales.xml.equals.QNameEquals">QNameEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13266" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13296" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>._

  <span class="keyword">def</span> <a title="(implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]" id="115825">defaultStreamComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="115830">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]">XmlComparison</a><span class="delimiter">[</span>StreamComparable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#115201" title="scales.xml.equals.StreamComparison" class="keyword">new</a> <a href="#13668" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span> <a href="XmlComparisons.scala.html#13548" title="object scales.xml.equals.ItemEquals">ItemEquals</a>.<a href="XmlComparisons.scala.html#93125" title="implicit scales.xml.equals.DefaultItemEquals.defaultXmlItemComparison : (implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.XmlItem]">defaultXmlItemComparison</a>, <a href="ElemComparison.scala.html#13482" title="object scales.xml.equals.ElemEquals">ElemEquals</a>.<a href="ElemComparison.scala.html#93131" title="implicit scales.xml.equals.DefaultElemEquals.defaultElemComparison : (implicit ae: scales.xml.equals.XmlComparison[scales.xml.package.Attributes], implicit qe: scalaz.Equal[scales.xml.QName])scales.xml.equals.XmlComparison[scales.xml.Elem]">defaultElemComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13296" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>.<a href="XmlComparisons.scala.html#93129" title="implicit scales.xml.equals.DefaultAttributesEquals.defaultAttributesComparison : (implicit ac: scales.xml.equals.XmlComparison[scales.xml.Attribute])scales.xml.equals.XmlComparison[scales.xml.package.Attributes]">defaultAttributesComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13266" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>.<a href="XmlComparisons.scala.html#93127" title="implicit scales.xml.equals.DefaultAttributeEquals.defaultAttributeComparison : (implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.Attribute]">defaultAttributeComparison</a><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#12479" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#92560" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#115830" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12479" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#92560" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12479" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#92560" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#115830" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Streams compared after transforming via joinTextAndCData
 */</span> 
<span class="keyword">trait</span> <a title="trait DefaultStreamEquals extends java.lang.Object with scales.xml.equals.StreamEquals with ScalaObject" id="13385">DefaultStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13673" title="scales.xml.equals.StreamEquals">StreamEquals</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="LogicalComparisons.scala.html#13563" title="object scales.xml.equals.LogicalFilters">LogicalFilters</a>.joinTextAndCData

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tv: T =&gt; scales.xml.equals.StreamComparable[T], implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit ec: scales.xml.equals.XmlComparison[scales.xml.Elem], implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[T]" id="93137">toDefaultStreamComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="93139">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="T =&gt; scales.xml.equals.StreamComparable[T]" id="96094">tv</a> : T =&gt; StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="96095">ic</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="96096">ec</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="96097">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="96098">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#96094" title="scales.xml.equals.StreamComparisonWrapper[T]" class="keyword">new</a> <a href="#13670" title="scales.xml.equals.StreamComparisonWrapper[T]">StreamComparisonWrapper</a><span class="delimiter">(</span> <span title="scales.xml.equals.StreamComparison" class="keyword">new</span> <a href="#13668" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><a href="LogicalComparisons.scala.html#115115" title="(it: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">joinTextAndCData</a> _<span class="delimiter">)</span><span class="delimiter">(</span> <a href="#96095" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>, <a href="#96096" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">ec</a>, <a href="#96097" title="scalaz.Equal[scales.xml.QName]">qe</a>, <a href="#96098" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span> <span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scales.xml.equals.DefaultStreamEquals" id="13386">DefaultStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13385" title="scales.xml.equals.DefaultStreamEquals">DefaultStreamEquals</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="LogicalComparisons.scala.html#13563" title="object scales.xml.equals.LogicalFilters">LogicalFilters</a>.joinTextAndCData
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13611" title="object scales.xml.equals.QNameEquals">QNameEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13266" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13296" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>._

  <span class="keyword">def</span> <a title="(implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]" id="115894">defaultStreamComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="115896">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]">XmlComparison</a><span class="delimiter">[</span>StreamComparable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="scales.xml.equals.StreamComparison" class="keyword">new</span> <a href="#13668" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><a href="LogicalComparisons.scala.html#115115" title="(it: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">joinTextAndCData</a> _<span class="delimiter">)</span><span class="delimiter">(</span> <a href="XmlComparisons.scala.html#13548" title="object scales.xml.equals.ItemEquals">ItemEquals</a>.<a href="XmlComparisons.scala.html#93125" title="implicit scales.xml.equals.DefaultItemEquals.defaultXmlItemComparison : (implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.XmlItem]">defaultXmlItemComparison</a>, <a href="ElemComparison.scala.html#13482" title="object scales.xml.equals.ElemEquals">ElemEquals</a>.<a href="ElemComparison.scala.html#93131" title="implicit scales.xml.equals.DefaultElemEquals.defaultElemComparison : (implicit ae: scales.xml.equals.XmlComparison[scales.xml.package.Attributes], implicit qe: scalaz.Equal[scales.xml.QName])scales.xml.equals.XmlComparison[scales.xml.Elem]">defaultElemComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13296" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>.<a href="XmlComparisons.scala.html#93129" title="implicit scales.xml.equals.DefaultAttributesEquals.defaultAttributesComparison : (implicit ac: scales.xml.equals.XmlComparison[scales.xml.Attribute])scales.xml.equals.XmlComparison[scales.xml.package.Attributes]">defaultAttributesComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13266" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>.<a href="XmlComparisons.scala.html#93127" title="implicit scales.xml.equals.DefaultAttributeEquals.defaultAttributeComparison : (implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.Attribute]">defaultAttributeComparison</a><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#12479" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#92560" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#115896" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12479" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#92560" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12479" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#92560" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#115896" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Wrap the creation of doclike things
 */</span> 
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DocLikeWrapper[T] extends java.lang.Object with ScalaObject" id="13439">DocLikeWrapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14300">T</a><span class="delimiter">]</span><a href="#13439" title="ScalaObject" class="delimiter">(</a> <span class="keyword">val</span> <a title="T =&gt; scales.xml.DocLike" id="115916">tToDoc</a> : T =&gt; DocLike <span class="delimiter">)</span><span class="delimiter">{</span>
  
  <span class="comment">/**
   * Compare the bodies, this hiding of the comparison is a bit more verbose at the definition site, but helps implicit lookup immensely
   */</span> 
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, leftBody: T, rightBody: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="96140">compare</a><span class="delimiter">(</span> <a title="Boolean" id="115917">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="115918">context</a> : <a href="ComparisonContext.scala.html#13313" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="T" id="115919">leftBody</a> : <a href="#14300" title="T">T</a>, <a title="T" id="115920">rightBody</a> : <a href="#14300" title="T">T</a> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Base wrapper for most usecases, extra type is here to keep lookup working
 */</span> 
<span class="keyword">class</span> <a title="class DocLikeWrapperBase[T, B] extends scales.xml.equals.DocLikeWrapper[T] with ScalaObject" id="13442">DocLikeWrapperBase</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14301">T</a>, <a title="&gt;: Nothing &lt;: Any" id="14302">B</a><span class="delimiter">]</span><a href="#13442" title="ScalaObject" class="delimiter">(</a> <a title="T =&gt; scales.xml.DocLike" id="115938">tToDoc</a> : T =&gt; DocLike, <a title="T =&gt; B" id="115939">tToBody</a> : T =&gt; B, <a title="scales.xml.equals.XmlComparison[B]" id="115940">bodyComp</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[B]">XmlComparison</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#13439" title="scales.xml.equals.DocLikeWrapper[T]">DocLikeWrapper</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#115938" title="T =&gt; scales.xml.DocLike">tToDoc</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, leftBody: T, rightBody: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="115933">compare</a><span class="delimiter">(</span> <a title="Boolean" id="115942">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="115943">context</a> : <a href="ComparisonContext.scala.html#13313" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="T" id="115944">leftBody</a> : <a href="#14301" title="T">T</a>, <a title="T" id="115945">rightBody</a> : <a href="#14301" title="T">T</a> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#115940" title="scales.xml.equals.XmlComparison[B]">bodyComp</a>.<a href="XmlComparisons.scala.html#96088" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: B, right: B)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#115942" title="Boolean">calculate</a>, <a href="#115943" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#115939" title="(v1: T)B">tToBody</a><span class="delimiter">(</span><a href="#115944" title="T">leftBody</a><span class="delimiter">)</span>, <a href="#115939" title="(v1: T)B">tToBody</a><span class="delimiter">(</span><a href="#115945" title="T">rightBody</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Compares neither of the version, DTD nor encoding of a document, but prolog and end misc.
 * Requires a @T that can be converted to a DocLike and a body @B.  B must have an XmlComparison available and there must exist conversions from T to DocLike and T to B.
 */</span> 
<span class="keyword">class</span> <a title="class DocLikeComparison[T, B] extends java.lang.Object with scales.xml.equals.XmlComparison[T] with ScalaObject" id="13436">DocLikeComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14303">T</a>, <a title="&gt;: Nothing &lt;: Any" id="14304">B</a><span class="delimiter">]</span><a href="#13436" title="ScalaObject" class="delimiter">(</a><span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="115973">ic</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.DocLikeWrapper[T]" id="115974">docWrapper</a> : <a href="#13439" title="scales.xml.equals.DocLikeWrapper[T]">DocLikeWrapper</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="T =&gt; scales.xml.DocLike" id="115967">tToDoc</a> = <a href="#115974" title="scales.xml.equals.DocLikeWrapper[T]">docWrapper</a>.<a href="#115916" title="=&gt; T =&gt; scales.xml.DocLike">tToDoc</a>

  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: T, right: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="115969">compare</a><span class="delimiter">(</span> <a title="Boolean" id="115975">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="115976">context</a> : <a href="ComparisonContext.scala.html#13313" title="scales.xml.equals.ComparisonContext">ComparisonContext</a> , <a title="T" id="115977">left</a> : <a href="#14303" title="T">T</a>, <a title="T" id="115978">right</a> : <a href="#14303" title="T">T</a> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
<span class="comment">// should we split out XmlComparison[Misc]?, its only used by DocLike right now..</span>
    <span class="keyword">def</span> <a title="(lmiscs: scales.xml.package.Miscs, rmiscs: scales.xml.package.Miscs, prolog: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="115988">compareMiscs</a><span class="delimiter">(</span> <a title="scales.xml.package.Miscs" id="115989">lmiscs</a> : <span title="scales.xml.package.Miscs">Miscs</span>, <a title="scales.xml.package.Miscs" id="115990">rmiscs</a> : <span title="scales.xml.package.Miscs">Miscs</span> , <a title="Boolean" id="115991">prolog</a> : <span title="Boolean">Boolean</span><span class="delimiter">)</span> = 
      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#115989" title="scales.xml.package.Miscs">lmiscs</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <a href="#115990" title="scales.xml.package.Miscs">rmiscs</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
	<span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#115975" title="Boolean">calculate</a><span class="delimiter">)</span> 
	  <span title="(x: (scales.xml.equals.DifferentNumberOfMiscs, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.DifferentNumberOfMiscs, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.DifferentNumberOfMiscs, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.DifferentNumberOfMiscs, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#116005" title="(left: scales.xml.package.Miscs, right: scales.xml.package.Miscs, isProlog: Boolean)scales.xml.equals.DifferentNumberOfMiscs">DifferentNumberOfMiscs</a><span class="delimiter">(</span><a href="#115989" title="scales.xml.package.Miscs">lmiscs</a>, <a href="#115990" title="scales.xml.package.Miscs">rmiscs</a>, <a href="#115991" title="Boolean">prolog</a><span class="delimiter">)</span>, <a href="#115976" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <a href="XmlDifference.scala.html#114698" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
      <span class="keyword">else</span> 
	<a href="../../utils/package.scala.html#11072" title="object scales.utils.package">scales</a>.utils.<a href="../../utils/IterableUtils.scala.html#15444" title="(in: Iterable[(scales.xml.package.Misc, scales.xml.package.Misc)])(f: ((scales.xml.package.Misc, scales.xml.package.Misc)) =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">collectFirst</a><span class="delimiter">(</span><a href="#115989" title="scales.xml.package.Miscs">lmiscs</a>.<span title="(that: scala.collection.GenIterable[scales.xml.package.Misc])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[scales.xml.package.Misc],(scales.xml.package.Misc, scales.xml.package.Misc),Seq[(scales.xml.package.Misc, scales.xml.package.Misc)]])Seq[(scales.xml.package.Misc, scales.xml.package.Misc)]">zip</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,(scales.xml.package.Misc, scales.xml.package.Misc),Seq[(scales.xml.package.Misc, scales.xml.package.Misc)]]" class="delimiter">(</span><a href="#115990" title="scales.xml.package.Miscs">rmiscs</a><span class="delimiter">)</span><span class="delimiter">)</span><a href="#116117" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="delimiter">{</a>
	  <span class="keyword">case</span> <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="delimiter">(</span><a title="scales.xml.package.Misc" id="116120">a</a>, <a title="scales.xml.package.Misc" id="116121">b</a><span class="delimiter">)</span> =&gt; 
	    <span class="keyword">val</span> <a title="scales.xml.XmlItem" id="116122">l</a> : <a href="../XmlTypes.scala.html#12949" title="scales.xml.XmlItem">XmlItem</a> = <a href="#116120" title="scales.xml.package.Misc">a</a>.<span title="(fa: scales.xml.Comment =&gt; scales.xml.XmlItem, fb: scales.xml.PI =&gt; scales.xml.XmlItem)scales.xml.XmlItem">fold</span><span class="delimiter">(</span> <a title="scales.xml.Comment" id="116131">x</a> =&gt; <a href="#116131" title="scales.xml.Comment">x</a>, <a title="scales.xml.PI" id="116133">y</a> =&gt; <a href="#116133" title="scales.xml.PI">y</a><span class="delimiter">)</span>
	    <span class="keyword">val</span> <a title="scales.xml.XmlItem" id="116123">r</a> : <a href="../XmlTypes.scala.html#12949" title="scales.xml.XmlItem">XmlItem</a> = <a href="#116121" title="scales.xml.package.Misc">b</a>.<span title="(fa: scales.xml.Comment =&gt; scales.xml.XmlItem, fb: scales.xml.PI =&gt; scales.xml.XmlItem)scales.xml.XmlItem">fold</span><span class="delimiter">(</span> <a title="scales.xml.Comment" id="116166">x</a> =&gt; <a href="#116166" title="scales.xml.Comment">x</a>, <a title="scales.xml.PI" id="116168">y</a> =&gt; <a href="#116168" title="scales.xml.PI">y</a><span class="delimiter">)</span>
	    <span class="keyword">val</span> <a title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="116124">res</a> = <a href="#115973" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>.<a href="XmlComparisons.scala.html#96088" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.XmlItem, right: scales.xml.XmlItem)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#115975" title="Boolean">calculate</a>, <a href="#115976" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#116122" title="scales.xml.XmlItem">l</a>, <a href="#116123" title="scales.xml.XmlItem">r</a><span class="delimiter">)</span>
	    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#115975" title="Boolean">calculate</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#116124" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
	      <span class="comment">// give back either the diff or wrap the difference</span>
	      <a href="#116124" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>.<span title="(f: ((scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)) =&gt; (scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext))Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">map</span><a href="#116203" title="(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)" class="delimiter">{</a> 
		<span class="keyword">case</span> <span title="(scales.xml.equals.MiscDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span>ItemDifference<span class="delimiter">(</span><a title="scales.xml.XmlItem" id="116244">x</a>, <a title="scales.xml.XmlItem" id="116245">y</a><span class="delimiter">)</span>, <a title="scales.xml.equals.ComparisonContext" id="116247">cont</a><span class="delimiter">)</span> =&gt; 
		  <span title="(_1: scales.xml.equals.MiscDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.MiscDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#116254" title="(left: scales.xml.package.Misc, right: scales.xml.package.Misc, isProlog: Boolean)scales.xml.equals.MiscDifference">MiscDifference</a><span class="delimiter">(</span><a href="#116120" title="scales.xml.package.Misc">a</a>, <a href="#116121" title="scales.xml.package.Misc">b</a>, <a href="#115991" title="Boolean">prolog</a><span class="delimiter">)</span>, <a href="#116247" title="scales.xml.equals.ComparisonContext">cont</a><span class="delimiter">)</span>
		<span class="keyword">case</span> <span title="(scales.xml.equals.MiscDifferentTypes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span>DifferentTypes<span class="delimiter">(</span><a title="scales.xml.package.PullType" id="116307">x</a>, <a title="scales.xml.package.PullType" id="116308">y</a><span class="delimiter">)</span>, <a title="scales.xml.equals.ComparisonContext" id="116310">cont</a><span class="delimiter">)</span> =&gt;
		  <span title="(_1: scales.xml.equals.MiscDifferentTypes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.MiscDifferentTypes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#116317" title="(left: scales.xml.package.Misc, right: scales.xml.package.Misc, isProlog: Boolean)scales.xml.equals.MiscDifferentTypes">MiscDifferentTypes</a><span class="delimiter">(</span><a href="#116120" title="scales.xml.package.Misc">a</a>, <a href="#116121" title="scales.xml.package.Misc">b</a>, <a href="#115991" title="Boolean">prolog</a><span class="delimiter">)</span>, <a href="#116310" title="scales.xml.equals.ComparisonContext">cont</a><span class="delimiter">)</span>
		<span class="keyword">case</span> <a title="(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)" id="116342">t</a> =&gt; <a href="#116342" title="(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)">t</a>
	      <span class="delimiter">}</span> 
	    <span class="keyword">else</span>
	      <a href="#116124" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>
	<span class="delimiter">}</span>
      
    <a href="#115988" title="(lmiscs: scales.xml.package.Miscs, rmiscs: scales.xml.package.Miscs, prolog: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compareMiscs</a><span class="delimiter">(</span><a href="#115967" title="(v1: T)scales.xml.DocLike">left</a>.<a href="../XmlTypes.scala.html#95998" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#97356" title="=&gt; scales.xml.package.Miscs">misc</a>, <a href="#115967" title="(v1: T)scales.xml.DocLike">right</a>.<a href="../XmlTypes.scala.html#95998" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#97356" title="=&gt; scales.xml.package.Miscs">misc</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>.
      <span title="(alternative: =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">orElse</span><span class="delimiter">(</span><a href="#115974" title="scales.xml.equals.DocLikeWrapper[T]">docWrapper</a>.<a href="#96140" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, leftBody: T, rightBody: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#115975" title="Boolean">calculate</a>, <a href="#115976" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#115977" title="T">left</a>, <a href="#115978" title="T">right</a><span class="delimiter">)</span><span class="delimiter">)</span>.
      <span title="(alternative: =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">orElse</span><span class="delimiter">(</span><a href="#115988" title="(lmiscs: scales.xml.package.Miscs, rmiscs: scales.xml.package.Miscs, prolog: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compareMiscs</a><span class="delimiter">(</span><a href="#115967" title="(v1: T)scales.xml.DocLike">left</a>.<a href="../XmlTypes.scala.html#95999" title="=&gt; scales.xml.EndMisc">end</a>.<a href="../XmlTypes.scala.html#97364" title="=&gt; scales.xml.package.Miscs">misc</a>, <a href="#115967" title="(v1: T)scales.xml.DocLike">right</a>.<a href="../XmlTypes.scala.html#95999" title="=&gt; scales.xml.EndMisc">end</a>.<a href="../XmlTypes.scala.html#97364" title="=&gt; scales.xml.package.Miscs">misc</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DefaultDocLikeEquals extends java.lang.Object with ScalaObject" id="13343">DefaultDocLikeEquals</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/**
   * Provides the comparison for prolog, body and end miscs
   */</span> 
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit docWrapper: scales.xml.equals.DocLikeWrapper[T])scales.xml.equals.XmlComparison[T]" id="93146">defaultDocLikeComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="93148">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="96171">ic</a> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.DocLikeWrapper[T]" id="96172">docWrapper</a> : <a href="#13439" title="scales.xml.equals.DocLikeWrapper[T]">DocLikeWrapper</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13688" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span title="scales.xml.equals.DocLikeComparison[T,Nothing]" class="keyword">new</span> <a href="#13436" title="scales.xml.equals.DocLikeComparison[T,Nothing]">DocLikeComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#96171" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>, <a href="#96172" title="scales.xml.equals.DocLikeWrapper[T]">docWrapper</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>