<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\equals\StreamAndDocComparisons.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml.equals

<span class="keyword">import</span> scales.xml.<span class="delimiter">{</span>QName, Elem, Attribs, Attributes, Attribute, XmlItem, Text, PI, CData, Comment, PullType, EqualsHelpers, EndElem, Misc, Miscs, DocLike<span class="delimiter">}</span>

<span class="keyword">import</span> <a href="XmlEquals.scala.html#13634" title="object scales.xml.equals.XmlEquals">XmlEquals</a>._

<span class="keyword">import</span> scalaz._
<span class="keyword">import</span> <span title="object scalaz.Scalaz">Scalaz</span>._

<span class="keyword">import</span> <a href="XmlDifference.scala.html#13538" title="object scales.xml.equals.SomeDifference">SomeDifference</a>.noCalculation

<span class="comment">/**
 * This interface allows for non xml matching, for example a forward Iterator from a Text child.  This would be impossible to model as an xml document, but could be useful for comparison.
 *
 * This trait boxes a given conversion, stopping accidental serialize calls on the resulting streams.
 */</span> 
<span class="keyword">class</span> <a title="class StreamComparable[T] extends java.lang.Object with ScalaObject" id="13540">StreamComparable</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14209">T</a> &lt;% Iterator<span class="delimiter">[</span>PullType<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span> <span class="keyword">val</span> <a title="T" id="113041">t</a> : <a href="#14209" title="T">T</a> <span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[scales.xml.package.PullType]" id="94201">underlyingIterator</a> : <span title="Iterator[scales.xml.package.PullType]">Iterator</span><span class="delimiter">[</span>PullType<span class="delimiter">]</span> = <a href="#94199" title="(v1: T)Iterator[scales.xml.package.PullType]">t</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Compares based on streams.  Requires comparisons for XmlItem, Elem and a QName Equal instance for testing EndElems.
 */</span> 
<span class="keyword">class</span> <a title="class StreamComparison extends java.lang.Object with scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]] with ScalaObject" id="13589">StreamComparison</a><a href="#13589" title="ScalaObject" class="delimiter">(</a> <a title="Iterator[scales.xml.package.PullType] =&gt; Iterator[scales.xml.package.PullType]" id="113101">filter</a> : Iterator<span class="delimiter">[</span>PullType<span class="delimiter">]</span> =&gt; Iterator<span class="delimiter">[</span>PullType<span class="delimiter">]</span> = <a href="#113107" title="(x: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">identity</a><span class="delimiter">)</span><span class="delimiter">(</span> <span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="113096">ic</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="113097">ec</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="113098">endElemQNameEqual</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="113099">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]">XmlComparison</a><span class="delimiter">[</span>StreamComparable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, ocontext: scales.xml.equals.ComparisonContext, lefti: scales.xml.equals.StreamComparable[_], righti: scales.xml.equals.StreamComparable[_])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="113085">compare</a><span class="delimiter">(</span> <a title="Boolean" id="113109">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="113110">ocontext</a> : <a href="ComparisonContext.scala.html#13231" title="scales.xml.equals.ComparisonContext">ComparisonContext</a> , <a title="scales.xml.equals.StreamComparable[_]" id="113111">lefti</a> : <a href="#13540" title="scales.xml.equals.StreamComparable[_]">StreamComparable</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="scales.xml.equals.StreamComparable[_]" id="113112">righti</a> : <a href="#13540" title="scales.xml.equals.StreamComparable[_]">StreamComparable</a><span class="delimiter">[</span>_<span class="delimiter">]</span> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">var</span> <a title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="113128">res</a> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="object None">None</span>
    <span class="keyword">val</span> <a title="zip extends java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]" id="113129">joined</a> = <a href="#113101" title="(v1: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">filter</a><span class="delimiter">(</span><a href="#113111" title="scales.xml.equals.StreamComparable[_]">lefti</a>.<a href="#94201" title="=&gt; Iterator[scales.xml.package.PullType]">underlyingIterator</a><span class="delimiter">)</span>.<span title="(that: Iterator[scales.xml.package.PullType])java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]">zip</span><span class="delimiter">(</span><a href="#113101" title="(v1: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">filter</a><span class="delimiter">(</span><a href="#113112" title="scales.xml.equals.StreamComparable[_]">righti</a>.<a href="#94201" title="=&gt; Iterator[scales.xml.package.PullType]">underlyingIterator</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="scales.xml.equals.ComparisonContext" id="113130">context</a> = <a href="#113110" title="scales.xml.equals.ComparisonContext">ocontext</a>
    <span class="keyword">var</span> <a title="Int" id="113131">streamPosition</a> = <span title="Int(0)" class="int">0</span>

    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span> <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#113129" title="zip extends java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]">joined</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#113131" title="Int">streamPosition</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>

      <a href="#113129" title="zip extends java.lang.Object with Iterator[(scales.xml.package.PullType, scales.xml.package.PullType)]">joined</a>.<span title="()(scales.xml.package.PullType, scales.xml.package.PullType)">next</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="scales.xml.Elem" id="113384">x</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="scales.xml.Elem" id="113386">y</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
	  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#113109" title="Boolean">calculate</a> <span title="(x: Boolean)Boolean">||</span> <a href="#113099" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// also needed for qname handling</span>
	    <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a> = <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a>.<a href="ComparisonContext.scala.html#112212" title="(leftElem: scales.xml.Elem, rightElem: scales.xml.Elem)scales.xml.equals.ComparisonContext">startElems</a><span class="delimiter">(</span><a href="#113384" title="scales.xml.Elem">x</a>, <a href="#113386" title="scales.xml.Elem">y</a><span class="delimiter">)</span>
	  <span class="delimiter">}</span>
	  <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = <a href="#113097" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">ec</a>.<a href="XmlComparisons.scala.html#94135" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.Elem, right: scales.xml.Elem)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#113109" title="Boolean">calculate</a>, <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#113384" title="scales.xml.Elem">x</a>, <a href="#113386" title="scales.xml.Elem">y</a><span class="delimiter">)</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="scales.xml.XmlItem" id="113396">x</a> : <a href="../XmlTypes.scala.html#12876" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="scales.xml.XmlItem" id="113398">y</a> : <a href="../XmlTypes.scala.html#12876" title="scales.xml.XmlItem">XmlItem</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
	  <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = <a href="#113096" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>.<a href="XmlComparisons.scala.html#94135" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.XmlItem, right: scales.xml.XmlItem)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#113109" title="Boolean">calculate</a>, <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#113396" title="scales.xml.XmlItem">x</a>, <a href="#113398" title="scales.xml.XmlItem">y</a><span class="delimiter">)</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="scales.xml.EndElem" id="113408">x</a> : <a href="../XmlPull.scala.html#12363" title="scales.xml.EndElem">EndElem</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="scales.xml.EndElem" id="113410">y</a>  : <a href="../XmlPull.scala.html#12363" title="scales.xml.EndElem">EndElem</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
	  <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = 
	    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#113098" title="scalaz.Equal[scales.xml.QName]">endElemQNameEqual</a>.<span title="(a1: scales.xml.QName, a2: scales.xml.QName)Boolean">equal</span><span class="delimiter">(</span><a href="#113408" title="scales.xml.EndElem">x</a>.<a href="../XmlPull.scala.html#90764" title="=&gt; scales.xml.QName">name</a>, <a href="#113410" title="scales.xml.EndElem">y</a>.<a href="../XmlPull.scala.html#90764" title="=&gt; scales.xml.QName">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#113109" title="Boolean">calculate</a><span class="delimiter">)</span>
		<span title="(x: (scales.xml.equals.EndElemNameDifference, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.EndElemNameDifference, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.EndElemNameDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.EndElemNameDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#113421" title="(left: scales.xml.EndElem, right: scales.xml.EndElem)scales.xml.equals.EndElemNameDifference">EndElemNameDifference</a><span class="delimiter">(</span><a href="#113408" title="scales.xml.EndElem">x</a>, <a href="#113410" title="scales.xml.EndElem">y</a><span class="delimiter">)</span>, <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
	      <span class="keyword">else</span> 
		<a href="XmlDifference.scala.html#112606" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
	    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="object None">None</span>
	  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#113109" title="Boolean">calculate</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// also needed for qname handling</span>
	    <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a> = <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a>.<a href="ComparisonContext.scala.html#112214" title="=&gt; scales.xml.equals.ComparisonContext">endElem</a>
	  <span class="delimiter">}</span>
	<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="scales.xml.package.PullType" id="113450">left</a>, <a title="scales.xml.package.PullType" id="113451">right</a><span class="delimiter">)</span> =&gt; 
	  <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = 
	    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#113109" title="Boolean">calculate</a> <span title="(x: Boolean)Boolean">||</span> <a href="#113099" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
	      <span title="(x: (scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.DifferentTypes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.DifferentTypes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#113460" title="(left: scales.xml.package.PullType, right: scales.xml.package.PullType)scales.xml.equals.DifferentTypes">DifferentTypes</a><span class="delimiter">(</span><a href="#113450" title="scales.xml.package.PullType">left</a>, <a href="#113451" title="scales.xml.package.PullType">right</a><span class="delimiter">)</span>, <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span> 
	    <span class="keyword">else</span>
	      <a href="XmlDifference.scala.html#112606" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#113109" title="Boolean">calculate</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// unpack, repack</span>
      <span class="keyword">val</span> Some<a href="#113488" title="(scales.xml.equals.XmlDifference[_0], scales.xml.equals.ComparisonContext)" class="delimiter">(</a><span class="delimiter">(</span><a href="#113487" title="scales.xml.equals.XmlDifference[_]" id="113488">diff</a>, <a href="#113487" title="scales.xml.equals.ComparisonContext" id="113489">rcontext</a><span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>
      <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a> = <a href="#113489" title="scales.xml.equals.ComparisonContext">rcontext</a>.<a href="ComparisonContext.scala.html#112205" title="(newStreamPosition: Int)scales.xml.equals.ComparisonContext">withPosition</a><span class="delimiter">(</span><a href="#113131" title="Int">streamPosition</a><span class="delimiter">)</span>
      <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a> = <span title="(x: (scales.xml.equals.XmlDifference[_0], scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.XmlDifference[_0], scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.XmlDifference[_0], _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.XmlDifference[_0], scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="#113488" title="scales.xml.equals.XmlDifference[_]">diff</a>, <a href="#113130" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#113128" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Wraps a given T with a conversion from T to an xml stream
 */</span> 
<span class="keyword">class</span> <a title="class StreamComparisonWrapper[T] extends java.lang.Object with scales.xml.equals.XmlComparison[T] with ScalaObject" id="13591">StreamComparisonWrapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14210">T</a> &lt;% StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span> <span class="keyword">val</span> <a title="scales.xml.equals.StreamComparison" id="113542">str</a> : <a href="#13589" title="scales.xml.equals.StreamComparison">StreamComparison</a> <span class="delimiter">)</span> <span class="keyword">extends</span> <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, lt: T, rt: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="113538">compare</a><span class="delimiter">(</span> <a title="Boolean" id="113544">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="113545">context</a> : <a href="ComparisonContext.scala.html#13231" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="T" id="113546">lt</a> : <a href="#14210" title="T">T</a>, <a title="T" id="113547">rt</a> : <a href="#14210" title="T">T</a><span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = 
    <a href="#113542" title="=&gt; scales.xml.equals.StreamComparison">str</a>.<a href="#113085" title="(calculate: Boolean, ocontext: scales.xml.equals.ComparisonContext, lefti: scales.xml.equals.StreamComparable[_], righti: scales.xml.equals.StreamComparable[_])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#113544" title="Boolean">calculate</a>, <a href="#113545" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#113536" title="(v1: T)scales.xml.equals.StreamComparable[T]">lt</a>, <a href="#113536" title="(v1: T)scales.xml.equals.StreamComparable[T]">rt</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait StreamEquals extends java.lang.Object" id="13594">StreamEquals</a> <span title="java.lang.Object" class="delimiter">{</span>
  
  <span class="comment">/**
   * Conversions
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tv: T =&gt; scales.xml.equals.StreamComparable[T], implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit ec: scales.xml.equals.XmlComparison[scales.xml.Elem], implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[T]" id="91469">toDefaultStreamComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="91471">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="T =&gt; scales.xml.equals.StreamComparable[T]" id="94130">tv</a> : T =&gt; StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="94131">ic</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="94132">ec</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="94133">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="94134">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait ExactStreamEquals extends java.lang.Object with scales.xml.equals.StreamEquals with ScalaObject" id="13441">ExactStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13594" title="scales.xml.equals.StreamEquals">StreamEquals</a> <span class="delimiter">{</span>
  <span class="comment">/**
   * Conversions
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tv: T =&gt; scales.xml.equals.StreamComparable[T], implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit ec: scales.xml.equals.XmlComparison[scales.xml.Elem], implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[T]" id="113932">toDefaultStreamComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="113934">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="T =&gt; scales.xml.equals.StreamComparable[T]" id="113937">tv</a> : T =&gt; StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="113938">ic</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="113939">ec</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="113940">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="113941">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#113937" title="scales.xml.equals.StreamComparisonWrapper[T]" class="keyword">new</a> <a href="#13591" title="scales.xml.equals.StreamComparisonWrapper[T]">StreamComparisonWrapper</a><span class="delimiter">(</span><a href="#113101" title="scales.xml.equals.StreamComparison" class="keyword">new</a> <a href="#13589" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span> <a href="#113938" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>, <a href="#113939" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">ec</a>, <a href="#113940" title="scalaz.Equal[scales.xml.QName]">qe</a>, <a href="#113941" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scales.xml.equals.ExactStreamEquals" id="13442">ExactStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13441" title="scales.xml.equals.ExactStreamEquals">ExactStreamEquals</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13532" title="object scales.xml.equals.QNameEquals">QNameEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13181" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13211" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>._

  <span class="keyword">def</span> <a title="(implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]" id="114002">defaultStreamComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="114007">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]">XmlComparison</a><span class="delimiter">[</span>StreamComparable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#113101" title="scales.xml.equals.StreamComparison" class="keyword">new</a> <a href="#13589" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span> <a href="XmlComparisons.scala.html#13469" title="object scales.xml.equals.ItemEquals">ItemEquals</a>.<a href="XmlComparisons.scala.html#91462" title="implicit scales.xml.equals.DefaultItemEquals.defaultXmlItemComparison : (implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.XmlItem]">defaultXmlItemComparison</a>, <a href="ElemComparison.scala.html#13403" title="object scales.xml.equals.ElemEquals">ElemEquals</a>.<a href="ElemComparison.scala.html#91468" title="implicit scales.xml.equals.DefaultElemEquals.defaultElemComparison : (implicit ae: scales.xml.equals.XmlComparison[scales.xml.package.Attributes], implicit qe: scalaz.Equal[scales.xml.QName])scales.xml.equals.XmlComparison[scales.xml.Elem]">defaultElemComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13211" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>.<a href="XmlComparisons.scala.html#91466" title="implicit scales.xml.equals.DefaultAttributesEquals.defaultAttributesComparison : (implicit ac: scales.xml.equals.XmlComparison[scales.xml.Attribute])scales.xml.equals.XmlComparison[scales.xml.package.Attributes]">defaultAttributesComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13181" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>.<a href="XmlComparisons.scala.html#91464" title="implicit scales.xml.equals.DefaultAttributeEquals.defaultAttributeComparison : (implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.Attribute]">defaultAttributeComparison</a><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#12382" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#90897" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#114007" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12382" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#90897" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12382" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#90897" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#114007" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Streams compared after transforming via joinTextAndCData
 */</span> 
<span class="keyword">trait</span> <a title="trait DefaultStreamEquals extends java.lang.Object with scales.xml.equals.StreamEquals with ScalaObject" id="13306">DefaultStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13594" title="scales.xml.equals.StreamEquals">StreamEquals</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="LogicalComparisons.scala.html#13484" title="object scales.xml.equals.LogicalFilters">LogicalFilters</a>.joinTextAndCData

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tv: T =&gt; scales.xml.equals.StreamComparable[T], implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit ec: scales.xml.equals.XmlComparison[scales.xml.Elem], implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[T]" id="91474">toDefaultStreamComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="91476">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="T =&gt; scales.xml.equals.StreamComparable[T]" id="94141">tv</a> : T =&gt; StreamComparable<span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="94142">ic</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.XmlComparison[scales.xml.Elem]" id="94143">ec</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">XmlComparison</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span>, <a title="scalaz.Equal[scales.xml.QName]" id="94144">qe</a> : <span title="scalaz.Equal[scales.xml.QName]">Equal</span><span class="delimiter">[</span>QName<span class="delimiter">]</span>, <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="94145">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#94141" title="scales.xml.equals.StreamComparisonWrapper[T]" class="keyword">new</a> <a href="#13591" title="scales.xml.equals.StreamComparisonWrapper[T]">StreamComparisonWrapper</a><span class="delimiter">(</span> <span title="scales.xml.equals.StreamComparison" class="keyword">new</span> <a href="#13589" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><a href="LogicalComparisons.scala.html#112255" title="(it: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">joinTextAndCData</a> _<span class="delimiter">)</span><span class="delimiter">(</span> <a href="#94142" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>, <a href="#94143" title="scales.xml.equals.XmlComparison[scales.xml.Elem]">ec</a>, <a href="#94144" title="scalaz.Equal[scales.xml.QName]">qe</a>, <a href="#94145" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span> <span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scales.xml.equals.DefaultStreamEquals" id="13307">DefaultStreamEquals</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13306" title="scales.xml.equals.DefaultStreamEquals">DefaultStreamEquals</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="LogicalComparisons.scala.html#13484" title="object scales.xml.equals.LogicalFilters">LogicalFilters</a>.joinTextAndCData
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13532" title="object scales.xml.equals.QNameEquals">QNameEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13181" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>._
  <span class="keyword">import</span> <a href="XmlComparisons.scala.html#13211" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>._

  <span class="keyword">def</span> <a title="(implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]" id="114071">defaultStreamComparison</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]" id="114073">qnameTokenComparison</a> : <span title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>ComparisonContext, String, String<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.equals.StreamComparable[_]]">XmlComparison</a><span class="delimiter">[</span>StreamComparable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="scales.xml.equals.StreamComparison" class="keyword">new</span> <a href="#13589" title="scales.xml.equals.StreamComparison">StreamComparison</a><span class="delimiter">(</span><a href="LogicalComparisons.scala.html#112255" title="(it: Iterator[scales.xml.package.PullType])Iterator[scales.xml.package.PullType]">joinTextAndCData</a> _<span class="delimiter">)</span><span class="delimiter">(</span> <a href="XmlComparisons.scala.html#13469" title="object scales.xml.equals.ItemEquals">ItemEquals</a>.<a href="XmlComparisons.scala.html#91462" title="implicit scales.xml.equals.DefaultItemEquals.defaultXmlItemComparison : (implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.XmlItem]">defaultXmlItemComparison</a>, <a href="ElemComparison.scala.html#13403" title="object scales.xml.equals.ElemEquals">ElemEquals</a>.<a href="ElemComparison.scala.html#91468" title="implicit scales.xml.equals.DefaultElemEquals.defaultElemComparison : (implicit ae: scales.xml.equals.XmlComparison[scales.xml.package.Attributes], implicit qe: scalaz.Equal[scales.xml.QName])scales.xml.equals.XmlComparison[scales.xml.Elem]">defaultElemComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13211" title="object scales.xml.equals.AttributesEquals">AttributesEquals</a>.<a href="XmlComparisons.scala.html#91466" title="implicit scales.xml.equals.DefaultAttributesEquals.defaultAttributesComparison : (implicit ac: scales.xml.equals.XmlComparison[scales.xml.Attribute])scales.xml.equals.XmlComparison[scales.xml.package.Attributes]">defaultAttributesComparison</a><span class="delimiter">(</span><a href="XmlComparisons.scala.html#13181" title="object scales.xml.equals.AttributeEquals">AttributeEquals</a>.<a href="XmlComparisons.scala.html#91464" title="implicit scales.xml.equals.DefaultAttributeEquals.defaultAttributeComparison : (implicit qe: scalaz.Equal[scales.xml.QName], implicit qnameTokenComparison: Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean])scales.xml.equals.XmlComparison[scales.xml.Attribute]">defaultAttributeComparison</a><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#12382" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#90897" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#114073" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12382" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#90897" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a><span class="delimiter">)</span>, <a href="../XmlTypesDefaults.scala.html#12382" title="object scales.xml.EqualsHelpers">EqualsHelpers</a>.<a href="XmlComparisons.scala.html#90897" title="=&gt; scalaz.Equal[scales.xml.QName]">qnameEqual</a>, <a href="#114073" title="Option[(scales.xml.equals.ComparisonContext, String, String) =&gt; Boolean]">qnameTokenComparison</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Wrap the creation of doclike things
 */</span> 
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DocLikeWrapper[T] extends java.lang.Object with ScalaObject" id="13360">DocLikeWrapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14211">T</a><span class="delimiter">]</span><a href="#13360" title="ScalaObject" class="delimiter">(</a> <span class="keyword">val</span> <a title="T =&gt; scales.xml.DocLike" id="114093">tToDoc</a> : T =&gt; DocLike <span class="delimiter">)</span><span class="delimiter">{</span>
  
  <span class="comment">/**
   * Compare the bodies, this hiding of the comparison is a bit more verbose at the definition site, but helps implicit lookup immensely
   */</span> 
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, leftBody: T, rightBody: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="94184">compare</a><span class="delimiter">(</span> <a title="Boolean" id="114094">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="114095">context</a> : <a href="ComparisonContext.scala.html#13231" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="T" id="114096">leftBody</a> : <a href="#14211" title="T">T</a>, <a title="T" id="114097">rightBody</a> : <a href="#14211" title="T">T</a> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Base wrapper for most usecases, extra type is here to keep lookup working
 */</span> 
<span class="keyword">class</span> <a title="class DocLikeWrapperBase[T, B] extends scales.xml.equals.DocLikeWrapper[T] with ScalaObject" id="13363">DocLikeWrapperBase</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14212">T</a>, <a title="&gt;: Nothing &lt;: Any" id="14213">B</a><span class="delimiter">]</span><a href="#13363" title="ScalaObject" class="delimiter">(</a> <a title="T =&gt; scales.xml.DocLike" id="114115">tToDoc</a> : T =&gt; DocLike, <a title="T =&gt; B" id="114116">tToBody</a> : T =&gt; B, <a title="scales.xml.equals.XmlComparison[B]" id="114117">bodyComp</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[B]">XmlComparison</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#13360" title="scales.xml.equals.DocLikeWrapper[T]">DocLikeWrapper</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#114115" title="T =&gt; scales.xml.DocLike">tToDoc</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, leftBody: T, rightBody: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="114110">compare</a><span class="delimiter">(</span> <a title="Boolean" id="114119">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="114120">context</a> : <a href="ComparisonContext.scala.html#13231" title="scales.xml.equals.ComparisonContext">ComparisonContext</a>, <a title="T" id="114121">leftBody</a> : <a href="#14212" title="T">T</a>, <a title="T" id="114122">rightBody</a> : <a href="#14212" title="T">T</a> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#114117" title="scales.xml.equals.XmlComparison[B]">bodyComp</a>.<a href="XmlComparisons.scala.html#94135" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: B, right: B)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#114119" title="Boolean">calculate</a>, <a href="#114120" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#114116" title="(v1: T)B">tToBody</a><span class="delimiter">(</span><a href="#114121" title="T">leftBody</a><span class="delimiter">)</span>, <a href="#114116" title="(v1: T)B">tToBody</a><span class="delimiter">(</span><a href="#114122" title="T">rightBody</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Compares neither of the version, DTD nor encoding of a document, but prolog and end misc.
 * Requires a @T that can be converted to a DocLike and a body @B.  B must have an XmlComparison available and there must exist conversions from T to DocLike and T to B.
 */</span> 
<span class="keyword">class</span> <a title="class DocLikeComparison[T, B] extends java.lang.Object with scales.xml.equals.XmlComparison[T] with ScalaObject" id="13357">DocLikeComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14214">T</a>, <a title="&gt;: Nothing &lt;: Any" id="14215">B</a><span class="delimiter">]</span><a href="#13357" title="ScalaObject" class="delimiter">(</a><span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="114150">ic</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.DocLikeWrapper[T]" id="114151">docWrapper</a> : <a href="#13360" title="scales.xml.equals.DocLikeWrapper[T]">DocLikeWrapper</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="T =&gt; scales.xml.DocLike" id="114144">tToDoc</a> = <a href="#114151" title="scales.xml.equals.DocLikeWrapper[T]">docWrapper</a>.<a href="#114093" title="=&gt; T =&gt; scales.xml.DocLike">tToDoc</a>

  <span class="keyword">def</span> <a title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: T, right: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="114146">compare</a><span class="delimiter">(</span> <a title="Boolean" id="114152">calculate</a> : <span title="Boolean">Boolean</span>, <a title="scales.xml.equals.ComparisonContext" id="114153">context</a> : <a href="ComparisonContext.scala.html#13231" title="scales.xml.equals.ComparisonContext">ComparisonContext</a> , <a title="T" id="114154">left</a> : <a href="#14214" title="T">T</a>, <a title="T" id="114155">right</a> : <a href="#14214" title="T">T</a> <span class="delimiter">)</span> : <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>XmlDifference<span class="delimiter">[</span>_<span class="delimiter">]</span>, ComparisonContext<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
<span class="comment">// should we split out XmlComparison[Misc]?, its only used by DocLike right now..</span>
    <span class="keyword">def</span> <a title="(lmiscs: scales.xml.package.Miscs, rmiscs: scales.xml.package.Miscs, prolog: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="114165">compareMiscs</a><span class="delimiter">(</span> <a title="scales.xml.package.Miscs" id="114166">lmiscs</a> : <span title="scales.xml.package.Miscs">Miscs</span>, <a title="scales.xml.package.Miscs" id="114167">rmiscs</a> : <span title="scales.xml.package.Miscs">Miscs</span> , <a title="Boolean" id="114168">prolog</a> : <span title="Boolean">Boolean</span><span class="delimiter">)</span> = 
      <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#114166" title="scales.xml.package.Miscs">lmiscs</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <a href="#114167" title="scales.xml.package.Miscs">rmiscs</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
	<span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#114152" title="Boolean">calculate</a><span class="delimiter">)</span> 
	  <span title="(x: (scales.xml.equals.DifferentNumberOfMiscs, scales.xml.equals.ComparisonContext))Some[(scales.xml.equals.DifferentNumberOfMiscs, scales.xml.equals.ComparisonContext)]">Some</span><span class="delimiter">(</span><span title="(_1: scales.xml.equals.DifferentNumberOfMiscs, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.DifferentNumberOfMiscs, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#114182" title="(left: scales.xml.package.Miscs, right: scales.xml.package.Miscs, isProlog: Boolean)scales.xml.equals.DifferentNumberOfMiscs">DifferentNumberOfMiscs</a><span class="delimiter">(</span><a href="#114166" title="scales.xml.package.Miscs">lmiscs</a>, <a href="#114167" title="scales.xml.package.Miscs">rmiscs</a>, <a href="#114168" title="Boolean">prolog</a><span class="delimiter">)</span>, <a href="#114153" title="scales.xml.equals.ComparisonContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">else</span>
	  <a href="XmlDifference.scala.html#112606" title="=&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">noCalculation</a>
      <span class="keyword">else</span> 
	<a href="../../utils/package.scala.html#11065" title="object scales.utils.package">scales</a>.utils.<a href="../../utils/IterableUtils.scala.html#15421" title="(in: Iterable[(scales.xml.package.Misc, scales.xml.package.Misc)])(f: ((scales.xml.package.Misc, scales.xml.package.Misc)) =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">collectFirst</a><span class="delimiter">(</span><a href="#114166" title="scales.xml.package.Miscs">lmiscs</a>.<span title="(that: scala.collection.GenIterable[scales.xml.package.Misc])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[scales.xml.package.Misc],(scales.xml.package.Misc, scales.xml.package.Misc),Seq[(scales.xml.package.Misc, scales.xml.package.Misc)]])Seq[(scales.xml.package.Misc, scales.xml.package.Misc)]">zip</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,(scales.xml.package.Misc, scales.xml.package.Misc),Seq[(scales.xml.package.Misc, scales.xml.package.Misc)]]" class="delimiter">(</span><a href="#114167" title="scales.xml.package.Miscs">rmiscs</a><span class="delimiter">)</span><span class="delimiter">)</span><a href="#114294" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="delimiter">{</a>
	  <span class="keyword">case</span> <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="delimiter">(</span><a title="scales.xml.package.Misc" id="114297">a</a>, <a title="scales.xml.package.Misc" id="114298">b</a><span class="delimiter">)</span> =&gt; 
	    <span class="keyword">val</span> <a title="scales.xml.XmlItem" id="114299">l</a> : <a href="../XmlTypes.scala.html#12876" title="scales.xml.XmlItem">XmlItem</a> = <a href="#114297" title="scales.xml.package.Misc">a</a>.<span title="(fa: scales.xml.Comment =&gt; scales.xml.XmlItem, fb: scales.xml.PI =&gt; scales.xml.XmlItem)scales.xml.XmlItem">fold</span><span class="delimiter">(</span> <a title="scales.xml.Comment" id="114308">x</a> =&gt; <a href="#114308" title="scales.xml.Comment">x</a>, <a title="scales.xml.PI" id="114310">y</a> =&gt; <a href="#114310" title="scales.xml.PI">y</a><span class="delimiter">)</span>
	    <span class="keyword">val</span> <a title="scales.xml.XmlItem" id="114300">r</a> : <a href="../XmlTypes.scala.html#12876" title="scales.xml.XmlItem">XmlItem</a> = <a href="#114298" title="scales.xml.package.Misc">b</a>.<span title="(fa: scales.xml.Comment =&gt; scales.xml.XmlItem, fb: scales.xml.PI =&gt; scales.xml.XmlItem)scales.xml.XmlItem">fold</span><span class="delimiter">(</span> <a title="scales.xml.Comment" id="114343">x</a> =&gt; <a href="#114343" title="scales.xml.Comment">x</a>, <a title="scales.xml.PI" id="114345">y</a> =&gt; <a href="#114345" title="scales.xml.PI">y</a><span class="delimiter">)</span>
	    <span class="keyword">val</span> <a title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" id="114301">res</a> = <a href="#114150" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>.<a href="XmlComparisons.scala.html#94135" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, left: scales.xml.XmlItem, right: scales.xml.XmlItem)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#114152" title="Boolean">calculate</a>, <a href="#114153" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#114299" title="scales.xml.XmlItem">l</a>, <a href="#114300" title="scales.xml.XmlItem">r</a><span class="delimiter">)</span>
	    <span title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#114152" title="Boolean">calculate</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#114301" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
	      <span class="comment">// give back either the diff or wrap the difference</span>
	      <a href="#114301" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>.<span title="(f: ((scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)) =&gt; (scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext))Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">map</span><a href="#114380" title="(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)" class="delimiter">{</a> 
		<span class="keyword">case</span> <span title="(scales.xml.equals.MiscDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span>ItemDifference<span class="delimiter">(</span><a title="scales.xml.XmlItem" id="114421">x</a>, <a title="scales.xml.XmlItem" id="114422">y</a><span class="delimiter">)</span>, <a title="scales.xml.equals.ComparisonContext" id="114424">cont</a><span class="delimiter">)</span> =&gt; 
		  <span title="(_1: scales.xml.equals.MiscDifference, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.MiscDifference, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#114431" title="(left: scales.xml.package.Misc, right: scales.xml.package.Misc, isProlog: Boolean)scales.xml.equals.MiscDifference">MiscDifference</a><span class="delimiter">(</span><a href="#114297" title="scales.xml.package.Misc">a</a>, <a href="#114298" title="scales.xml.package.Misc">b</a>, <a href="#114168" title="Boolean">prolog</a><span class="delimiter">)</span>, <a href="#114424" title="scales.xml.equals.ComparisonContext">cont</a><span class="delimiter">)</span>
		<span class="keyword">case</span> <span title="(scales.xml.equals.MiscDifferentTypes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span>DifferentTypes<span class="delimiter">(</span><a title="scales.xml.package.PullType" id="114484">x</a>, <a title="scales.xml.package.PullType" id="114485">y</a><span class="delimiter">)</span>, <a title="scales.xml.equals.ComparisonContext" id="114487">cont</a><span class="delimiter">)</span> =&gt;
		  <span title="(_1: scales.xml.equals.MiscDifferentTypes, _2: scales.xml.equals.ComparisonContext)(scales.xml.equals.MiscDifferentTypes, scales.xml.equals.ComparisonContext)" class="delimiter">(</span><a href="XmlDifference.scala.html#114494" title="(left: scales.xml.package.Misc, right: scales.xml.package.Misc, isProlog: Boolean)scales.xml.equals.MiscDifferentTypes">MiscDifferentTypes</a><span class="delimiter">(</span><a href="#114297" title="scales.xml.package.Misc">a</a>, <a href="#114298" title="scales.xml.package.Misc">b</a>, <a href="#114168" title="Boolean">prolog</a><span class="delimiter">)</span>, <a href="#114487" title="scales.xml.equals.ComparisonContext">cont</a><span class="delimiter">)</span>
		<span class="keyword">case</span> <a title="(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)" id="114519">t</a> =&gt; <a href="#114519" title="(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)">t</a>
	      <span class="delimiter">}</span> 
	    <span class="keyword">else</span>
	      <a href="#114301" title="Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">res</a>
	<span class="delimiter">}</span>
      
    <a href="#114165" title="(lmiscs: scales.xml.package.Miscs, rmiscs: scales.xml.package.Miscs, prolog: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compareMiscs</a><span class="delimiter">(</span><a href="#114144" title="(v1: T)scales.xml.DocLike">left</a>.<a href="../XmlTypes.scala.html#94029" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#95369" title="=&gt; scales.xml.package.Miscs">misc</a>, <a href="#114144" title="(v1: T)scales.xml.DocLike">right</a>.<a href="../XmlTypes.scala.html#94029" title="=&gt; scales.xml.Prolog">prolog</a>.<a href="../XmlTypes.scala.html#95369" title="=&gt; scales.xml.package.Miscs">misc</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>.
      <span title="(alternative: =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">orElse</span><span class="delimiter">(</span><a href="#114151" title="scales.xml.equals.DocLikeWrapper[T]">docWrapper</a>.<a href="#94184" title="(calculate: Boolean, context: scales.xml.equals.ComparisonContext, leftBody: T, rightBody: T)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compare</a><span class="delimiter">(</span><a href="#114152" title="Boolean">calculate</a>, <a href="#114153" title="scales.xml.equals.ComparisonContext">context</a>, <a href="#114154" title="T">left</a>, <a href="#114155" title="T">right</a><span class="delimiter">)</span><span class="delimiter">)</span>.
      <span title="(alternative: =&gt; Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)])Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">orElse</span><span class="delimiter">(</span><a href="#114165" title="(lmiscs: scales.xml.package.Miscs, rmiscs: scales.xml.package.Miscs, prolog: Boolean)Option[(scales.xml.equals.XmlDifference[_], scales.xml.equals.ComparisonContext)]">compareMiscs</a><span class="delimiter">(</span><a href="#114144" title="(v1: T)scales.xml.DocLike">left</a>.<a href="../XmlTypes.scala.html#94030" title="=&gt; scales.xml.EndMisc">end</a>.<a href="../XmlTypes.scala.html#95377" title="=&gt; scales.xml.package.Miscs">misc</a>, <a href="#114144" title="(v1: T)scales.xml.DocLike">right</a>.<a href="../XmlTypes.scala.html#94030" title="=&gt; scales.xml.EndMisc">end</a>.<a href="../XmlTypes.scala.html#95377" title="=&gt; scales.xml.package.Miscs">misc</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DefaultDocLikeEquals extends java.lang.Object with ScalaObject" id="13261">DefaultDocLikeEquals</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/**
   * Provides the comparison for prolog, body and end miscs
   */</span> 
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit ic: scales.xml.equals.XmlComparison[scales.xml.XmlItem], implicit docWrapper: scales.xml.equals.DocLikeWrapper[T])scales.xml.equals.XmlComparison[T]" id="91483">defaultDocLikeComparison</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="91485">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]" id="94215">ic</a> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">XmlComparison</a><span class="delimiter">[</span>XmlItem<span class="delimiter">]</span>, <a title="scales.xml.equals.DocLikeWrapper[T]" id="94216">docWrapper</a> : <a href="#13360" title="scales.xml.equals.DocLikeWrapper[T]">DocLikeWrapper</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="XmlComparisons.scala.html#13609" title="scales.xml.equals.XmlComparison[T]">XmlComparison</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span title="scales.xml.equals.DocLikeComparison[T,Nothing]" class="keyword">new</span> <a href="#13357" title="scales.xml.equals.DocLikeComparison[T,Nothing]">DocLikeComparison</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#94215" title="scales.xml.equals.XmlComparison[scales.xml.XmlItem]">ic</a>, <a href="#94216" title="scales.xml.equals.DocLikeWrapper[T]">docWrapper</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>