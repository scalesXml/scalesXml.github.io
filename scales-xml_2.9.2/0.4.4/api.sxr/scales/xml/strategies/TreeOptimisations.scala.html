<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scales\xml\strategies\TreeOptimisations.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scales.xml.strategies

<span class="keyword">import</span> scales.xml._
<span class="keyword">import</span> scales.utils._

<span class="comment">/**
 * Allows replacing a tree for memory optimisations
 */</span> 
<span class="keyword">trait</span> <a title="trait TreeOptimisation[TOKEN &lt;: scales.xml.OptimisationToken] extends java.lang.Object with scales.xml.PathOptimisationStrategy[TOKEN] with ScalaObject" id="14665">TreeOptimisation</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: scales.xml.OptimisationToken" id="14679">TOKEN</a> &lt;: scales.xml.OptimisationToken<span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="../OptimisingStrategies.scala.html#12477" title="scales.xml.PathOptimisationStrategy[TOKEN]">PathOptimisationStrategy</a><span class="delimiter">[</span>TOKEN<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(elem: scales.xml.Elem, children: scales.xml.package.XmlChildren, token: TOKEN)scales.xml.package.XmlTree" id="120463">newTree</a><span class="delimiter">(</span> <a title="scales.xml.Elem" id="120475">elem</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a>, <a title="scales.xml.package.XmlChildren" id="120476">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a>, <a title="TOKEN" id="120477">token</a> : <a href="#14679" title="TOKEN">TOKEN</a> <span class="delimiter">)</span> : <a href="../../utils/Trees.scala.html#11328" title="scales.xml.package.XmlTree">XmlTree</a>

  <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(xml: scales.xml.TreeProxies, token: TOKEN)Unit" id="120464">elementEnd</a><span class="delimiter">(</span> <a title="scales.xml.TreeProxies" id="120519">xml</a> : <a href="../XmlParser.scala.html#12777" title="scales.xml.TreeProxies">TreeProxies</a>, <a title="TOKEN" id="120520">token</a> : <a href="#14679" title="TOKEN">TOKEN</a> <span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> scales.utils.Tree
    <span class="keyword">import</span> <a href="../ScalesXml.scala.html#12739" title="object scales.xml.ScalesXml">ScalesXml</a>.xmlCBF

    <span class="keyword">val</span> <a title="scales.xml.TreeProxy" id="120526">l</a> = <a href="#120519" title="scales.xml.TreeProxies">xml</a>.<a href="../XmlParser.scala.html#91985" title="=&gt; scales.xml.TreeProxy">current</a>
    <span class="keyword">val</span> <a title="scales.xml.package.XmlTree" id="120527">nt</a> = <a href="#120463" title="(elem: scales.xml.Elem, children: scales.xml.package.XmlChildren, token: TOKEN)scales.xml.package.XmlTree">newTree</a><span class="delimiter">(</span><a href="#120526" title="scales.xml.TreeProxy">l</a>.<a href="../XmlParser.scala.html#103145" title="=&gt; scales.xml.Elem">elem</a>, <a href="#120526" title="scales.xml.TreeProxy">l</a>.<a href="../XmlParser.scala.html#103147" title="=&gt; scales.xml.package.XmlBuilder">builder</a>.<span title="()scales.xml.package.XmlChildren">result</span>, <a href="#120520" title="TOKEN">token</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="120528">d</a> = <a href="#120519" title="scales.xml.TreeProxies">xml</a>.<a href="../XmlParser.scala.html#91987" title="=&gt; Int">depth</a>
    <span class="keyword">val</span> <a title="Int" id="120529">nd</a> = <a href="#120528" title="Int">d</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#120528" title="Int">d</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#120519" title="scales.xml.TreeProxies">xml</a>.<a href="../XmlParser.scala.html#91988" title="(newDepth: Int)Unit">depth</a> = <a href="#120529" title="Int">nd</a>
      <span class="keyword">val</span> <a title="scales.xml.TreeProxy" id="120538">c</a> = <a href="#120519" title="scales.xml.TreeProxies">xml</a>.<a href="../XmlParser.scala.html#91989" title="(depth: Int)scales.xml.TreeProxy">proxy</a><span class="delimiter">(</span> <a href="#120529" title="Int">nd</a> <span class="delimiter">)</span>
      <a href="#120519" title="scales.xml.TreeProxies">xml</a>.<a href="../XmlParser.scala.html#91986" title="(tp: scales.xml.TreeProxy)Unit">current</a> = <a href="#120538" title="scales.xml.TreeProxy">c</a>
      <a href="#120538" title="scales.xml.TreeProxy">c</a>.<a href="../XmlParser.scala.html#103147" title="=&gt; scales.xml.package.XmlBuilder">builder</a>.<span title="(elem: scales.utils.EitherLike[scales.xml.XmlItem,scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,[T]scales.utils.ImmutableArrayProxy[T]]])scala.collection.mutable.Builder[scales.xml.package.ItemOrElem,scales.xml.package.XmlChildren]">+=</span><span title="Unit" class="delimiter">(</span><a href="#120527" title="scales.xml.package.XmlTree">nt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#120519" title="scales.xml.TreeProxies">xml</a>.<a href="../XmlParser.scala.html#91979" title="(x$1: scales.xml.package.XmlTree)Unit">rootTree</a> = <a href="#120527" title="scales.xml.package.XmlTree">nt</a> 
      <a href="#120519" title="scales.xml.TreeProxies">xml</a>.<a href="../XmlParser.scala.html#91988" title="(newDepth: Int)Unit">depth</a> = <a href="#120529" title="Int">nd</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * An elem with no attributes, namespaces and only one text value.
 *
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class NameValue extends java.lang.Object with scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC] with ScalaObject" id="14641">NameValue</a><a href="#14641" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="scales.xml.QName" id="120574">name</a> : <a href="../QName.scala.html#12672" title="scales.xml.QName">QName</a>, <span class="keyword">val</span> <a title="String" id="120575">text</a> : <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../utils/Trees.scala.html#11328" title="scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">Tree</a><span class="delimiter">[</span>XmlItem, Elem, XCC<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="=&gt; scales.xml.Elem" id="120568">section</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a>
  <span class="keyword">def</span> <a title="=&gt; scales.xml.package.XmlChildren" id="120569">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a> = <a href="../../utils/ImmutableArray.scala.html#50373" title="(one: scales.xml.Text)scales.utils.IAOne[scales.xml.Text]">IAOne</a><span class="delimiter">(</span><a href="../XmlTypes.scala.html#96668" title="(value: String)scales.xml.Text">Text</a><span class="delimiter">(</span><a href="#120575" title="=&gt; String">text</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(section: scales.xml.Elem, children: scales.xml.package.XmlChildren)scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]" id="120570">copy</a><span class="delimiter">(</span> <a title="scales.xml.Elem" id="120596">section</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a> = <a href="#120596" title="scales.xml.Elem">section</a>, <a title="scales.xml.package.XmlChildren" id="120597">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a> = <a href="#120597" title="scales.xml.package.XmlChildren">children</a><span class="delimiter">)</span> : <a href="../../utils/Trees.scala.html#11328" title="scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">Tree</a><span class="delimiter">[</span>XmlItem, Elem, XCC<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// if we are copying we are no longer in a parse</span>
    <span class="keyword">import</span> <a href="../ScalesXml.scala.html#12739" title="object scales.xml.ScalesXml">ScalesXml</a>.fromParserDefault
    <a href="#120600" title="(section: scales.xml.Elem, children: scales.xml.package.XmlChildren)(implicit fromParser: scales.xml.FromParser)scales.xml.package.XmlTree">LazyOptimisedTree</a><a href="../XmlTypesDefaults.scala.html#91329" title="=&gt; scales.xml.FromParser" class="delimiter">(</a><a href="#120596" title="scales.xml.Elem">section</a>, <a href="#120597" title="scales.xml.package.XmlChildren">children</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * An elem with attributes or namespaces and only one text value.
 *
 */</span>
<span class="keyword">class</span> <a title="class ElemValue extends java.lang.Object with scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC] with ScalaObject" id="14614">ElemValue</a><a href="#14614" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="scales.xml.Elem" id="120624">section</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a>, <span class="keyword">val</span> <a title="String" id="120625">text</a> : <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../utils/Trees.scala.html#11328" title="scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">Tree</a><span class="delimiter">[</span>XmlItem, Elem, XCC<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="=&gt; scales.xml.package.XmlChildren" id="120619">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a> = <a href="../../utils/ImmutableArray.scala.html#50373" title="(one: scales.xml.Text)scales.utils.IAOne[scales.xml.Text]">IAOne</a><span class="delimiter">(</span><a href="../XmlTypes.scala.html#96668" title="(value: String)scales.xml.Text">Text</a><span class="delimiter">(</span><a href="#120625" title="=&gt; String">text</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(section: scales.xml.Elem, children: scales.xml.package.XmlChildren)scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]" id="120620">copy</a><span class="delimiter">(</span> <a title="scales.xml.Elem" id="120644">section</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a> = <a href="#120644" title="scales.xml.Elem">section</a>, <a title="scales.xml.package.XmlChildren" id="120645">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a> = <a href="#120645" title="scales.xml.package.XmlChildren">children</a><span class="delimiter">)</span> : <a href="../../utils/Trees.scala.html#11328" title="scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">Tree</a><span class="delimiter">[</span>XmlItem, Elem, XCC<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// if we are copying we are no longer in a parse</span>
    <span class="keyword">import</span> <a href="../ScalesXml.scala.html#12739" title="object scales.xml.ScalesXml">ScalesXml</a>.fromParserDefault
    <a href="#120600" title="(section: scales.xml.Elem, children: scales.xml.package.XmlChildren)(implicit fromParser: scales.xml.FromParser)scales.xml.package.XmlTree">LazyOptimisedTree</a><a href="../XmlTypesDefaults.scala.html#91329" title="=&gt; scales.xml.FromParser" class="delimiter">(</a><a href="#120644" title="scales.xml.Elem">section</a>, <a href="#120645" title="scales.xml.package.XmlChildren">children</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">/**
 * Collection of optimisations that reduce memory significantly at the cost of parsing performance, and later non-lazy creation of correct objects for accessing the tree.
 *
 * This can have confusing runtime evaluation of XPaths etc.  These optimisations are appropriate for trees that are seldom read, repeated reads may generate too much garbage.
 */</span> 
<span class="keyword">object</span> <a title="object scales.xml.strategies.LazyOptimisedTree" id="14639">LazyOptimisedTree</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/**
   * Returns an optimised Tree if Possible
   */</span> 
  <span class="keyword">def</span> <a title="(section: scales.xml.Elem, children: scales.xml.package.XmlChildren)(implicit fromParser: scales.xml.FromParser)scales.xml.package.XmlTree" id="120600">apply</a><span class="delimiter">(</span> <a title="scales.xml.Elem" id="120602">section</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a>, <a title="scales.xml.package.XmlChildren" id="120603">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a> <span class="delimiter">)</span> <span class="delimiter">(</span> <span class="keyword">implicit</span> <a title="scales.xml.FromParser" id="120604">fromParser</a> : <a href="../XmlTypesDefaults.scala.html#12399" title="scales.xml.FromParser">FromParser</a> <span class="delimiter">)</span> : <a href="../../utils/Trees.scala.html#11328" title="scales.xml.package.XmlTree">XmlTree</a> = 
    <span title="scales.xml.package.XmlTree" class="keyword">if</span> <span class="delimiter">(</span><a href="#120603" title="scales.xml.package.XmlChildren">children</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="../../utils/Trees.scala.html#83381" title="(isection: scales.xml.Elem, ichildren: scales.xml.package.XCC[scales.utils.package.ItemOrTree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">Tree</a><span class="delimiter">(</span><a href="#120602" title="scales.xml.Elem">section</a>, <a href="#120603" title="scales.xml.package.XmlChildren">children</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scales.xml.package.ItemOrElem" id="120681">head</a> = <a href="#120603" title="scales.xml.package.XmlChildren">children</a>.<span title="=&gt; scales.xml.package.ItemOrElem">head</span>
      <span title="scales.xml.package.XmlTree" class="keyword">if</span> <span class="delimiter">(</span><a href="#120681" title="scales.xml.package.ItemOrElem">head</a>.<a href="../../utils/EitherLike.scala.html#44390" title="=&gt; Boolean">isLeft</a><span class="delimiter">)</span> <span class="delimiter">{</span>
	<span class="keyword">val</span> <a title="scales.xml.XmlItem" id="120682">left</a> = <a href="#120681" title="scales.xml.package.ItemOrElem">head</a>.<a href="../../utils/EitherLike.scala.html#44396" title="=&gt; scales.xml.XmlItem">getLeft</a>
	<span title="scales.xml.package.XmlTree" class="keyword">if</span> <span class="delimiter">(</span><a href="#120682" title="scales.xml.XmlItem">left</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../XmlTypes.scala.html#12753" title="scales.xml.Text">Text</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#120603" title="scales.xml.package.XmlChildren">children</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	  <span title="scales.xml.package.XmlTree" class="keyword">if</span> <span class="delimiter">(</span><a href="#120602" title="scales.xml.Elem">section</a>.<a href="../XmlTypes.scala.html#91284" title="=&gt; scales.xml.package.Attributes">attributes</a>.<a href="../../utils/ListSet.scala.html#75151" title="=&gt; Boolean">isEmpty</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#120602" title="scales.xml.Elem">section</a>.<a href="../XmlTypes.scala.html#91285" title="=&gt; scala.collection.immutable.Map[String,String]">namespaces</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
	    <a href="#120601" title="(iname: scales.xml.QName, itext: String)(implicit fromParser: scales.xml.FromParser)scales.xml.strategies.NameValue">newNameValue</a><a href="#120604" title="scales.xml.FromParser" class="delimiter">(</a><a href="#120602" title="scales.xml.Elem">section</a>.<a href="../XmlTypes.scala.html#91283" title="=&gt; scales.xml.QName">name</a>, <a href="#120682" title="scales.xml.XmlItem">left</a>.<a href="../XmlTypes.scala.html#92381" title="=&gt; String">value</a><span class="delimiter">)</span>
	  <span class="keyword">else</span>
	    <span title="scales.xml.strategies.ElemValue" class="keyword">new</span> <a href="#14614" title="scales.xml.strategies.ElemValue">ElemValue</a><span class="delimiter">(</span><a href="#120602" title="scales.xml.Elem">section</a>, <a href="#120682" title="scales.xml.XmlItem">left</a>.<a href="../XmlTypes.scala.html#92381" title="=&gt; String">value</a><span class="delimiter">)</span>
	<span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../utils/Trees.scala.html#83381" title="(isection: scales.xml.Elem, ichildren: scales.xml.package.XCC[scales.utils.package.ItemOrTree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">Tree</a><span class="delimiter">(</span><a href="#120602" title="scales.xml.Elem">section</a>, <a href="#120603" title="scales.xml.package.XmlChildren">children</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../utils/Trees.scala.html#83381" title="(isection: scales.xml.Elem, ichildren: scales.xml.package.XCC[scales.utils.package.ItemOrTree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]])scales.utils.Tree[scales.xml.XmlItem,scales.xml.Elem,scales.xml.package.XCC]">Tree</a><span class="delimiter">(</span><a href="#120602" title="scales.xml.Elem">section</a>, <a href="#120603" title="scales.xml.package.XmlChildren">children</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  

  <span class="keyword">def</span> <a title="(iname: scales.xml.QName, itext: String)(implicit fromParser: scales.xml.FromParser)scales.xml.strategies.NameValue" id="120601">newNameValue</a><span class="delimiter">(</span> <a title="scales.xml.QName" id="120695">iname</a> : <a href="../QName.scala.html#12672" title="scales.xml.QName">QName</a>, <a title="String" id="120696">itext</a> : <span title="String">String</span> <span class="delimiter">)</span> <span class="delimiter">(</span> <span class="keyword">implicit</span> <a title="scales.xml.FromParser" id="120697">fromParser</a> : <a href="../XmlTypesDefaults.scala.html#12399" title="scales.xml.FromParser">FromParser</a> <span class="delimiter">)</span> : <a href="#14641" title="scales.xml.strategies.NameValue">NameValue</a> = 
    <span title="scales.xml.strategies.NameValue" class="keyword">if</span> <span class="delimiter">(</span><a href="#120697" title="scales.xml.FromParser">fromParser</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../XmlTypesDefaults.scala.html#15817" title="=&gt; scales.xml.package.NotFromParserO.type">NotFromParser</a><span class="delimiter">)</span>
      <a href="#120743" title="scales.xml.strategies.NameValue" class="keyword">new</a> <a href="#14641" title="anonymous class $anon extends scales.xml.strategies.NameValue" id="120743">NameValue</a><span class="delimiter">(</span><a href="#120695" title="scales.xml.QName">iname</a>, <a href="#120696" title="String">itext</a><span class="delimiter">)</span> <span class="delimiter">{</span>
	
	<span class="keyword">def</span> <a title="=&gt; scales.xml.Elem" id="120760">section</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a> = <a href="../XmlTypes.scala.html#91299" title="(namei: scales.xml.QName, attributesi: scales.xml.package.Attributes, namespacesi: scala.collection.immutable.Map[String,String])(implicit fromParser: scales.xml.FromParser)scales.xml.Elem">Elem</a><span class="delimiter">(</span><a href="#120574" title="=&gt; scales.xml.QName">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#15817" title="=&gt; scales.xml.package.NotFromParserO.type">NotFromParser</a><span class="delimiter">)</span> <span class="comment">// have to recheck that the qname is ok</span>

      <span class="delimiter">}</span>
    <span class="keyword">else</span>
      <a href="#120770" title="scales.xml.strategies.NameValue" class="keyword">new</a> <a href="#14641" title="anonymous class $anon extends scales.xml.strategies.NameValue" id="120770">NameValue</a><span class="delimiter">(</span><a href="#120695" title="scales.xml.QName">iname</a>, <a href="#120696" title="String">itext</a><span class="delimiter">)</span> <span class="delimiter">{</span>
	
	<span class="keyword">def</span> <a title="=&gt; scales.xml.Elem" id="120787">section</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a> = <a href="../XmlTypes.scala.html#91299" title="(namei: scales.xml.QName, attributesi: scales.xml.package.Attributes, namespacesi: scala.collection.immutable.Map[String,String])(implicit fromParser: scales.xml.FromParser)scales.xml.Elem">Elem</a><span class="delimiter">(</span><a href="#120574" title="=&gt; scales.xml.QName">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#15813" title="object scales.xml.package.IsFromParser">IsFromParser</a><span class="delimiter">)</span> <span class="comment">// don't have to recheck</span>

      <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Optimises QNames and Trees according to LazyOptimisedTree
 */</span> 
<span class="keyword">object</span> <a title="object scales.xml.strategies.QNameTreeOptimisation" id="14654">QNameTreeOptimisation</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#14665" title="scales.xml.strategies.TreeOptimisation[scales.xml.QNameToken]">TreeOptimisation</a><span class="delimiter">[</span>QNameToken<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../OptimisingStrategies.scala.html#12696" title="scales.xml.QNameOptimisationT[scales.xml.QNameToken]">QNameOptimisationT</a><span class="delimiter">[</span>QNameToken<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../OptimisingStrategies.scala.html#12714" title="scales.xml.QNameTokenF">QNameTokenF</a> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(elem: scales.xml.Elem, children: scales.xml.package.XmlChildren, token: scales.xml.QNameToken)scales.xml.package.XmlTree" id="120798">newTree</a><span class="delimiter">(</span> <a title="scales.xml.Elem" id="120800">elem</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a>, <a title="scales.xml.package.XmlChildren" id="120801">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a>, <a title="scales.xml.QNameToken" id="120802">token</a> : <a href="../OptimisingStrategies.scala.html#12708" title="scales.xml.QNameToken">QNameToken</a> <span class="delimiter">)</span> : <a href="../../utils/Trees.scala.html#11328" title="scales.xml.package.XmlTree">XmlTree</a> =
    <a href="#120600" title="(section: scales.xml.Elem, children: scales.xml.package.XmlChildren)(implicit fromParser: scales.xml.FromParser)scales.xml.package.XmlTree">LazyOptimisedTree</a><span class="delimiter">(</span> <a href="#120800" title="scales.xml.Elem">elem</a>, <a href="#120801" title="scales.xml.package.XmlChildren">children</a> <span class="delimiter">)</span><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#15813" title="object scales.xml.package.IsFromParser">IsFromParser</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Optimised QNames, Elems and Tree, heavily reduced memory consumption with LazyOptimisedTree.
 */</span>
<span class="keyword">object</span> <a title="object scales.xml.strategies.QNameElemTreeOptimisation" id="14648">QNameElemTreeOptimisation</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../OptimisingStrategies.scala.html#12477" title="scales.xml.PathOptimisationStrategy[scales.xml.strategies.ElemToken]">PathOptimisationStrategy</a><span class="delimiter">[</span>ElemToken<span class="delimiter">]</span> <span class="keyword">with</span> <a href="NonDefaultStrategies.scala.html#14599" title="scales.xml.strategies.ElemQNameOptimisationT[scales.xml.strategies.ElemToken]">ElemQNameOptimisationT</a><span class="delimiter">[</span>ElemToken<span class="delimiter">]</span> <span class="keyword">with</span> <a href="#14665" title="scales.xml.strategies.TreeOptimisation[scales.xml.strategies.ElemToken]">TreeOptimisation</a><span class="delimiter">[</span>ElemToken<span class="delimiter">]</span> <span class="keyword">with</span> <a href="NonDefaultStrategies.scala.html#14611" title="scales.xml.strategies.ElemTokenF">ElemTokenF</a> <span class="delimiter">{</span>
  
  <span class="keyword">def</span> <a title="(elem: scales.xml.Elem, children: scales.xml.package.XmlChildren, token: scales.xml.strategies.ElemToken)scales.xml.package.XmlTree" id="120808">newTree</a><span class="delimiter">(</span> <a title="scales.xml.Elem" id="120810">elem</a> : <a href="../XmlTypes.scala.html#12342" title="scales.xml.Elem">Elem</a>, <a title="scales.xml.package.XmlChildren" id="120811">children</a> : <a href="../../utils/ImmutableArray.scala.html#10533" title="scales.xml.package.XmlChildren">XmlChildren</a>, <a title="scales.xml.strategies.ElemToken" id="120812">token</a> : <a href="NonDefaultStrategies.scala.html#14605" title="scales.xml.strategies.ElemToken">ElemToken</a> <span class="delimiter">)</span> : <a href="../../utils/Trees.scala.html#11328" title="scales.xml.package.XmlTree">XmlTree</a> =
    <a href="#120600" title="(section: scales.xml.Elem, children: scales.xml.package.XmlChildren)(implicit fromParser: scales.xml.FromParser)scales.xml.package.XmlTree">LazyOptimisedTree</a><span class="delimiter">(</span> <a href="#120810" title="scales.xml.Elem">elem</a>, <a href="#120811" title="scales.xml.package.XmlChildren">children</a> <span class="delimiter">)</span><span class="delimiter">(</span><a href="../XmlTypesDefaults.scala.html#15813" title="object scales.xml.package.IsFromParser">IsFromParser</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>